---
layout: post
title:  "정규화에 대해 알아보기" 
excerpt: "데이터의 중복을 최소화하고 이상 현상(anomaly)이 발생하지 않도록 하기 위해 정규화라는 작업을 진행한다. 중복된 속성 또는 불필요한 속성들을 여러 테이블로 분산시켜 데이터의 처리 과정에 생겨날 수 있는 문제점을 해결하기 위한 방법이다."
date:   2023-05-25 15:00:00 +0900
categories: Database
tags: [Database, SQL]
comments: true

---

<br>

## 이상 현상(anomaly)

정규화를 하지 않았을 때 발생할 수 있는 이상 현상은 아래와 같다.

### 1. 새로운 데이터를 삽입할 때, 불필요한 데이터가 함께 삽입되는 경우

![image](https://github.com/wnjoon/wnjoon.github.io/assets/39115630/8e119381-3334-4307-b6e3-812b8c7bccc0)  
*@그림 1 : 정규화의 필요성 - 삽입 이상*

그림 1은 정규화가 되지 않은 테이블에 교육팀이라는 부서를 추가하려고 할 때 생기는 문제를 보여준다. 직원구분코드와 직원번호를 식별자로 갖는 테이블에서 단순히 부서 하나만 추가하려고 해도 불필요한 데이터를 추가해줘야만 하는 문제가 생긴다.

### 2. 데이터가 중복으로 존재해서, 데이터의 값을 변경하였을 때 한쪽은 변경되고 한쪽은 변경되지 않는 경우

![image](https://github.com/wnjoon/wnjoon.github.io/assets/39115630/fc21c358-936d-4951-b1f6-776a0ba11f6b)  
*@그림 2 : 정규화의 필요성 - 갱신 이상*

그림 2에서 부서번호 20번에 해당하는 부서명을 경영관리팀에서 피플케어팀으로 변경한다고 하자. 테이블에 동일한 내용을 갖는 컬럼이 2개 이상이기 때문에, 만약 영희는 제대로 변경했더라도 미애가 그렇지 못하면 같은 부서번호임에도 서로 다른 부서명이 존재할 수 있는 문제가 생긴다. 

### 3. 데이터를 삭제할 때, 삭제되어서는 안되는 내용까지 삭제되는 경우

![image](https://github.com/wnjoon/wnjoon.github.io/assets/39115630/19284ced-e793-4fe4-bbb7-4d6333222fff)  
*@그림 3 : 정규화의 필요성 - 삭제 이상*

그림 3에서 영희와 미애가 모두 퇴사했다고 가정하자. 직원은 퇴사했더라도 경영관리팀이라는 부서는 그대로 존재할 수 있어야 하는데, 현재 테이블에서는 직원과 함께 부서까지도 없어지는 문제가 생긴다.

<br>
 
## 정규화

정규화는 위에서 언급한 이상 현상을 없애기 위한 과정을 말한다. 총 3가지 단계로 진행할 수 있다.

### 1. 제 1정규형

> 모든 속성의 값이 원자 값(atomic value)으로만 구성되어 있다.

![image](https://github.com/wnjoon/wnjoon.github.io/assets/39115630/3645b3c0-02bb-4135-a73a-4dcd67e26dc7)  
*@그림 4 : 제 1정규화 전*

그림 4를 보면 철수, 영희, 기범의 업무가 2개 이상인 것을 알 수 있다. 테이블에 있는 모든 속성이 각각 하나의 값만을 갖도록 만드는 것이 제 1정규화의 과정이다. 그렇다면 어떻게 정규화로 처리할 수 있을까?

![image](https://github.com/wnjoon/wnjoon.github.io/assets/39115630/42187e0d-6ef3-4e56-8177-5a92a2452675)  
*@그림 5 : 제 1정규화 결과*

그림 5와 같이 테이블을 2개로 나누어준다. 직원구분코드와 직원번호, 그리고 업무가 여러개인 경우를 처리할 수 있는 순번 속성을 추가한다. 이렇게 하면 속성 별로 하나의 값만을 가질 뿐만 아니라, 향후 직원의 업무가 추가 혹은 삭제되더라도 유연하게 테이블을 관리할 수 있게 된다.

### 2. 제 2정규형

> 주식별자가 아닌 모든 속성이 주식별자 속성에 완전히 함수 종속된다.   

좀 어려운 표현인데, 정리하면 주식별자가 아닌 값에 의존적인 속성을 분리해서 모든 속성이 주식별자에 의존적이도록 만드는 과정을 말한다.

![image](https://github.com/wnjoon/wnjoon.github.io/assets/39115630/e2a2b97d-5005-4d8f-8ae8-991ea61d2256)  
*@그림 6 : 제 2정규화 전*

그림 6에서 보면 직원구분명은 직원구분코드 주식별자에는 의존적이나, 직원번호 주식별자와는 상관이 없다. 이러한 경우에도 동일하게 테이블을 분리해서 문제를 해결할 수 있다.

![image](https://github.com/wnjoon/wnjoon.github.io/assets/39115630/86aad487-3cfe-412f-b81d-9fd3f06160af)  
*@그림 7 : 제 2정규화 결과*

직원구분코드와 직원구분명을 별도의 테이블로 분리했다. 이렇게하면 주식별자에 완전히 종속된 테이블을 만들 수 있을 뿐 아니라, 추후 직원구분명이 변경되더라도 간단하게 하나의 테이블만 변경해도 된다.

### 3. 제 3정규형

> 일반 속성들 간에 함수 종속이 존재하지 않는다.

![image](https://github.com/wnjoon/wnjoon.github.io/assets/39115630/dbfb32da-3340-429e-8313-7fbae00596a6)  
*@그림 8 : 제 3정규화 전*

그림 8을 보면 부서번호, 부서명, 부서위치 속성은 직원구분코드와 직원번호 주식별자랑은 크게 연관이 없다는 것을 볼 수 있다. 즉, 부서번호라는 주식별자를 갖는 별도의 테이블로 분리할 수 있다는 것을 알 수 있다.

![image](https://github.com/wnjoon/wnjoon.github.io/assets/39115630/8df45c5e-5fee-4328-a0b0-14f7b6559004)  
*@그림 9 : 제 3정규화 결과*

<br>

## 참고

- [비전공자도 쉽게 배워 바로 써먹는 실무 활용 SQL - CLASS101](https://class101.net/ko/products/5f3b8428203b170014d616d2)








