<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.10.0">Jekyll</generator><link href="http://localhost:4000/feed.xml" rel="self" type="application/atom+xml" /><link href="http://localhost:4000/" rel="alternate" type="text/html" /><updated>2025-12-22T14:48:45+09:00</updated><id>http://localhost:4000/feed.xml</id><title type="html">blog.wonjoon</title><subtitle>A blog about software engineering, blockchain, and other development topics.
</subtitle><author><name>Wonjoon</name></author><entry xml:lang="ko"><title type="html">Claude Code로 Go의 Yahoo Finance 라이브러리 만들기 #7</title><link href="http://localhost:4000/2025/12/20/go-yfinance-6/" rel="alternate" type="text/html" title="Claude Code로 Go의 Yahoo Finance 라이브러리 만들기 #7" /><published>2025-12-20T00:00:00+09:00</published><updated>2025-12-20T00:00:00+09:00</updated><id>http://localhost:4000/2025/12/20/go-yfinance-6</id><content type="html" xml:base="http://localhost:4000/2025/12/20/go-yfinance-6/"><![CDATA[<h2 id="메인테이너와의-대화">메인테이너와의 대화</h2>

<p>저는 이 사이드 프로젝트를 시작하면서부터 Python yfinance의 Discussion에 해당 리포지토리를 참고하여 Go 기반의 yfinance를 구현하고 있다고 말했습니다. 그중 한 메인테이너가 저의 질문에 답하면서 여러가지 내용들이 오갔습니다.</p>

<p><br /></p>

<p><img src="https://velog.velcdn.com/images/wnjoon/post/20569d0b-92cd-44b5-9d6f-83817238fdcf/image.png" alt="image" /></p>

<p><br /></p>

<p>솔직한 마음으로 APACHE 2.0 라이센스를 사용하고 있기 때문에, 해당 리포지토리에서 사용되는 로직이나 구현 방식을 참조하는 것은 문제가 아니었습니다. 하지만 원작자에게 이를 참조해서 새로운 프로그램을 개발하고 있다고 언급하는 것은 당연한 예의라고 생각했습니다.</p>

<p>처음 이 메인테이너가 저에게 질문한 것은, 이미 잘 작성된 Python이 있는데 굳이 새로운 언어로 개발해야하는 이유였습니다. Python에서 반환하는 Pandas Dataframe을 받아서 Go 기반의 구조체로 변환해주는 Wrapper만 개발하면 쉽지 않겠느냐는 말이었죠.</p>

<p>사실 많은 개발자들이 이렇게 사용하고 있습니다. 하지만 이를 위해서는 Go 프로그램인데도 불구하고 Python 환경을 구성하고 해당 라이브러리를 호출하기 위한 별도의 서버를 구축해야 하죠. 저는 이에 대한 오버헤드가 분명히 있을 것이라고 생각했고, 답장에 적지는 않았지만 예상보다 쉽게 Claude Code를 이용해서 이를 해결할 수 있을 것이라 생각했습니다.</p>

<p>Python yfinance를 Go로 변환하는 것은 당연히 그대로 배끼는 Port가 아닌, Rewrite의 과정이었습니다. URL, 파라미터, 그리고 crumb 처리 로직을 참고하긴 하지만, 코드 구조는 완전히 Go 스타일로 변경했습니다.</p>

<p>이에 대한 내용을 Discussion에 답변했고, <a href="https://github.com/wnjoon/go-yfinance/blob/main/README.md#legal--license">README.md</a>에 원작자에 대한 감사의 의미를 포함한 추가적인 정보를 기술했습니다.</p>

<div class="language-md highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gu">## Legal &amp; License</span>

<span class="gs">**go-yfinance**</span> is distributed under the <span class="gs">**Apache Software License 2.0**</span>. See the <span class="sb">`LICENSE`</span> file in the repository for details.

<span class="gu">### Disclaimer</span>
<span class="gt">
&gt; **Please read this carefully before using this library.**</span>
<span class="p">
1.</span>  <span class="gs">**Unofficial API**</span>: This library is <span class="gs">**not affiliated with, endorsed by, or connected to Yahoo! Finance**</span>. It wraps unofficial API endpoints intended for web browser consumption.
<span class="p">
2.</span>  <span class="gs">**Research &amp; Educational Use**</span>: This library is intended for <span class="gs">**research and educational purposes**</span>.
<span class="p">
3.</span>  <span class="gs">**Terms of Service**</span>: Use of this library must comply with <span class="p">[</span><span class="nv">Yahoo!'s Terms of Service</span><span class="p">](</span><span class="sx">https://policies.yahoo.com/us/en/yahoo/terms/index.htm</span><span class="p">)</span>. Users are solely responsible for ensuring their usage is compliant.
<span class="p">
4.</span>  <span class="gs">**Risk of Blocking**</span>: Since this library relies on unofficial methods, Yahoo! Finance may change their API structure or block IP addresses making excessive requests at any time without notice.
<span class="p">
5.</span>  <span class="gs">**No Warranty**</span>: This software is provided "as is", without warranty of any kind, express or implied. The authors shall not be held liable for any damages or legal issues arising from the use of this software.

<span class="gu">### Credits</span>

This project is a Go implementation based on the logic of <span class="p">[</span><span class="nv">yfinance</span><span class="p">](</span><span class="sx">https://github.com/ranaroussi/yfinance</span><span class="p">)</span>. Special thanks to <span class="gs">**Ran Aroussi**</span> and all contributors of the original project for their excellent work.
</code></pre></div></div>

<h2 id="추가적인-정보-등록하기">추가적인 정보 등록하기</h2>

<p>먼저 <a href="https://github.com/wnjoon/go-yfinance/blob/main/README.md#legal--license">README.md</a> 상단에 현재 리포지토리에 대한 추가적인 정보(배지)를 기술했습니다.</p>

<ul>
  <li>Go Reference: <code class="language-plaintext highlighter-rouge">pkg.go.dev</code> 문서로 바로 이동</li>
  <li>Go Report Card: 코드 품질 점수</li>
  <li>License: Apache 2.0 라이선스임을 표시</li>
</ul>

<h3 id="go-report-card">Go Report Card</h3>

<p>Go Report Card는 현재 리포지토리가 go_vet, gofmt, gocyclo, ineffassign, license, misspell 항목에 대해서 얼마나 만족하고 있는지를 퍼센트로 표시해주는 기능입니다.</p>

<p>기본적으로 golanglint-cli를 사용해서 항상 코드 품질을 검사하는데요, 마지막 Phase들을 작성하면서 일부 검사가 누락된 부분이 있었는지 처음에는 80% 점수를 받고 있었습니다. 그래서 Claude Code에게 lint를 검사를 다시 요청했고, 이를 모두 반영하고 main에 머지 했습니다.</p>

<p><br /></p>

<p><img src="https://velog.velcdn.com/images/wnjoon/post/8b7aa1bd-b4c1-4bbf-be68-800d11ff877b/image.png" alt="image" /></p>

<p><br /></p>

<p><code class="language-plaintext highlighter-rouge">gocyclo</code>의 경우에는 아직 92%를 받고 있는데요, 대부분이 함수의 복잡도에서 발생하는 문제들이었습니다.</p>

<p>약 8개의 함수에서 복잡도 기준치(15) 이상을 초과했는데요, 이 함수들은 외부 데이터(JSON, Protobuf)를 파싱하는 로직이라, 필드를 추출하기 위해 수많은 if나 switch 문이 포함되어 있습니다. 해당 로직을 억지로 쪼개서 수많은 헬퍼 함수를 생성하는 과정에서 버그가 발생할 확률이 높아질 것 같고, 더 나아가 이를 해결하기 위한 시간이 많이 소요될 것으로 보였습니다.</p>

<p>점수를 높이는 것 외에 기능상으로 문제는 없었기 때문에, 이 부분은 향후에 점진적으로 개선하기로 계획했습니다.</p>

<h2 id="mkdocs를-활용한-정적-문서-생성하기">Mkdocs를 활용한 정적 문서 생성하기</h2>

<p>지난번 <a href="https://wnjoon.github.io/2025/12/19/go-yfinance-2/">포스팅</a>에서 각 메소드에 대한 문서를 만들고, 이를 정적인 페이지로 변환하는 것을 계획하고 있다고 말씀드렸습니다. 그래서 Mkdocs를 활용해서 <a href="https://github.com/wnjoon/go-yfinance/blob/main/docs/API.md">API 문서</a>를 정적 페이지로 변환해보았습니다.</p>

<p>이를 위해서 먼저 go.mod와 동일한 경로에 <a href="https://github.com/wnjoon/go-yfinance/blob/main/mkdocs.yml">mkdocs.yml</a> 파일을 생성했습니다. 가장 상단에 해당 리포지토리의 URL과 정적페이지가 표시될 URL을 작성했습니다. github page를 사용하면 일반적으로 정적 페이지의 URL은 <code class="language-plaintext highlighter-rouge">https://&lt;username&gt;.github.io/&lt;repository&gt;</code> 형태로 표시됩니다.</p>

<p>theme는 light/dark 모드를 모두 지원하도록 설정했습니다. 그래서 상단 Search란 옆에 톱니바퀴를 누르면 테마를 변경할 수 있습니다.</p>

<p><img src="https://velog.velcdn.com/images/wnjoon/post/1fd2c953-d6e6-4025-8947-ee4d6055f79b/image.png" alt="image" /></p>

<p>그리고 <a href="https://github.com/wnjoon/go-yfinance/blob/main/Makefile">Makefile</a>에 문서 파일을 기반으로 정적인 웹페이지를 테스트, 빌드하는 명령어도 추가했습니다.</p>

<div class="language-makefile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">$(MKDOCS)</span><span class="o">:</span>
	python3 <span class="nt">-m</span> venv <span class="nv">$(VENV)</span>
	<span class="nv">$(PIP)</span> <span class="nb">install</span> <span class="nt">--upgrade</span> pip
	<span class="nv">$(PIP)</span> <span class="nb">install </span>mkdocs-material

<span class="c"># Serve documentation locally (http://localhost:8000)
</span><span class="nl">docs-serve</span><span class="o">:</span> <span class="nf">$(MKDOCS)</span>
	<span class="nv">$(MKDOCS)</span> serve

<span class="c"># Build documentation site
</span><span class="nl">docs-build</span><span class="o">:</span> <span class="nf">$(MKDOCS)</span>
	<span class="nv">$(MKDOCS)</span> build
</code></pre></div></div>

<p>마지막으로 github action에 리포지토리가 main으로 머지되면 자동으로 웹사이트를 최신으로 빌드해서 배포하도록 <a href="https://github.com/wnjoon/go-yfinance/blob/main/.github/workflows/docs.yml">docs.yml</a> 파일을 수정했습니다.</p>

<p>현재 배포되어 있는 정적 웹페이지는 <strong><a href="https://wnjoon.github.io/go-yfinance/">https://wnjoon.github.io/go-yfinance/</a></strong>를 통해 확인할 수 있습니다.</p>

<h2 id="pkggodev에-배포하기">pkg.go.dev에 배포하기</h2>

<p>생성된 라이브러리를 pkg.go.dev에 배포하는 것은 정말 쉽습니다. 3가지 단계만 거치면 되는데요,</p>

<ol>
  <li>README.md에 변경사항을 기록한다.</li>
  <li>새로운 태그를 붙여서 푸시한다.
    <ul>
      <li>git tag v0.1.0</li>
      <li>git push origin v0.1.0</li>
    </ul>
  </li>
  <li>웹브라우저에서 “https://pkg.go.dev/github.com/wnjoon/go-yfinance@v0.1.0”로 접속해서, <strong>Request</strong> 버튼을 클릭한다.</li>
</ol>

<p>대략 5분 이내로 pkg.go.dev에 등록되었던 것 같습니다.</p>

<h2 id="향후-개발-계획">향후 개발 계획</h2>

<p>개발을 마무리 하고, 전체적인 디렉토리 구조를 정리했습니다.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>yfinance-main
ㄴ python-yfinance (ranaroussi/yfinance)
ㄴ go-yfinance
ㄴ .claude
ㄴ ...
</code></pre></div></div>

<p>그리고 앞으로 아래와 같은 단계로 개발을 진행할 계획입니다.</p>

<ul>
  <li>python-yfinance에서 새로운 릴리즈가 나오면, 이를 claude code를 이용하여 분석</li>
  <li>go-yfinance의 현재 버전과 비교했을때 달라진 점이 어떤건지 파악</li>
  <li>어떠한 부분에서 변경이 발생한건지, 기능상 업데이트가 필요한 부분인지 확인</li>
  <li>해당 변경 부분을 업데이트하고 새로운 릴리즈 배포</li>
</ul>

<h2 id="소감">소감</h2>

<p>사실 go-yfinance를 개발해보면서, 앞으로 나와 같은 개발자들은 어떤 역량을 길러야할지에 대해 굉장히 많은 생각을 하게 되었습니다. 작년에 사이드잡을 할 때, 실무에서 한번도 사용해본적 없던 쿠버네티스를 실제로 적용할때 ChatGPT와 Windsurf의 도움을 정말 많이 받았습니다. 정말 복잡한 업무가 아니었고, 대부분 규칙이 정의되어 있는 인프라 업무였음에도 불구하고 AI를 활용해서 가끔은 엉뚱한 답변와 해결책이 나와서 꽤 많이 고생했던 적도 있었습니다.</p>

<p>이제 겨우 1년이 지났는데, Claude Code를 활용한 개발은 정말 놀라울 정도입니다. 단순 노동과 같은 개발은 말할 것도 없고, 복잡한 업무의 경우 처음에는 명확한 이해와 설계가 필요한 시간이 존재하지만, 이마저도 굉장히 빠르게 이해하고 제가 예상한 것보다 훨씬 빠르고 정확하게 개발하는 것을 볼 수 있었습니다. 어떻게보면 지시하는 사람의 역량에 따라 사람이 이해하는 것보다 훨씬 빠르고 정확하게 이해할 수도 있겠다는 생각이 들었습니다.</p>

<p>얼마전 미국에서 일하고 계신 한분이 “샌프란시스코에 가면 구인구직하는 전광판이 굉장히 많은데, AI 에이전트 또는 Web3 관련 개발자를 엄청나게 구하고 있더라”는 말을 했습니다. 저는 앞으로 모든 개발자들은 AI 에이전트 개발자가 되어야 한다고 생각합니다. 마치 Java, Python, Go와 같은 언어가 덧셈과 뺄셈이라면, AI 에이전트 개발자는 계산기를 사용하는 것처럼 표준화된 기술이 될 것이라고 생각합니다. ChatGPT, Gemini, Perplexity와 같은 AI 도구에게 질문을 잘 하는 것을 넘어서, 이제는 LLM을 활용해서 내가 가치를 창출하는 프로그램을 개발하는 것에 집중해야겠다고 느끼게 된 시간이었습니다.</p>]]></content><author><name>Wonjoon</name></author><category term="dev" /><category term="go-yfinance" /><summary type="html"><![CDATA[Claude Code를 활용해서 python 버전의 yfinance 라이브러리를 기반으로 go 버전의 yahoo finance 라이브러리를 만들어가는 이야기를 담은 일곱번째 포스팅입니다.]]></summary></entry><entry xml:lang="ko"><title type="html">Claude Code로 Go의 Yahoo Finance 라이브러리 만들기 #6</title><link href="http://localhost:4000/2025/12/20/go-yfinance-5/" rel="alternate" type="text/html" title="Claude Code로 Go의 Yahoo Finance 라이브러리 만들기 #6" /><published>2025-12-20T00:00:00+09:00</published><updated>2025-12-20T00:00:00+09:00</updated><id>http://localhost:4000/2025/12/20/go-yfinance-5</id><content type="html" xml:base="http://localhost:4000/2025/12/20/go-yfinance-5/"><![CDATA[<h2 id="claudemd-만들기-이제서야">CLAUDE.md 만들기 (이제서야)</h2>

<p>남은 Phase들을 개발해달라고 요청했는데, Claude Code가 예상하지 못한 작업을 진행했습니다. 현재 작업 리포지토리는 아래와 같이 구성되어 있습니다.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>yfinance-main
ㄴ yfinance
ㄴ go-yfinance
ㄴ ...
</code></pre></div></div>

<p>지금까지 <a href="https://github.com/ranaroussi/yfinance">ranaroussi/yfinance</a> 리포지토리를 직접 다운받은 후, 이 내부에 go-yfinance 리포지토리를 생성해서 yfinance의 기능들을 하나씩 확인하고 비교하면서 구현하고 있었습니다.</p>

<p>그런데 갑자기 Claude Code가 yfinance의 API 목록을 Web으로부터 조회할 수 있게 해달라고 요청하더라구요. 이전까지 다른 Phase를 개발할떄에는 이러지 않았는데, 안되겠다 싶어서 우선 작업 방식을 CLAUDE.md에 정의해야겠다고 생각했습니다. 네, 이전 포스팅에서 제가 <strong>귀찮은 마음에 그냥 개발을 시킨</strong> 결과가 항상 잘 해오던 작업을 갑자기 변경하는 결과를 만든 것 같았습니다.</p>

<p><br /></p>

<p><em>👨🏻‍💻: 지금까지 우리가 개발하면서 가져왔던 정책들을 CLAUDE.md 안에다 작성해줘. 이 프로젝트안에서만 동작할 수 있도록 설정해줘.</em></p>

<p><br /></p>

<p>작성된 <a href="https://github.com/wnjoon/go-yfinance/blob/main/CLAUDE.md">CLAUDE.md</a>는 아래의 내용을 포함합니다. go-yfinance에서 작업이 시작되면 자동으로 CLAUDE.md가 로드되고, 모든 개발지침이 자동으로 적용됩니다.</p>

<p><strong>프로젝트 정체성 및 참조 원칙</strong></p>

<ul>
  <li>목표: Python의 yfinance 라이브러리를 Go 언어로 포팅(이식)하는 프로젝트</li>
  <li>참조 원칙 (CRITICAL):
    <ul>
      <li>기능 구현 시 웹 검색을 하지 않고, 로컬에 위치한 Python yfinance 소스 코드를 직접 분석하여 참조</li>
      <li>메서드 이름, 파라미터, 반환 타입 등은 Python 버전과 일관성을 유지</li>
    </ul>
  </li>
</ul>

<p><strong>개발 워크플로우 (Workflow)</strong></p>

<ul>
  <li>새로운 기능을 개발할 때 다음 단계를 준수할 것
    <ul>
      <li>준비: <code class="language-plaintext highlighter-rouge">STATUS.md</code> 확인 및 <code class="language-plaintext highlighter-rouge">main</code> 브랜치 동기화</li>
      <li>개발:
        <ul>
          <li><code class="language-plaintext highlighter-rouge">phase{N}/{feature-name}</code> 브랜치 생성</li>
          <li>기존 코드 패턴(<code class="language-plaintext highlighter-rouge">pkg/ticker</code>, <code class="language-plaintext highlighter-rouge">pkg/models</code>) 준수</li>
          <li>반드시 유닛 테스트 작성</li>
        </ul>
      </li>
      <li>문서화: <code class="language-plaintext highlighter-rouge">doc.go</code> 파일들에 주석 추가하고 <code class="language-plaintext highlighter-rouge">STATUS.md</code> 업데이트</li>
    </ul>
  </li>
</ul>

<p><strong>API 일관성 (Consistency)</strong></p>

<ul>
  <li>Python yfinance와 Go go-yfinance 간의 메서드 매핑을 엄격히 관리
    <ul>
      <li>네이밍: Python의 snake_case를 Go의 PascalCase로 변환 (예: <code class="language-plaintext highlighter-rouge">major_holders</code> → <code class="language-plaintext highlighter-rouge">MajorHolders</code>)</li>
      <li>매핑 테이블: <code class="language-plaintext highlighter-rouge">InsiderRosterHolders</code>, <code class="language-plaintext highlighter-rouge">AnalystPriceTargets</code> 등 구체적으로 명시된 매핑 규칙 준수</li>
    </ul>
  </li>
</ul>

<p><strong>완료 체크리스트 (Definition of Done)</strong></p>

<ul>
  <li>main 브랜치에 병합하기 전 다음 과정을 수행
    <ul>
      <li>테스트(go test) 및 빌드(go build) 통과</li>
      <li>Python 버전과의 API 일치 여부 검증</li>
      <li>문서 생성: make docs 명령어를 실행하여 로컬에서 docs/API.md를 생성 및 검증 (CI/CD 의존 X)</li>
      <li>생성된 문서를 포함하여 커밋 및 푸시</li>
    </ul>
  </li>
</ul>

<p><strong>코드 스타일 및 도구</strong></p>

<ul>
  <li>주석: gomarkdoc 호환 주석 및 예제(Example) 포함</li>
  <li>하위 호환성: 메서드 이름 변경 시 Deprecated Alias를 유지하여 호환성 보장</li>
  <li>Makefile: build, test, docs, lint 명령어 사용</li>
</ul>

<p><strong>이슈 대응</strong></p>

<ul>
  <li>CycleTLS 패닉 처리 및 Git 환경변수 설정 관련 지침 포함</li>
</ul>

<h2 id="이제는-온전히-맡기기-하지만-간섭을-곁들인">이제는 온전히 맡기기, 하지만 간섭을 곁들인.</h2>

<p>CLAUDE.md까지 작성하고나서 Claude Code가 알아서 잘 만들어주고 있다고 생각했습니다. 하지만 이전처럼 ‘갑자기 Web에서 API를 조회하는 일’처럼, 물론 지침문서를 만들긴 했지만 계속해서 확인은 필요하다고 생각했습니다.</p>

<p><br /></p>

<p><img src="https://velog.velcdn.com/images/wnjoon/post/4a30789d-edb7-4193-bdb5-6c1a928ac4ec/image.png" alt="image" /></p>

<p><br /></p>

<p><a href="https://www.linkedin.com/in/wooing/">Kim Wooyeong</a>님이 작성하신 <a href="https://www.linkedin.com/posts/wooing_claude-code%EB%A5%BC-%EC%93%B8-%EB%95%8C%EB%8A%94-%EB%82%B4%EA%B0%80-%EC%97%84%EC%B2%AD-%EC%9E%90%EC%A3%BC-%EA%B0%9C%EC%9E%85%ED%95%B4%EC%A4%98%EC%95%BC-%ED%95%9C%EB%8B%A4-%EA%B0%9C%EC%9E%85%EC%9D%84-activity-7408090307247976449-sBPP?utm_source=share&amp;utm_medium=member_desktop&amp;rcm=ACoAACX_74kB5FHdEvU5kLzcald4RDFZSjBrrKA">포스트</a>애도 나와있듯이, Claude Code에 모든 지침을 적었다고 생각해서 모든것을 위임하면 안된다고 생각합니다. 계속 피드백을 주고, 추가적인 검증과 질문을 단계마다 진행했을 때 확실히 퀄리티가 올라가는 것을 느꼈습니다.</p>

<h3 id="go-함수명-규칙을-지켜야할까">Go 함수명 규칙을 지켜야할까?</h3>

<p>예를 들어, Phase7의 구현이 완료되었다고 한 Claude Code의 보고서에서 Python yfinance API 매핑 결과는 다음과 같았습니다.</p>

<table>
  <thead>
    <tr>
      <th>Python</th>
      <th>Go</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">yf.Tickers(symbols)</code></td>
      <td><code class="language-plaintext highlighter-rouge">multi.NewTickers(symbols)</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">tickers.tickers[symbol]</code></td>
      <td><code class="language-plaintext highlighter-rouge">tickers.Get(symbol)</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">tickers.history()</code></td>
      <td><code class="language-plaintext highlighter-rouge">tickers.History(params)</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">yf.download(symbols)</code></td>
      <td><code class="language-plaintext highlighter-rouge">multi.Download(symbols, params)</code></td>
    </tr>
  </tbody>
</table>

<p>이중 제가 의문이 생긴것은 <code class="language-plaintext highlighter-rouge">tickers.tickers[symbol]</code> -&gt; <code class="language-plaintext highlighter-rouge">tickers.Get(symbol)</code> 로 작성한 부분이었습니다. yfinance의 원칙을 그대로 준수할 것을 요청했는데, Claude Code는 Get이라는 이름으로 함수를 생성했습니다. 그래서 Claude Code에게 질문했습니다.</p>

<p><br /></p>

<p><em>👨🏻‍💻: yfinance의 함수명 규칙을 그대로 준수하고 싶은데, ticers.tickers[symbol] 부분을 tickers.Get(symbol)로 작성하는게 좋은 방법일까?</em></p>

<p><em>🤖: Go 구현에서는 Get(symbol) 메서드로 만들었는데, 이는 Go에서 더 관용적인 방식입니다. Python처럼 public 필드로 노출하려면 옵션 1인 tickers.Get(“AAPL”)을 사용해서 Go 스타일 메서드로 생성하는 현재 방식이나, 옵션 2인 tickers.Tickers[“AAPL”]를 사용해서 public map 필드로 노출하는 방식이 있습니다. Python API와 정확히 일치시키려면 Tickers 필드를 public으로 노출할 수 있습니다</em></p>

<p><br /></p>

<p>아마도 Go의 구현 철학을 만족하기 위한 방법으로 이렇게 함수를 만든 것이라고 예상은 했습니다. 하지만 처음에 이 라이브러리를 컨버팅하면서도 생각했지만, <strong>최대한 Python yfinance의 원칙을 그대로 준수하는 것이 중요하나, 언어의 특성상 어쩔 수 없이 다르게 구현해야할 경우가 분명 있을 수 있다</strong>고도 생각했습니다. 그래서 이미 다른 기능들도 이렇게 Go 스타일을 유지하고 있는지 질문했습니다. 만약 다른 메소드들이 yfinance의 원칙을 그대로 유지하고 있다면 이 부분을 같이 바꿔줘야겠지만, 다른 부분들도 Go 스타일을 만족하고 있다면 구현 방향은 일치하고 있다고 생각했습니다.</p>

<p>다음은 Phase7까지 개발된 모든 메소드들의 분석 결과입니다.</p>

<table>
  <thead>
    <tr>
      <th>Python yfinance</th>
      <th>Go go-yfinance</th>
      <th>일치 여부</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>Core</strong></td>
      <td>-</td>
      <td>-</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Ticker(symbol)</code></td>
      <td><code class="language-plaintext highlighter-rouge">ticker.New(symbol)</code></td>
      <td>✅ Go 스타일</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.ticker</code></td>
      <td><code class="language-plaintext highlighter-rouge">t.Symbol()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.history()</code></td>
      <td><code class="language-plaintext highlighter-rouge">t.History(params)</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.info</code></td>
      <td><code class="language-plaintext highlighter-rouge">t.Info()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.fast_info</code></td>
      <td><code class="language-plaintext highlighter-rouge">t.FastInfo()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><strong>Quote</strong></td>
      <td>-</td>
      <td>-</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.quote (내부)</code></td>
      <td><code class="language-plaintext highlighter-rouge">t.Quote()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><strong>Options</strong></td>
      <td>-</td>
      <td>-</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.options</code></td>
      <td><code class="language-plaintext highlighter-rouge">t.Options()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.option_chain(date)</code></td>
      <td><code class="language-plaintext highlighter-rouge">t.OptionChain(date)</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><strong>Financials</strong></td>
      <td>-</td>
      <td>-</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.get_income_stmt(freq)</code></td>
      <td><code class="language-plaintext highlighter-rouge">t.IncomeStatement(freq)</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.get_balance_sheet(freq)</code></td>
      <td><code class="language-plaintext highlighter-rouge">t.BalanceSheet(freq)</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.get_cashflow(freq)</code></td>
      <td><code class="language-plaintext highlighter-rouge">t.CashFlow(freq)</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><strong>Analysis</strong></td>
      <td>-</td>
      <td>-</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.get_recommendations()</code></td>
      <td><code class="language-plaintext highlighter-rouge">t.Recommendations()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.get_analyst_price_targets()</code></td>
      <td><code class="language-plaintext highlighter-rouge">t.AnalystPriceTargets()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.get_earnings_estimate()</code></td>
      <td><code class="language-plaintext highlighter-rouge">t.EarningsEstimate()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.get_revenue_estimate()</code></td>
      <td><code class="language-plaintext highlighter-rouge">t.RevenueEstimate()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.get_eps_trend()</code></td>
      <td><code class="language-plaintext highlighter-rouge">t.EPSTrend()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.get_eps_revisions()</code></td>
      <td><code class="language-plaintext highlighter-rouge">t.EPSRevisions()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.get_earnings_history()</code></td>
      <td><code class="language-plaintext highlighter-rouge">t.EarningsHistory()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.get_growth_estimates()</code></td>
      <td><code class="language-plaintext highlighter-rouge">t.GrowthEstimates()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><strong>Holders</strong></td>
      <td>-</td>
      <td>-</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.get_major_holders()</code></td>
      <td><code class="language-plaintext highlighter-rouge">t.MajorHolders()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.get_institutional_holders()</code></td>
      <td><code class="language-plaintext highlighter-rouge">t.InstitutionalHolders()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.get_mutualfund_holders()</code></td>
      <td><code class="language-plaintext highlighter-rouge">t.MutualFundHolders()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.get_insider_transactions()</code></td>
      <td><code class="language-plaintext highlighter-rouge">t.InsiderTransactions()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.get_insider_roster_holders()</code></td>
      <td><code class="language-plaintext highlighter-rouge">t.InsiderRosterHolders()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.get_insider_purchases()</code></td>
      <td><code class="language-plaintext highlighter-rouge">t.InsiderPurchases()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><strong>Calendar</strong></td>
      <td>-</td>
      <td>-</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.get_calendar()</code></td>
      <td><code class="language-plaintext highlighter-rouge">t.Calendar()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><strong>History</strong></td>
      <td>-</td>
      <td>-</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.dividends</code></td>
      <td><code class="language-plaintext highlighter-rouge">t.Dividends()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.splits</code></td>
      <td><code class="language-plaintext highlighter-rouge">t.Splits()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.actions</code></td>
      <td><code class="language-plaintext highlighter-rouge">t.Actions()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><strong>Multi-ticker</strong></td>
      <td>-</td>
      <td>-</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">yf.Tickers(symbols)</code></td>
      <td><code class="language-plaintext highlighter-rouge">multi.NewTickers(symbols)</code></td>
      <td>✅ Go 스타일</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">tickers.tickers[symbol]</code></td>
      <td><code class="language-plaintext highlighter-rouge">tickers.Get(symbol)</code></td>
      <td>✅ Go 스타일</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">tickers.history()</code></td>
      <td><code class="language-plaintext highlighter-rouge">tickers.History(params)</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">yf.download()</code></td>
      <td><code class="language-plaintext highlighter-rouge">multi.Download()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><strong>Search</strong></td>
      <td>-</td>
      <td>-</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">yf.Search(query)</code></td>
      <td><code class="language-plaintext highlighter-rouge">search.Search(query)</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><strong>Screener</strong></td>
      <td>-</td>
      <td>-</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">yf.Screener.get_screeners()</code></td>
      <td><code class="language-plaintext highlighter-rouge">screener.Screen()</code></td>
      <td>✅</td>
    </tr>
  </tbody>
</table>

<p>Phase 8-9에 있는 미구현된 함수들을 제외하면, 구현된 모든 내용이 일관성있게 매핑되어 있음을 확인할 수 있었습니다.</p>

<p>추가로 매 단계가 진행될때마다, (불필요할 수 있지만) 문서가 제대로 작성되었는지를 꼭 다시한번 확인했습니다. 사실 이건 제가 Claude Code에게 100% 업무를 위임하지 못한다는 것도 있지만, 또 한편으로는 관리자로써 당연히 작업된 내용을 확인하는 것은 의무라고 생각했기 때문입니다.</p>

<h3 id="패키지명이-달라도-괜찮을까">패키지명이 달라도 괜찮을까?</h3>

<p>Phase8을 구현하던 중, Websocket에 대한 패키지의 이름이 <code class="language-plaintext highlighter-rouge">live</code>로 구현되어 있었습니다. 그래서 python에서 <code class="language-plaintext highlighter-rouge">yf.WebSocket()</code>으로 호출되던 	부분이 Go에서는 <code class="language-plaintext highlighter-rouge">live.New()</code>로 변경되었는데, 이렇게 구현한 이유에 대해 물어보았습니다.</p>

<p><br /></p>

<p><em>👨🏻‍💻: Websocket과 관련된 패키지 이름을 live로 한 이유가 있을까?</em></p>

<p><br /></p>

<p>알고보니 Python yfinance의 파일명이 <code class="language-plaintext highlighter-rouge">live.py</code>이고, 클래스들도 <code class="language-plaintext highlighter-rouge">WebSocket</code>, <code class="language-plaintext highlighter-rouge">AsyncWebSocket</code>이 <code class="language-plaintext highlighter-rouge">live</code> 모듈에 있어서 동일하게 맞춰졌던 것 이었습니다.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Python yfinance
</span><span class="kn">from</span> <span class="nn">yfinance.live</span> <span class="kn">import</span> <span class="n">WebSocket</span>
</code></pre></div></div>

<p>stream, websocket, realtime 등 Claude Code가 차선책으로 제시한 이름들도 있었지만, Python과 동일하게 가져가는 것이 더 옳다고 판단했습니다. 그리고 실제로 Go에서 사용했을 때, Python yfinance와 일관성이 있어서 혼란없이 사용 가능하다고 생각했습니다.</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="s">"github.com/wnjoon/go-yfinance/pkg/live"</span>

<span class="n">ws</span><span class="p">,</span> <span class="n">_</span> <span class="o">:=</span> <span class="n">live</span><span class="o">.</span><span class="n">New</span><span class="p">()</span>
<span class="n">ws</span><span class="o">.</span><span class="n">Subscribe</span><span class="p">([]</span><span class="kt">string</span><span class="p">{</span><span class="s">"AAPL"</span><span class="p">})</span>
<span class="n">ws</span><span class="o">.</span><span class="n">Listen</span><span class="p">(</span><span class="n">handler</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="phase-6-9까지의-구현-결과">Phase 6-9까지의 구현 결과</h2>

<h3 id="phase-6-search--lookup">Phase 6: Search &amp; Lookup</h3>

<p><strong>코드 구현</strong></p>

<ul>
  <li>Search 패키지(<code class="language-plaintext highlighter-rouge">pkg/search/search.go</code>): Search, SearchWithParams, Quotes, News 메서드</li>
  <li>Screener 패키지(<code class="language-plaintext highlighter-rouge">pkg/screener/screener.go</code>): Screen, ScreenWithQuery, DayGainers, DayLosers, MostActives 메서드</li>
  <li>Models(<code class="language-plaintext highlighter-rouge">pkg/models/search.go</code>, <code class="language-plaintext highlighter-rouge">pkg/models/screener.go</code>): 모든 데이터 구조체</li>
</ul>

<p><strong>테스트</strong></p>

<ul>
  <li>모든 테스트 통과 (go test ./pkg/search/… ./pkg/screener/… -v)</li>
</ul>

<p><strong>문서</strong></p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">pkg/search/doc.go</code>, <code class="language-plaintext highlighter-rouge">pkg/screener/doc.go</code> - 패키지 문서</li>
  <li><code class="language-plaintext highlighter-rouge">pkg/models/doc.go</code> - Search/Screener 타입 추가</li>
  <li><code class="language-plaintext highlighter-rouge">STATUS.md</code> - Phase 6 완료 상태 업데이트</li>
  <li><code class="language-plaintext highlighter-rouge">docs/API.md</code> - make docs로 자동 생성 완료</li>
</ul>

<p><strong>Python yfinance API 일관성</strong></p>

<table>
  <thead>
    <tr>
      <th>Python yfinance</th>
      <th>Go 구현</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">yf.search(query)</code></td>
      <td><code class="language-plaintext highlighter-rouge">search.Search(query)</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Screener().set_predefined_body(name)</code></td>
      <td><code class="language-plaintext highlighter-rouge">screener.Screen(name, params)</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Screener().set_body(query)</code></td>
      <td><code class="language-plaintext highlighter-rouge">screener.ScreenWithQuery(query, params)</code></td>
    </tr>
    <tr>
      <td>쿼리 연산자 (EQ, GT, LT, AND, OR 등)</td>
      <td><code class="language-plaintext highlighter-rouge">models.OpEQ</code>, <code class="language-plaintext highlighter-rouge">models.OpGT</code> 등 동일</td>
    </tr>
    <tr>
      <td>Predefined screeners (day_gainers 등)</td>
      <td><code class="language-plaintext highlighter-rouge">models.ScreenerDayGainers</code> 등 동일</td>
    </tr>
  </tbody>
</table>

<h3 id="phase-7-multi-ticker--batch">Phase 7: Multi-ticker &amp; Batch</h3>

<p><strong>신규 파일</strong></p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">pkg/models/multi.go</code>: <code class="language-plaintext highlighter-rouge">DownloadParams</code>, <code class="language-plaintext highlighter-rouge">MultiTickerResult</code> 모델</li>
  <li><code class="language-plaintext highlighter-rouge">pkg/multi/multi.go</code>: <code class="language-plaintext highlighter-rouge">Tickers</code> 구조체, <code class="language-plaintext highlighter-rouge">Download</code> 함수</li>
  <li><code class="language-plaintext highlighter-rouge">pkg/multi/multi_test.go</code>: 유닛 테스트</li>
</ul>

<p><strong>주요 기능</strong></p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">multi.NewTickers(symbols)</code>: 심볼 슬라이스로 Tickers 생성</li>
  <li><code class="language-plaintext highlighter-rouge">multi.NewTickersFromString(str)</code>: 문자열로 Tickers 생성 (공백/쉼표 구분)</li>
  <li><code class="language-plaintext highlighter-rouge">tickers.Get(symbol)</code>: 개별 티커 접근</li>
  <li><code class="language-plaintext highlighter-rouge">tickers.History(params)</code>: 전체 티커 히스토리 다운로드</li>
  <li><code class="language-plaintext highlighter-rouge">multi.Download(symbols, params)</code>: 독립 함수로 배치 다운로드</li>
  <li>Worker pool 패턴으로 병렬 처리 지원 (Threads 파라미터)</li>
</ul>

<p><strong>Python yfinance API 매핑</strong></p>

<table>
  <thead>
    <tr>
      <th>Python	Go</th>
      <th> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">yf.Tickers(symbols)</code></td>
      <td><code class="language-plaintext highlighter-rouge">multi.NewTickers(symbols)</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">tickers.tickers[symbol]</code></td>
      <td><code class="language-plaintext highlighter-rouge">tickers.Get(symbol)</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">tickers.history()</code></td>
      <td><code class="language-plaintext highlighter-rouge">tickers.History(params)</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">yf.download(symbols)</code></td>
      <td><code class="language-plaintext highlighter-rouge">multi.Download(symbols, params)</code></td>
    </tr>
  </tbody>
</table>

<h3 id="phase-8-real-time-websocket">Phase 8: Real-time WebSocket</h3>

<p><strong>신규 파일</strong></p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">pkg/models/live.go</code>: <code class="language-plaintext highlighter-rouge">PricingData</code> 구조체 (33개 필드), <code class="language-plaintext highlighter-rouge">MarketState</code> 타입</li>
  <li><code class="language-plaintext highlighter-rouge">pkg/live/proto.go</code>: Protobuf 디코더 (Base64 + protobuf 파싱)</li>
  <li><code class="language-plaintext highlighter-rouge">pkg/live/websocket.go</code>: WebSocket 클라이언트</li>
  <li><code class="language-plaintext highlighter-rouge">pkg/live/doc.go</code>: 패키지 문서</li>
  <li><code class="language-plaintext highlighter-rouge">pkg/live/live_test.go</code>: 유닛 테스트</li>
</ul>

<p><strong>주요 기능</strong></p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">live.New()</code>: WebSocket 클라이언트 생성</li>
  <li><code class="language-plaintext highlighter-rouge">ws.Subscribe(symbols)</code>: 심볼 구독</li>
  <li><code class="language-plaintext highlighter-rouge">ws.Unsubscribe(symbols)</code>: 구독 해제</li>
  <li><code class="language-plaintext highlighter-rouge">ws.Listen(handler)</code>: 블로킹 리스닝</li>
  <li><code class="language-plaintext highlighter-rouge">ws.ListenAsync(handler)</code>: 비동기 리스닝</li>
  <li><code class="language-plaintext highlighter-rouge">ws.Close()</code>: 연결 종료</li>
  <li>자동 heartbeat (15초마다 재구독)</li>
  <li>자동 재연결</li>
</ul>

<p><strong>Python yfinance API 매핑</strong></p>

<table>
  <thead>
    <tr>
      <th>Python</th>
      <th>Go</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">yf.WebSocket()</code></td>
      <td><code class="language-plaintext highlighter-rouge">live.New()</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ws.subscribe(symbols)</code></td>
      <td><code class="language-plaintext highlighter-rouge">ws.Subscribe(symbols)</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ws.listen(handler)</code></td>
      <td><code class="language-plaintext highlighter-rouge">ws.Listen(handler)</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ws.close()</code></td>
      <td><code class="language-plaintext highlighter-rouge">ws.Close()</code></td>
    </tr>
  </tbody>
</table>

<h3 id="phase-9-python-yfinance-advanced-features">Phase 9: Python yfinance Advanced Features</h3>

<p><strong>추가된 기능</strong></p>

<ul>
  <li>News Feed (<code class="language-plaintext highlighter-rouge">pkg/ticker/news.go</code>)
    <ul>
      <li><code class="language-plaintext highlighter-rouge">ticker.News(count, tab)</code>: 뉴스 기사 조회</li>
      <li><code class="language-plaintext highlighter-rouge">ticker.GetNews()</code>: 기본 파라미터로 뉴스 조회</li>
      <li>광고 필터링 포함</li>
    </ul>
  </li>
  <li>Cache Layer (<code class="language-plaintext highlighter-rouge">pkg/cache/cache.go</code>)
    <ul>
      <li>Thread-safe TTL 기반 인메모리 캐시</li>
      <li>자동 만료 항목 정리</li>
      <li>글로벌 캐시 인스턴스</li>
    </ul>
  </li>
  <li>Timezone Utilities (<code class="language-plaintext highlighter-rouge">pkg/utils/timezone.go</code>)
    <ul>
      <li>50+ 글로벌 거래소 시간대 매핑</li>
      <li><code class="language-plaintext highlighter-rouge">GetTimezone()</code>, <code class="language-plaintext highlighter-rouge">IsValidTimezone()</code>, <code class="language-plaintext highlighter-rouge">ConvertToTimezone()</code></li>
      <li><code class="language-plaintext highlighter-rouge">MarketIsOpen()</code>: 기본 시장 시간 체크</li>
    </ul>
  </li>
</ul>

<h2 id="정리">정리</h2>

<p>이렇게 yfinance를 분석해서 Claude Code에게 동일한 기능을 갖는 Go 라이브러리 제작을 요청해보았습니다. 기간으로 보면 약 3일정도 걸렸는데, 실제로 작업한 시간으로 보면 대략 6-7시간 정도 걸렸습니다. 아마 CLAUDE.md를 더욱 꼼꼼하게 작성했거나, 중복된 검증을 계속해서 요청하지 않았더라면 훨씬 빠르게 작업할 수 있었을 것 같습니다.</p>

<p>처음에는 <a href="https://nomadcoders.co/ai-agents-masterclass?gad_source=1&amp;gad_campaignid=18141167485&amp;gbraid=0AAAAACQEcGgB28vYn3MvB7rhLJ-guDeaI&amp;gclid=Cj0KCQiA6Y7KBhCkARIsAOxhqtM01uDU_sqgVSqN3XMhxFpk9dDyzL1A6kZ0a1GY_Y7gsTcbOAwz8gIaAtf1EALw_wcB">강의</a>에서 진행하는 <strong>투자 전략 에이전트</strong>를 만들다가 Go로 된 yfinance 라이브러리가 없어서 시작한 사이드 프로젝트였습니다. 그냥 Python 공부한다고 생각하고 강의를 그대로 따라갔어도 되었을텐데, Google ADK에서 Go를 지원하는데 굳이 Go를 사용해보지 않을 이유가 있나 하고 생각하고 시작한게 여기까지 왔네요.</p>

<p>물론 오픈소스의 아이디어와 로직을 차용했지만, 혹시 몰라 <a href="https://github.com/ranaroussi/yfinance/discussions/2647#discussioncomment-15310537">ranaroussi/yfinance의 Discussion</a>란에 아래와 같이 문의를 남겨놓았습니다.</p>

<p><br /></p>

<p><img src="https://velog.velcdn.com/images/wnjoon/post/e6f0189a-828a-4679-8a8f-943b27067274/image.png" alt="image" /></p>

<p><br /></p>

<p>Gemini에게 혹시나 하는 궁금증에 질문을 좀 해봤습니다.</p>

<p><br /></p>

<p><em>👨🏻‍💻: Python에서 사용하는 yfinance의 로직과 구조를 참조해서 Go에서 사용 가능한 라이브러리를 한번 만들어봤어. yfinance가 오픈소스이긴 하지만, 혹시 이렇게 구현해서 라이브러리로 만들어도 괜찮을지 메일을 보냈는데 아직 답장이 없네. 혹시 이런 경우에 문제가 되는 경우가 있을까?</em></p>

<p><br /></p>

<p>Gemini의 답변을 정리해보면 다음과 같습니다.</p>

<ul>
  <li>yfinance는 현재 Apache License 2.0 (또는 프로젝트 버전에 따라 MIT 등)과 같은 퍼미시브(Permissive) 라이선스를 따르고 있을 확률이 높습니다. 파이썬 코드를 Go로 변환하는 것은 일종의 <strong>포팅</strong>입니다. 오픈소스 라이선스는 대부분 코드를 수정, 배포, 다른 언어로의 이식을 허용합니다.</li>
  <li>Yahoo Finance에서 데이터를 가져오는 로직이나 함수 구조 자체는 저작권 보호 대상인 ‘표현’ 이라기보다는 ‘아이디어’나 ‘기능’에 가깝습니다. 따라서 파이썬 코드를 그대로 복사+붙여넣기 한 것이 아니라, Go 언어의 특성에 맞게 재구현(Re-implementation) 했다면 코드 저작권 침해 가능성은 낮습니다.</li>
  <li>원작자를 존중하고 라이선스 규정을 지키기 위해, 깃허브 README 등에 <strong>이 프로젝트는 Python의 yfinance 라이브러리에서 영감을 받아 제작되었습니다(Inspired by yfinance)</strong> 라고 명시하고 원본 링크를 거는 것이 관례이자 안전한 방법입니다.</li>
  <li>Yahoo Finance는 현재 공식적으로 무료 API를 제공하지 않습니다. yfinance나 사용자가 만든 Go 라이브러리는 웹 페이지를 크롤링하거나 비공식 내부 API 엔드포인트를 호출하는 방식을 사용할 것입니다. 단, Yahoo의 이용 약관은 일반적으로 자동화된 데이터 수집(스크래핑)을 금지합니다.</li>
  <li>Yahoo 측에서 언제든 IP를 차단하거나 구조를 변경할 수 있으며, 만약 이를 상업적으로 이용하거나 과도한 트래픽을 유발하면 법적 제재를 받을 소지가 있습니다.</li>
</ul>

<p>그리고 최종적으로 README.md에 ranaroussi/yfinance의 로직을 참조하여 Go로 구현한 비공식(Unofficial) 라이브러리입니다”라고 명확히 적고, Yahoo Finance의 공식 API가 아니며, 언제든 데이터 수집이 막힐 수 있다”는 점을 고지할 것을 제안했습니다.</p>

<p>그래서 README.md에 아래와 같은 내용을 추가하기로 했습니다.</p>

<div class="language-md highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gu">## Credits</span>

This project is a Go implementation inspired by the Python library <span class="p">[</span><span class="nv">yfinance</span><span class="p">](</span><span class="sx">https://github.com/ranaroussi/yfinance</span><span class="p">)</span>.
Special thanks to <span class="p">[</span><span class="nv">Ran Aroussi</span><span class="p">](</span><span class="sx">https://github.com/ranaroussi</span><span class="p">)</span> and all contributors of the original project for their excellent work.

...

<span class="gu">## Disclaimer</span>
<span class="gt">
&gt; **Please read this carefully before using this library.**</span>
<span class="p">
1.</span> <span class="gs">**Unofficial API**</span>: This library is <span class="gs">**not affiliated with, endorsed by, or connected to Yahoo! Finance**</span>. It wraps unofficial API endpoints intended for web browser consumption.
<span class="p">
2.</span> <span class="gs">**Terms of Service**</span>: Use of this library must comply with <span class="p">[</span><span class="nv">Yahoo!'s Terms of Service</span><span class="p">](</span><span class="sx">https://policies.yahoo.com/us/en/yahoo/terms/index.htm</span><span class="p">)</span>. Users are solely responsible for ensuring their usage is compliant.
<span class="p">
3.</span> <span class="gs">**Risk of Blocking**</span>: Since this library relies on unofficial methods, Yahoo! Finance may change their API structure or block IP addresses making excessive requests at any time without notice.
<span class="p">
4.</span> <span class="gs">**No Warranty**</span>: This software is provided "as is", without warranty of any kind, express or implied. The authors shall not be held liable for any damages or legal issues arising from the use of this software.
</code></pre></div></div>

<p>이제 다음에는 실제로 go 라이브러리에 등록해보려고 합니다. 이부분도 한번 Claude Code에게 맡겨볼 생각입니다.</p>]]></content><author><name>Wonjoon</name></author><category term="dev" /><category term="go-yfinance" /><summary type="html"><![CDATA[Claude Code를 활용해서 python 버전의 yfinance 라이브러리를 기반으로 go 버전의 yahoo finance 라이브러리를 만들어가는 이야기를 담은 여섯번째 포스팅입니다.]]></summary></entry><entry xml:lang="en"><title type="html">Building a Go Yahoo Finance Library with Claude Code #7</title><link href="http://localhost:4000/2025/12/20/go-yfinance-6-en/" rel="alternate" type="text/html" title="Building a Go Yahoo Finance Library with Claude Code #7" /><published>2025-12-20T00:00:00+09:00</published><updated>2025-12-20T00:00:00+09:00</updated><id>http://localhost:4000/2025/12/20/go-yfinance-6-en</id><content type="html" xml:base="http://localhost:4000/2025/12/20/go-yfinance-6-en/"><![CDATA[<h2 id="conversation-with-the-maintainer">Conversation with the Maintainer</h2>

<p>From the very beginning of this side project, I mentioned in the Discussions tab of the Python yfinance repository that I was implementing a Go-based yfinance by referencing their repository. One of the maintainers responded to my inquiry, leading to an exchange of ideas.</p>

<p><br /></p>

<p><img src="https://velog.velcdn.com/images/wnjoon/post/20569d0b-92cd-44b5-9d6f-83817238fdcf/image.png" alt="image" /></p>

<p><br /></p>

<p>Honestly, since they are using the APACHE 2.0 license, referencing the logic or implementation methods used in that repository isn’t an issue. However, I believed it was proper etiquette to inform the original author that I was developing a new program based on their work.</p>

<p>The first question the maintainer asked was why I needed to develop it in a new language when the well-written Python version already exists. They suggested that it might be easier to just develop a wrapper that receives the Pandas DataFrame returned by Python and converts it into a Go-based structure.</p>

<p>In fact, many developers use it this way. However, to do this, despite it being a Go program, one would need to set up a Python environment and build a separate server to call the library. I thought there would definitely be overhead associated with this, and although I didn’t write it in my reply, I believed I could solve this more easily than expected using Claude Code.</p>

<p>Transforming Python yfinance into Go was naturally a process of a “Rewrite,” not a direct copy-paste “Port.” While I referenced the URLs, parameters, and crumb handling logic, I completely changed the code structure to follow the Go style.</p>

<p>I replied with this content in the Discussion and included additional information expressing gratitude to the original author in the <a href="https://github.com/wnjoon/go-yfinance/blob/main/README.md#legal--license">README.md</a>.</p>

<div class="language-md highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gu">## Legal &amp; License</span>

<span class="gs">**go-yfinance**</span> is distributed under the <span class="gs">**Apache Software License 2.0**</span>. See the <span class="sb">`LICENSE`</span> file in the repository for details.

<span class="gu">### Disclaimer</span>
<span class="gt">
&gt; **Please read this carefully before using this library.**</span>
<span class="p">
1.</span>  <span class="gs">**Unofficial API**</span>: This library is <span class="gs">**not affiliated with, endorsed by, or connected to Yahoo! Finance**</span>. It wraps unofficial API endpoints intended for web browser consumption.
<span class="p">
2.</span>  <span class="gs">**Research &amp; Educational Use**</span>: This library is intended for <span class="gs">**research and educational purposes**</span>.
<span class="p">
3.</span>  <span class="gs">**Terms of Service**</span>: Use of this library must comply with <span class="p">[</span><span class="nv">Yahoo!'s Terms of Service</span><span class="p">](</span><span class="sx">https://policies.yahoo.com/us/en/yahoo/terms/index.htm</span><span class="p">)</span>. Users are solely responsible for ensuring their usage is compliant.
<span class="p">
4.</span>  <span class="gs">**Risk of Blocking**</span>: Since this library relies on unofficial methods, Yahoo! Finance may change their API structure or block IP addresses making excessive requests at any time without notice.
<span class="p">
5.</span>  <span class="gs">**No Warranty**</span>: This software is provided "as is", without warranty of any kind, express or implied. The authors shall not be held liable for any damages or legal issues arising from the use of this software.

<span class="gu">### Credits</span>

This project is a Go implementation based on the logic of <span class="p">[</span><span class="nv">yfinance</span><span class="p">](</span><span class="sx">https://github.com/ranaroussi/yfinance</span><span class="p">)</span>. Special thanks to <span class="gs">**Ran Aroussi**</span> and all contributors of the original project for their excellent work.
</code></pre></div></div>

<h2 id="registering-additional-information">Registering Additional Information</h2>

<p>First, I added badges providing additional information about the current repository at the top of the <a href="https://github.com/wnjoon/go-yfinance/blob/main/README.md#legal--license">README.md</a>.</p>

<ul>
  <li><strong>Go Reference:</strong> Links directly to the <code class="language-plaintext highlighter-rouge">pkg.go.dev</code> documentation.</li>
  <li><strong>Go Report Card:</strong> Shows code quality score.</li>
  <li><strong>License:</strong> Indicates that it uses the Apache 2.0 license.</li>
</ul>

<h3 id="go-report-card">Go Report Card</h3>

<p>Go Report Card is a feature that displays the compliance percentage for the current repository regarding checks like <code class="language-plaintext highlighter-rouge">go_vet</code>, <code class="language-plaintext highlighter-rouge">gofmt</code>, <code class="language-plaintext highlighter-rouge">gocyclo</code>, <code class="language-plaintext highlighter-rouge">ineffassign</code>, <code class="language-plaintext highlighter-rouge">license</code>, and <code class="language-plaintext highlighter-rouge">misspell</code>.</p>

<p>Basically, I use <code class="language-plaintext highlighter-rouge">golangci-lint</code> to always check code quality. However, while writing the final Phases, some checks were missed, so I initially received a score of 80%. I asked Claude Code to check the linting again, reflected all the changes, and merged them into main.</p>

<p><br /></p>

<p><img src="https://velog.velcdn.com/images/wnjoon/post/8b7aa1bd-b4c1-4bbf-be68-800d11ff877b/image.png" alt="image" /></p>

<p><br /></p>

<p>In the case of <code class="language-plaintext highlighter-rouge">gocyclo</code>, the score is currently at 92%, with most issues stemming from function complexity.</p>

<p>About 8 functions exceeded the complexity threshold (15). These functions contain logic for parsing external data (JSON, Protobuf), so they inevitably include numerous <code class="language-plaintext highlighter-rouge">if</code> or <code class="language-plaintext highlighter-rouge">switch</code> statements to extract fields. Forcing this logic to be broken down into numerous helper functions seemed likely to increase the probability of introducing bugs and, moreover, appeared to require a significant amount of time to resolve.</p>

<p>Since there were no functional issues other than the score, I planned to improve this part incrementally in the future.</p>

<h2 id="generating-static-documentation-using-mkdocs">Generating Static Documentation Using MkDocs</h2>

<p>In the <a href="https://wnjoon.github.io/2025/12/19/go-yfinance-2/">previous post</a>, I mentioned that I planned to create documentation for each method and convert it into a static page. So, I used MkDocs to convert the <a href="https://github.com/wnjoon/go-yfinance/blob/main/docs/API.md">API documentation</a> into a static page.</p>

<p>To do this, I first created a <a href="https://github.com/wnjoon/go-yfinance/blob/main/mkdocs.yml">mkdocs.yml</a> file in the same path as <code class="language-plaintext highlighter-rouge">go.mod</code>. At the very top, I wrote the repository URL and the URL where the static page would be displayed. When using GitHub Pages, the static page URL typically takes the form <code class="language-plaintext highlighter-rouge">https://&lt;username&gt;.github.io/&lt;repository&gt;</code>.</p>

<p>I configured the theme to support both light and dark modes. You can change the theme by clicking the gear icon next to the Search bar at the top.</p>

<p><img src="https://velog.velcdn.com/images/wnjoon/post/1fd2c953-d6e6-4025-8947-ee4d6055f79b/image.png" alt="image" /></p>

<p>I also added commands to the <a href="https://github.com/wnjoon/go-yfinance/blob/main/Makefile">Makefile</a> to test and build the static webpage based on the documentation files.</p>

<div class="language-makefile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">$(MKDOCS)</span><span class="o">:</span>
  <span class="err">python3</span> <span class="err">-m</span> <span class="err">venv</span> <span class="err">$(VENV)</span>
  <span class="err">$(PIP)</span> <span class="err">install</span> <span class="err">--upgrade</span> <span class="err">pip</span>
  <span class="err">$(PIP)</span> <span class="err">install</span> <span class="err">mkdocs-material</span>

<span class="c"># Serve documentation locally (http://localhost:8000)
</span><span class="nl">docs-serve</span><span class="o">:</span> <span class="nf">$(MKDOCS)</span>
  <span class="err">$(MKDOCS)</span> <span class="err">serve</span>

<span class="c"># Build documentation site
</span><span class="nl">docs-build</span><span class="o">:</span> <span class="nf">$(MKDOCS)</span>
  <span class="err">$(MKDOCS)</span> <span class="err">build</span>
</code></pre></div></div>

<p>Finally, I modified the <a href="https://github.com/wnjoon/go-yfinance/blob/main/.github/workflows/docs.yml">docs.yml</a> file so that when the repository is merged into main, GitHub Actions automatically builds and deploys the latest version of the website.</p>

<p>The currently deployed static webpage can be found at <strong><a href="https://wnjoon.github.io/go-yfinance/">https://wnjoon.github.io/go-yfinance/</a></strong>.</p>

<h2 id="deploying-to-pkggodev">Deploying to pkg.go.dev</h2>

<p>Deploying the generated library to pkg.go.dev is incredibly easy. You only need to go through three steps:</p>

<ol>
  <li>Record changes in <code class="language-plaintext highlighter-rouge">README.md</code>.</li>
  <li>Tag a new version and push it.
    <ul>
      <li><code class="language-plaintext highlighter-rouge">git tag v0.1.0</code></li>
      <li><code class="language-plaintext highlighter-rouge">git push origin v0.1.0</code></li>
    </ul>
  </li>
  <li>Access “https://pkg.go.dev/github.com/wnjoon/go-yfinance@v0.1.0” in a web browser and click the <strong>Request</strong> button.</li>
</ol>

<p>It seems to have been registered on pkg.go.dev within about 5 minutes.</p>

<h2 id="future-development-plans">Future Development Plans</h2>

<p>With development wrapped up, I organized the overall directory structure.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>yfinance-main
ㄴ python-yfinance (ranaroussi/yfinance)
ㄴ go-yfinance
ㄴ .claude
ㄴ ...
</code></pre></div></div>

<p>I plan to proceed with development in the following stages:</p>

<ul>
  <li>When a new release comes out in <code class="language-plaintext highlighter-rouge">python-yfinance</code>, analyze it using Claude Code.</li>
  <li>Identify what is different compared to the current version of <code class="language-plaintext highlighter-rouge">go-yfinance</code>.</li>
  <li>Check where the changes occurred and if functional updates are needed.</li>
  <li>Update the relevant parts and deploy a new release.</li>
</ul>

<h2 id="reflections">Reflections</h2>

<p>Actually, while developing <code class="language-plaintext highlighter-rouge">go-yfinance</code>, I thought a lot about what capabilities developers like myself need to cultivate in the future. Last year, when I was doing a side job, I received a lot of help from ChatGPT and Windsurf when applying Kubernetes, which I had never used in practice. Even though it wasn’t a very complex task and was mostly infrastructure work with defined rules, I sometimes struggled quite a bit because the AI provided off-the-mark answers and solutions.</p>

<p>It has barely been a year since then, but development using Claude Code is truly amazing. Not only for rote coding tasks, but even for complex tasks that initially require time for clear understanding and design, I could see it understanding incredibly quickly and developing much faster and more accurately than I expected. In a way, I thought that depending on the capability of the person giving instructions, the AI might understand much faster and more accurately than a human could.</p>

<p>Recently, someone working in the US mentioned, “When you go to San Francisco, there are so many job boards, and they are hiring AI Agent or Web3 related developers aggressively.” I believe that in the future, all developers must become AI Agent developers. Just as languages like Java, Python, and Go are like addition and subtraction, I think AI Agent development will become a standardized skill, like using a calculator. Beyond just being good at asking questions to AI tools like ChatGPT, Gemini, and Perplexity, this was a time where I felt I must now focus on developing programs that create value by utilizing LLMs.</p>]]></content><author><name>Wonjoon</name></author><category term="dev" /><category term="go-yfinance" /><summary type="html"><![CDATA[The seventh post covering the story of building a Go version of the yahoo finance library based on the Python yfinance library using Claude Code.]]></summary></entry><entry xml:lang="ko"><title type="html">Claude Code로 Go의 Yahoo Finance 라이브러리 만들기 #5</title><link href="http://localhost:4000/2025/12/20/go-yfinance-4/" rel="alternate" type="text/html" title="Claude Code로 Go의 Yahoo Finance 라이브러리 만들기 #5" /><published>2025-12-20T00:00:00+09:00</published><updated>2025-12-20T00:00:00+09:00</updated><id>http://localhost:4000/2025/12/20/go-yfinance-4</id><content type="html" xml:base="http://localhost:4000/2025/12/20/go-yfinance-4/"><![CDATA[<h2 id="남은-개발-범위-확인하기">남은 개발 범위 확인하기</h2>

<p>Claude Code와 Gemini를 이용한 분석에 의하면, 현재까지 진행된 범위(~Phase 4)까지면 실용적으로 사용 가능한 기능은 모두 구현되어있는 상태입니다. 이제 남은 부분은 yfinance가 제공하고 있는 남은 기능들을 구현하는 일입니다.</p>

<p>대략 5개의 추가 Phase가 남았는데요, 각 단계별로 어떤 작업이 진행될지 먼저 정리해보았습니다.</p>

<h3 id="phase-5-holdings--actions-난이도-">Phase 5: Holdings &amp; Actions (난이도: ★★☆☆☆)</h3>

<p>기존 quoteSummary API 패턴을 그대로 활용하므로 난이도가 낮을 것으로 예상되었습니다.</p>

<table>
  <thead>
    <tr>
      <th>메소드</th>
      <th>설명</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">MajorHolders()</code></td>
      <td>보유자 비율 분석</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">InstitutionalHolders()</code></td>
      <td>기관 투자자 목록</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">MutualFundHolders()</code></td>
      <td>뮤추얼 펀드 목록</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">InsiderTransactions()</code></td>
      <td>내부자 거래 내역</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">InsiderRoster()</code></td>
      <td>내부자 명단</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Calendar()</code></td>
      <td>배당일, 실적발표일 등</td>
    </tr>
  </tbody>
</table>

<h3 id="phase-6-search--lookup-난이도-">Phase 6: Search &amp; Lookup (난이도: ★★☆☆☆)</h3>

<p>새로운 패키지로 독립적 구현 가능했고, 다양한 지원 타입(equity, mutualfund, etf, index, future, currency, cryptocurrency)이 이미 구현되어 있었습니다.</p>

<table>
  <thead>
    <tr>
      <th>기능</th>
      <th>API Endpoint</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Search</td>
      <td>/v1/finance/search</td>
    </tr>
    <tr>
      <td>Lookup</td>
      <td>/v1/finance/lookup</td>
    </tr>
  </tbody>
</table>

<h3 id="phase-7-multi-ticker--batch-난이도-">Phase 7: Multi-ticker &amp; Batch (난이도: ★★★☆☆)</h3>

<p>Go의 goroutine을 활용한 병렬 처리가 필요한 부분입니다.</p>

<h3 id="phase-8-real-time-websocket-난이도-">Phase 8: Real-time WebSocket (난이도: ★★★★☆)</h3>

<p>가장 복잡한 단계로 예상되며, WebSocket + Protobuf 디코딩이 필요합니다.</p>

<ul>
  <li>Endpoint: wss://streamer.finance.yahoo.com/?version=2</li>
  <li>메시지 포맷: Base64 인코딩된 Protobuf</li>
  <li>실시간 가격, 거래량, 호가 등 스트리밍</li>
</ul>

<h3 id="phase-9-advanced-features-난이도-">Phase 9: Advanced Features (난이도: ★★★☆☆)</h3>

<p>점진적으로 구현할 부가 기능들입니다. 아마 가장 중요도는 낮아 보였습니다.</p>

<table>
  <thead>
    <tr>
      <th>기능</th>
      <th>설명</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Caching</td>
      <td>메모리/파일 캐시 (SQLite)</td>
    </tr>
    <tr>
      <td>Price Repair</td>
      <td>100x 환율 오류, 스플릿 미반영 보정</td>
    </tr>
    <tr>
      <td>Timezone</td>
      <td>거래소별 타임존 처리</td>
    </tr>
    <tr>
      <td>Market Calendar</td>
      <td>휴장일, 반장일 관리</td>
    </tr>
    <tr>
      <td>News</td>
      <td>종목별 뉴스 피드</td>
    </tr>
  </tbody>
</table>

<h2 id="holdings--actions-구현하기">Holdings &amp; Actions 구현하기</h2>

<p>아래와 같이 구현 계획을 수립하고, 이전까지와 동일한 방식으로 Phase 5 개발 작업을 요청했습니다.</p>

<ul>
  <li>Create phase5/holdings branch from main</li>
  <li>Implement holder models (pkg/models/holders.go)</li>
  <li>Implement calendar model (pkg/models/calendar.go)</li>
  <li>Implement holders methods (pkg/ticker/holders.go)</li>
  <li>Implement calendar method (pkg/ticker/calendar.go)</li>
  <li>Write tests for holders and calendar</li>
  <li>Update documentation (doc.go files)</li>
  <li>Merge to main and update STATUS.md</li>
</ul>

<p>다른건 다 잘 진행되었는데, 중간에 마음을 찜찜하게 만드는 로그가 있었습니다.</p>

<p><br /></p>

<p><em>🤖: 문서 생성에 문제가 있지만, CI/CD가 설정되어 있으므로 push하면 자동으로 생성될 것입니다. Phase 5 작업을 완료 처리하고..”</em></p>

<p><br /></p>

<h2 id="yfinance와의-불일치성이-여전히-존재한다">yfinance와의 불일치성이 여전히 존재한다</h2>

<p>문서의 생성에 문제가 생겼다는 말에 Claude Code가 말하지 않은 잘못된 부분이 존재하지 않을지 생각해보았습니다. 가장 큰 부분은 yfinance 라이브러리의 메소드와의 불일치입니다. 이미 이전 <a href="https://wnjoon.github.io/2025/12/19/go-yfinance-2/">포스팅</a>에서 확인했지만, 향후의 작업에서도 동일하게 이 문제가 발생하지 않을것이라 장담하지 못했습니다.</p>

<p>사실 이러한 공통적인 개발 내용은 별도의 문서에 작성하고, 이 문서를 모든 개발 단계마다 참조하도록 설정합니다. 저는 하나의 세션에서 계속 작업을 진행하고 있었고, Claude Code가 어느정도의 기억까지 이어서 개발할지 조금 궁금하긴 했습니다. 솔직히 말씀드리면, 귀찮은 마음에 그냥 개발을 시킨 제 잘못도 있었습니다 😅</p>

<p><br /></p>

<p><em>👨🏻‍💻: Phase5에 작성된 내용들이 yfinance(파이썬)의 해당 메소드의 형식(인풋, 아웃풋, 함수명 등)과 동일한지 확인해줘. 앞으로 다음 Phase 작업할때마다 항상 이 부분을 확인해줘. 물론 언어의 특성상 다를수밖에 없는 부분은 무시해도 좋아.</em></p>

<p><br /></p>

<table>
  <thead>
    <tr>
      <th>Python	go-yfinance	상태</th>
      <th> </th>
      <th> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">major_holders</code></td>
      <td><code class="language-plaintext highlighter-rouge">MajorHolders()</code></td>
      <td>✅ OK (언어 컨벤션 차이)</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">institutional_holders</code></td>
      <td><code class="language-plaintext highlighter-rouge">InstitutionalHolders()</code></td>
      <td>✅ OK</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">mutualfund_holders</code></td>
      <td><code class="language-plaintext highlighter-rouge">MutualFundHolders()</code></td>
      <td>✅ OK</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">insider_purchases</code></td>
      <td><code class="language-plaintext highlighter-rouge">InsiderPurchases()</code></td>
      <td>✅ OK</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">insider_transactions</code></td>
      <td><code class="language-plaintext highlighter-rouge">InsiderTransactions()</code></td>
      <td>✅ OK</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">insider_roster_holders</code></td>
      <td><code class="language-plaintext highlighter-rouge">InsiderRoster()</code></td>
      <td>⚠️ 수정 필요</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">calendar</code></td>
      <td><code class="language-plaintext highlighter-rouge">Calendar()</code></td>
      <td>✅ OK</td>
    </tr>
  </tbody>
</table>

<p>수정이 필요(<code class="language-plaintext highlighter-rouge">InsiderRoster()</code> → <code class="language-plaintext highlighter-rouge">InsiderRosterHolders()</code>)한 부분이 있었습니다. yfinance의 함수명을 꼭 그대로 유지해달라는 요청을 하지 않았더니, 이렇게 불필요한 작업이 한번 더 발생했네요. 앞으로의 단계에서는 이 부분을 꼭 명시해야겠다고 생각했습니다.</p>

<h2 id="문서-생성-방식-변경">문서 생성 방식 변경</h2>

<p>이제 본 문제로 돌아가서, 문서 생성에 문제가 발생했지만 어차피 github action에서 문서를 작성하기 때문에 완료한다는 문구가 좀 찜찜하게 느껴졌습니다. 왜냐하면 문서가 정확하게 생성되었는지 개발단계에서 확인할 수 없었기 떄문입니다.</p>

<p><br /></p>

<p><em>👨🏻‍💻: 문서 생성에 문제가 있다고 했는데, 이 부분이 자동으로 생성된게 맞는지 확인해줘.</em></p>

<p><br /></p>

<p>분석 결과는 예상대로 <em>현재 로컬 커밋들이 아직 remote에 push되지 않았고, CI/CD는 main에 push될 때 자동으로 docs/API.md 생성</em>되기 떄문에, 현재 확인하기 어렵다고 했습니다.</p>

<p>이전 <a href="https://wnjoon.github.io/2025/12/19/go-yfinance-3/">포스팅</a>에서 gomarkdoc을 이용해서 문서를 만드는 시점을 github action에 정의해서, main으로 push할때마다 자동으로 생성되도록 했었습니다. 그런데 실제로 진행하다보니 문제가 좀 있더라구요. 우선 문서의 권한을 github에 맡겨버리니, 문서가 제대로 생성되었는지 확인하려면 다시 main에서 pull을 받아야 했습니다.</p>

<p><br /></p>

<p><em>👨🏻‍💻: 생각해보니까 Github Action으로 문서를 만들게되면, 그 문서가 정상적으로 생성되었는지 확인하는게 쉽지 않을것 같아. 차라리 로컬에서 문서를 모두 만들고 검증한다음 github action에서는 이 동작을 수행하지 않는건 어떻게 생각해?</em></p>

<p><br /></p>

<p>Claude Code와의 대화를 통해 문서 생성 방식을 아래와 같이 변경하기로 했습니다.</p>

<ul>
  <li>GitHub Actions: 문서 생성 제거 (빌드/테스트만 유지)</li>
  <li>pre-commit hook: 사용 안 함</li>
  <li>Makefile: make docs 명령어 추가</li>
  <li>수동 실행: Phase 완료 시 make docs 실행 후 커밋</li>
</ul>

<p>결국 자동화가 아닌 일반적으로 사용되는 방식으로 돌아가기로 했습니다.</p>]]></content><author><name>Wonjoon</name></author><category term="dev" /><category term="go-yfinance" /><summary type="html"><![CDATA[Claude Code를 활용해서 python 버전의 yfinance 라이브러리를 기반으로 go 버전의 yahoo finance 라이브러리를 만들어가는 이야기를 담은 다섯번째 포스팅입니다.]]></summary></entry><entry xml:lang="en"><title type="html">Building a Go Yahoo Finance Library with Claude Code #5</title><link href="http://localhost:4000/2025/12/20/go-yfinance-4-en/" rel="alternate" type="text/html" title="Building a Go Yahoo Finance Library with Claude Code #5" /><published>2025-12-20T00:00:00+09:00</published><updated>2025-12-20T00:00:00+09:00</updated><id>http://localhost:4000/2025/12/20/go-yfinance-4-en</id><content type="html" xml:base="http://localhost:4000/2025/12/20/go-yfinance-4-en/"><![CDATA[<h2 id="checking-the-remaining-development-scope">Checking the Remaining Development Scope</h2>

<p>According to the analysis using Claude Code and Gemini, the scope covered so far (~Phase 4) means that all practically usable features have been implemented. The remaining part is to implement the rest of the features provided by yfinance.</p>

<p>There are approximately 5 additional Phases left, and I first organized what work would be done in each stage.</p>

<h3 id="phase-5-holdings--actions-difficulty-">Phase 5: Holdings &amp; Actions (Difficulty: ★★☆☆☆)</h3>

<p>Expected to be low difficulty as it utilizes the existing quoteSummary API pattern.</p>

<table>
  <thead>
    <tr>
      <th>Method</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">MajorHolders()</code></td>
      <td>Analysis of major holder ratios</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">InstitutionalHolders()</code></td>
      <td>List of institutional holders</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">MutualFundHolders()</code></td>
      <td>List of mutual fund holders</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">InsiderTransactions()</code></td>
      <td>Insider transaction history</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">InsiderRoster()</code></td>
      <td>List of insiders</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Calendar()</code></td>
      <td>Dividend dates, earnings announcement dates, etc.</td>
    </tr>
  </tbody>
</table>

<h3 id="phase-6-search--lookup-difficulty-">Phase 6: Search &amp; Lookup (Difficulty: ★★☆☆☆)</h3>

<p>Can be implemented independently as a new package, and various support types (equity, mutualfund, etf, index, future, currency, cryptocurrency) were already implemented.</p>

<table>
  <thead>
    <tr>
      <th>Feature</th>
      <th>API Endpoint</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Search</td>
      <td>/v1/finance/search</td>
    </tr>
    <tr>
      <td>Lookup</td>
      <td>/v1/finance/lookup</td>
    </tr>
  </tbody>
</table>

<h3 id="phase-7-multi-ticker--batch-difficulty-">Phase 7: Multi-ticker &amp; Batch (Difficulty: ★★★☆☆)</h3>

<p>This part requires parallel processing using Go’s goroutines.</p>

<h3 id="phase-8-real-time-websocket-difficulty-">Phase 8: Real-time WebSocket (Difficulty: ★★★★☆)</h3>

<p>Expected to be the most complex stage, requiring WebSocket + Protobuf decoding.</p>

<ul>
  <li>Endpoint: <code class="language-plaintext highlighter-rouge">wss://streamer.finance.yahoo.com/?version=2</code></li>
  <li>Message Format: Base64 encoded Protobuf</li>
  <li>Streaming real-time prices, volume, quotes, etc.</li>
</ul>

<h3 id="phase-9-advanced-features-difficulty-">Phase 9: Advanced Features (Difficulty: ★★★☆☆)</h3>

<p>Additional features to be implemented incrementally. These seemed to be of the lowest priority.</p>

<table>
  <thead>
    <tr>
      <th>Feature</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Caching</td>
      <td>Memory/File cache (SQLite)</td>
    </tr>
    <tr>
      <td>Price Repair</td>
      <td>Correction for 100x exchange rate errors, unreflected splits</td>
    </tr>
    <tr>
      <td>Timezone</td>
      <td>Timezone handling per exchange</td>
    </tr>
    <tr>
      <td>Market Calendar</td>
      <td>Management of market holidays and half-days</td>
    </tr>
    <tr>
      <td>News</td>
      <td>News feed per ticker</td>
    </tr>
  </tbody>
</table>

<h2 id="implementing-holdings--actions">Implementing Holdings &amp; Actions</h2>

<p>I established the implementation plan as follows and requested the work in the same manner as before.</p>

<ul>
  <li>Create phase5/holdings branch from main</li>
  <li>Implement holder models (pkg/models/holders.go)</li>
  <li>Implement calendar model (pkg/models/calendar.go)</li>
  <li>Implement holders methods (pkg/ticker/holders.go)</li>
  <li>Implement calendar method (pkg/ticker/calendar.go)</li>
  <li>Write tests for holders and calendar</li>
  <li>Update documentation (doc.go files)</li>
  <li>Merge to main and update STATUS.md</li>
</ul>

<p>Everything went well, but there was one log in the middle that made me feel uneasy.</p>

<p><br /></p>

<p><em>🤖: There is an issue with documentation generation, but since CI/CD is set up, it will be automatically generated upon push. Marking Phase 5 work as complete…”</em></p>

<p><br /></p>

<h2 id="inconsistencies-with-yfinance-still-exist">Inconsistencies with yfinance Still Exist</h2>

<p>The comment about the documentation generation issue made me wonder if there were other incorrect parts that Claude Code hadn’t mentioned. The biggest concern was the inconsistency with the yfinance library’s methods. I had already checked this in the <a href="https://wnjoon.github.io/2025/12/19/go-yfinance-3-en/">previous post</a>, but I couldn’t guarantee that this issue wouldn’t occur again in future tasks.</p>

<p>In fact, such common development requirements should be written in a separate document and configured to be referenced at every development stage. I was working continuously in a single session, and I was curious about how much context Claude Code would retain. Honestly speaking, it was partly my fault for just letting it develop out of laziness 😅.</p>

<p><br /></p>

<p><em>👨🏻‍💻: Check if the contents written in Phase 5 match the format (input, output, function name, etc.) of the corresponding methods in yfinance (Python). Please check this part every time you work on the next Phase from now on. Of course, you can ignore parts that are inevitably different due to language characteristics.</em></p>

<p><br /></p>

<table>
  <thead>
    <tr>
      <th>Python</th>
      <th>go-yfinance Status</th>
      <th>Note</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">major_holders</code></td>
      <td><code class="language-plaintext highlighter-rouge">MajorHolders()</code></td>
      <td>✅ OK (Language convention difference)</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">institutional_holders</code></td>
      <td><code class="language-plaintext highlighter-rouge">InstitutionalHolders()</code></td>
      <td>✅ OK</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">mutualfund_holders</code></td>
      <td><code class="language-plaintext highlighter-rouge">MutualFundHolders()</code></td>
      <td>✅ OK</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">insider_purchases</code></td>
      <td><code class="language-plaintext highlighter-rouge">InsiderPurchases()</code></td>
      <td>✅ OK</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">insider_transactions</code></td>
      <td><code class="language-plaintext highlighter-rouge">InsiderTransactions()</code></td>
      <td>✅ OK</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">insider_roster_holders</code></td>
      <td><code class="language-plaintext highlighter-rouge">InsiderRoster()</code></td>
      <td>⚠️ Fix Needed</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">calendar</code></td>
      <td><code class="language-plaintext highlighter-rouge">Calendar()</code></td>
      <td>✅ OK</td>
    </tr>
  </tbody>
</table>

<p>There was a part that needed correction (<code class="language-plaintext highlighter-rouge">InsiderRoster()</code> → <code class="language-plaintext highlighter-rouge">InsiderRosterHolders()</code>). Since I didn’t explicitly request to keep the yfinance function names exactly, this resulted in unnecessary extra work. I decided I must explicitly state this in future stages.</p>

<h2 id="changing-the-documentation-generation-strategy">Changing the Documentation Generation Strategy</h2>

<p>Returning to the original issue, although documentation would be generated by GitHub Actions, the phrase about completing the task despite generation issues felt a bit unsettling. This was because I couldn’t verify if the documentation was generated correctly during the development stage.</p>

<p><br /></p>

<p><em>👨🏻‍💻: You mentioned there was a problem with documentation generation. Please check if this part was generated correctly automatically.</em></p>

<p><br /></p>

<p>The analysis result was as expected: <em>Since the current local commits have not been pushed to remote yet, and CI/CD generates <code class="language-plaintext highlighter-rouge">docs/API.md</code> automatically when pushed to main, it is difficult to verify at this moment.</em></p>

<p>In the <a href="https://wnjoon.github.io/2025/12/19/go-yfinance-3/">previous post</a>, I defined the documentation generation point using <code class="language-plaintext highlighter-rouge">gomarkdoc</code> in GitHub Actions so that it would be automatically generated whenever pushed to main. However, proceeding with this revealed some issues. First, by delegating documentation authority to GitHub, I had to pull from main again to verify if the documentation was generated properly.</p>

<p><br /></p>

<p><em>👨🏻‍💻: Come to think of it, if I generate documentation via GitHub Actions, it seems difficult to verify if the document was generated correctly. How about generating and verifying all documents locally and not performing this action in GitHub Actions instead?</em></p>

<p><br /></p>

<p>Through the conversation with Claude Code, we decided to change the documentation generation method as follows:</p>

<ul>
  <li><strong>GitHub Actions:</strong> Remove documentation generation (Keep build/test only)</li>
  <li><strong>pre-commit hook:</strong> Do not use</li>
  <li><strong>Makefile:</strong> Add <code class="language-plaintext highlighter-rouge">make docs</code> command</li>
  <li><strong>Manual Execution:</strong> Run <code class="language-plaintext highlighter-rouge">make docs</code> upon Phase completion and then commit</li>
</ul>

<p>In the end, I decided to return to the generally used method rather than automation.</p>]]></content><author><name>Wonjoon</name></author><category term="dev" /><category term="go-yfinance" /><summary type="html"><![CDATA[The fifth post covering the story of building a Go version of the yahoo finance library based on the Python yfinance library using Claude Code.]]></summary></entry><entry xml:lang="en"><title type="html">Building a Go Yahoo Finance Library with Claude Code #6</title><link href="http://localhost:4000/2025/12/20/go-yfinance-5-en/" rel="alternate" type="text/html" title="Building a Go Yahoo Finance Library with Claude Code #6" /><published>2025-12-20T00:00:00+09:00</published><updated>2025-12-20T00:00:00+09:00</updated><id>http://localhost:4000/2025/12/20/go-yfinance-5-en</id><content type="html" xml:base="http://localhost:4000/2025/12/20/go-yfinance-5-en/"><![CDATA[<h2 id="creating-claudemd-finally">Creating CLAUDE.md (Finally)</h2>

<p>I asked Claude Code to develop the remaining Phases, but it proceeded with an unexpected task. The current working repository is structured as follows:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>yfinance-main 
ㄴ yfinance 
ㄴ go-yfinance 
ㄴ ...
</code></pre></div></div>

<p>So far, I had downloaded the <a href="https://github.com/ranaroussi/yfinance">ranaroussi/yfinance</a> repository locally. Inside it, I created the <code class="language-plaintext highlighter-rouge">go-yfinance</code> repository to implement functions by checking and comparing them one by one with <code class="language-plaintext highlighter-rouge">yfinance</code>.</p>

<p>However, Claude Code suddenly asked to retrieve the list of yfinance APIs from the Web. It hadn’t done this when developing previous phases. I realized this wouldn’t work, so I decided to define the working method in <code class="language-plaintext highlighter-rouge">CLAUDE.md</code>. Yes, my previous decision to <strong>just let it code out of laziness</strong> seemed to result in it suddenly changing its usual workflow.</p>

<p><br /></p>

<p><em>👨🏻‍💻: Please write the policies we’ve adopted so far during development into CLAUDE.md. Configure it so that it only operates within this project.</em></p>

<p><br /></p>

<p>The written <a href="https://github.com/wnjoon/go-yfinance/blob/main/CLAUDE.md">CLAUDE.md</a> includes the content below. When work starts in <code class="language-plaintext highlighter-rouge">go-yfinance</code>, <code class="language-plaintext highlighter-rouge">CLAUDE.md</code> is automatically loaded, and all development guidelines are applied automatically.</p>

<p><strong>Project Identity &amp; Reference Principles</strong></p>

<ul>
  <li>Goal: A project to port the Python <code class="language-plaintext highlighter-rouge">yfinance</code> library to the Go language.</li>
  <li>Reference Principles (CRITICAL):
    <ul>
      <li>Do NOT search the web for feature implementation; directly analyze and reference the local Python <code class="language-plaintext highlighter-rouge">yfinance</code> source code.</li>
      <li>Maintain consistency with the Python version regarding method names, parameters, return types, etc.</li>
    </ul>
  </li>
</ul>

<p><strong>Development Workflow</strong></p>

<ul>
  <li>Observe the following steps when developing new features:
    <ul>
      <li>Preparation: Check <code class="language-plaintext highlighter-rouge">STATUS.md</code> and sync with the <code class="language-plaintext highlighter-rouge">main</code> branch.</li>
      <li>Development:
        <ul>
          <li>Create <code class="language-plaintext highlighter-rouge">phase{N}/{feature-name}</code> branch.</li>
          <li>Adhere to existing code patterns (<code class="language-plaintext highlighter-rouge">pkg/ticker</code>, <code class="language-plaintext highlighter-rouge">pkg/models</code>).</li>
          <li>Unit tests must be written.</li>
        </ul>
      </li>
      <li>Documentation: Add comments to <code class="language-plaintext highlighter-rouge">doc.go</code> files and update <code class="language-plaintext highlighter-rouge">STATUS.md</code>.</li>
    </ul>
  </li>
</ul>

<p><strong>API Consistency</strong></p>

<ul>
  <li>Strictly manage method mapping between Python <code class="language-plaintext highlighter-rouge">yfinance</code> and Go <code class="language-plaintext highlighter-rouge">go-yfinance</code>.
    <ul>
      <li>Naming: Convert Python’s snake_case to Go’s PascalCase (e.g., <code class="language-plaintext highlighter-rouge">major_holders</code> → <code class="language-plaintext highlighter-rouge">MajorHolders</code>).</li>
      <li>Mapping Table: Adhere to specifically stated mapping rules like <code class="language-plaintext highlighter-rouge">InsiderRosterHolders</code>, <code class="language-plaintext highlighter-rouge">AnalystPriceTargets</code>.</li>
    </ul>
  </li>
</ul>

<p><strong>Definition of Done</strong></p>

<ul>
  <li>Perform the following before merging into the main branch:
    <ul>
      <li>Pass tests (<code class="language-plaintext highlighter-rouge">go test</code>) and build (<code class="language-plaintext highlighter-rouge">go build</code>).</li>
      <li>Verify API correspondence with the Python version.</li>
      <li>Generate Documentation: Execute <code class="language-plaintext highlighter-rouge">make docs</code> to generate and verify <code class="language-plaintext highlighter-rouge">docs/API.md</code> locally (Do not rely on CI/CD).</li>
      <li>Commit and push including the generated documents.</li>
    </ul>
  </li>
</ul>

<p><strong>Code Style &amp; Tools</strong></p>

<ul>
  <li>Comments: Include <code class="language-plaintext highlighter-rouge">gomarkdoc</code> compatible comments and Examples.</li>
  <li>Backward Compatibility: Maintain Deprecated Aliases when method names change to ensure compatibility.</li>
  <li>Makefile: Use <code class="language-plaintext highlighter-rouge">build</code>, <code class="language-plaintext highlighter-rouge">test</code>, <code class="language-plaintext highlighter-rouge">docs</code>, <code class="language-plaintext highlighter-rouge">lint</code> commands.</li>
</ul>

<p><strong>Issue Response</strong></p>

<ul>
  <li>Includes guidelines for CycleTLS panic handling and Git environment variable settings.</li>
</ul>

<h2 id="trusting-completely-but-with-a-touch-of-interference">Trusting Completely, But With a Touch of Interference</h2>

<p>After writing <code class="language-plaintext highlighter-rouge">CLAUDE.md</code>, I thought Claude Code would handle things well on its own. However, just like the sudden attempt to fetch APIs from the Web, I felt that continuous checking was necessary, even though I had created the guideline document.</p>

<p><br /></p>

<p><img src="https://velog.velcdn.com/images/wnjoon/post/4a30789d-edb7-4193-bdb5-6c1a928ac4ec/image.png" alt="image" /></p>

<p><br /></p>

<p>As mentioned in a <a href="https://www.linkedin.com/posts/wooing_claude-code%EB%A5%BC-%EC%93%B8-%EB%95%8C%EB%8A%94-%EB%82%B4%EA%B0%80-%EC%97%84%EC%B2%AD-%EC%9E%90%EC%A3%BC-%EA%B0%9C%EC%9E%85%ED%95%B4%EC%A4%98%EC%95%BC-%ED%95%9C%EB%8B%A4-%EA%B0%9C%EC%9E%85%EC%9D%84-activity-7408090307247976449-sBPP?utm_source=share&amp;utm_medium=member_desktop&amp;rcm=ACoAACX_74kB5FHdEvU5kLzcald4RDFZSjBrrKA">post</a> by <a href="https://www.linkedin.com/in/wooing/">Kim Wooyeong</a>, simply writing down all guidelines in Claude Code doesn’t mean you can delegate everything. I definitely felt the quality improve when I continued to give feedback and proceeded with additional verification and questions at each step.</p>

<h3 id="should-we-strictly-follow-go-function-naming-rules">Should We Strictly Follow Go Function Naming Rules?</h3>

<p>For example, in Claude Code’s report stating that Phase 7 implementation was complete, the Python <code class="language-plaintext highlighter-rouge">yfinance</code> API mapping result was as follows:</p>

<table>
  <thead>
    <tr>
      <th>Python</th>
      <th>Go</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">yf.Tickers(symbols)</code></td>
      <td><code class="language-plaintext highlighter-rouge">multi.NewTickers(symbols)</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">tickers.tickers[symbol]</code></td>
      <td><code class="language-plaintext highlighter-rouge">tickers.Get(symbol)</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">tickers.history()</code></td>
      <td><code class="language-plaintext highlighter-rouge">tickers.History(params)</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">yf.download(symbols)</code></td>
      <td><code class="language-plaintext highlighter-rouge">multi.Download(symbols, params)</code></td>
    </tr>
  </tbody>
</table>

<p>The part I questioned here was writing <code class="language-plaintext highlighter-rouge">tickers.tickers[symbol]</code> as <code class="language-plaintext highlighter-rouge">tickers.Get(symbol)</code>. I had requested strict adherence to <code class="language-plaintext highlighter-rouge">yfinance</code> principles, but Claude Code created the function with the name <code class="language-plaintext highlighter-rouge">Get</code>. So, I asked Claude Code:</p>

<p><br /></p>

<p><em>👨🏻‍💻: I want to strictly follow yfinance’s function naming rules. Is writing tickers.tickers[symbol] as tickers.Get(symbol) a good approach?</em></p>

<p><em>🤖: In the Go implementation, I created it as a Get(symbol) method, which is more idiomatic in Go. To expose it as a public field like Python, you have Option 1: keep the current method style using tickers.Get(“AAPL”), or Option 2: expose a public map field using tickers.Tickers[“AAPL”]. To exactly match the Python API, we could expose the Tickers field publicly.</em></p>

<p><br /></p>

<p>I suspected it was created this way to satisfy Go’s implementation philosophy. However, as I thought when first starting this library conversion: <strong>It is important to follow Python yfinance’s principles as much as possible, but there will definitely be cases where we must implement differently due to the language’s characteristics.</strong></p>

<p>So I asked if other features were also maintaining this Go style. If other methods were strictly following <code class="language-plaintext highlighter-rouge">yfinance</code> principles, I would need to change this part, but if other parts were also satisfying Go style, I considered the implementation direction to be consistent.</p>

<p>The following is the analysis result of all methods developed up to Phase 7:</p>

<table>
  <thead>
    <tr>
      <th>Python yfinance</th>
      <th>Go go-yfinance</th>
      <th>Match Status</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>Core</strong></td>
      <td>-</td>
      <td>-</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Ticker(symbol)</code></td>
      <td><code class="language-plaintext highlighter-rouge">ticker.New(symbol)</code></td>
      <td>✅ Go Style</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.ticker</code></td>
      <td><code class="language-plaintext highlighter-rouge">t.Symbol()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.history()</code></td>
      <td><code class="language-plaintext highlighter-rouge">t.History(params)</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.info</code></td>
      <td><code class="language-plaintext highlighter-rouge">t.Info()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.fast_info</code></td>
      <td><code class="language-plaintext highlighter-rouge">t.FastInfo()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><strong>Quote</strong></td>
      <td>-</td>
      <td>-</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.quote (internal)</code></td>
      <td><code class="language-plaintext highlighter-rouge">t.Quote()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><strong>Options</strong></td>
      <td>-</td>
      <td>-</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.options</code></td>
      <td><code class="language-plaintext highlighter-rouge">t.Options()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.option_chain(date)</code></td>
      <td><code class="language-plaintext highlighter-rouge">t.OptionChain(date)</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><strong>Financials</strong></td>
      <td>-</td>
      <td>-</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.get_income_stmt(freq)</code></td>
      <td><code class="language-plaintext highlighter-rouge">t.IncomeStatement(freq)</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.get_balance_sheet(freq)</code></td>
      <td><code class="language-plaintext highlighter-rouge">t.BalanceSheet(freq)</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.get_cashflow(freq)</code></td>
      <td><code class="language-plaintext highlighter-rouge">t.CashFlow(freq)</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><strong>Analysis</strong></td>
      <td>-</td>
      <td>-</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.get_recommendations()</code></td>
      <td><code class="language-plaintext highlighter-rouge">t.Recommendations()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.get_analyst_price_targets()</code></td>
      <td><code class="language-plaintext highlighter-rouge">t.AnalystPriceTargets()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.get_earnings_estimate()</code></td>
      <td><code class="language-plaintext highlighter-rouge">t.EarningsEstimate()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.get_revenue_estimate()</code></td>
      <td><code class="language-plaintext highlighter-rouge">t.RevenueEstimate()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.get_eps_trend()</code></td>
      <td><code class="language-plaintext highlighter-rouge">t.EPSTrend()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.get_eps_revisions()</code></td>
      <td><code class="language-plaintext highlighter-rouge">t.EPSRevisions()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.get_earnings_history()</code></td>
      <td><code class="language-plaintext highlighter-rouge">t.EarningsHistory()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.get_growth_estimates()</code></td>
      <td><code class="language-plaintext highlighter-rouge">t.GrowthEstimates()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><strong>Holders</strong></td>
      <td>-</td>
      <td>-</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.get_major_holders()</code></td>
      <td><code class="language-plaintext highlighter-rouge">t.MajorHolders()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.get_institutional_holders()</code></td>
      <td><code class="language-plaintext highlighter-rouge">t.InstitutionalHolders()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.get_mutualfund_holders()</code></td>
      <td><code class="language-plaintext highlighter-rouge">t.MutualFundHolders()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.get_insider_transactions()</code></td>
      <td><code class="language-plaintext highlighter-rouge">t.InsiderTransactions()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.get_insider_roster_holders()</code></td>
      <td><code class="language-plaintext highlighter-rouge">t.InsiderRosterHolders()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.get_insider_purchases()</code></td>
      <td><code class="language-plaintext highlighter-rouge">t.InsiderPurchases()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><strong>Calendar</strong></td>
      <td>-</td>
      <td>-</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.get_calendar()</code></td>
      <td><code class="language-plaintext highlighter-rouge">t.Calendar()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><strong>History</strong></td>
      <td>-</td>
      <td>-</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.dividends</code></td>
      <td><code class="language-plaintext highlighter-rouge">t.Dividends()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.splits</code></td>
      <td><code class="language-plaintext highlighter-rouge">t.Splits()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.actions</code></td>
      <td><code class="language-plaintext highlighter-rouge">t.Actions()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><strong>Multi-ticker</strong></td>
      <td>-</td>
      <td>-</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">yf.Tickers(symbols)</code></td>
      <td><code class="language-plaintext highlighter-rouge">multi.NewTickers(symbols)</code></td>
      <td>✅ Go Style</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">tickers.tickers[symbol]</code></td>
      <td><code class="language-plaintext highlighter-rouge">tickers.Get(symbol)</code></td>
      <td>✅ Go Style</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">tickers.history()</code></td>
      <td><code class="language-plaintext highlighter-rouge">tickers.History(params)</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">yf.download()</code></td>
      <td><code class="language-plaintext highlighter-rouge">multi.Download()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><strong>Search</strong></td>
      <td>-</td>
      <td>-</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">yf.Search(query)</code></td>
      <td><code class="language-plaintext highlighter-rouge">search.Search(query)</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><strong>Screener</strong></td>
      <td>-</td>
      <td>-</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">yf.Screener.get_screeners()</code></td>
      <td><code class="language-plaintext highlighter-rouge">screener.Screen()</code></td>
      <td>✅</td>
    </tr>
  </tbody>
</table>

<p>Excluding the unimplemented functions in Phases 8-9, I could confirm that all implemented content was mapped consistently.</p>

<p>Additionally, as each step proceeded, I made sure to check again whether the documentation was written correctly (though it might seem unnecessary). This is partly because I can’t delegate 100% of the work to Claude Code, but also because I believe it is a manager’s duty to verify the work done.</p>

<h3 id="is-it-okay-if-package-names-are-different">Is it Okay if Package Names are Different?</h3>

<p>During the implementation of Phase 8, the package for Websocket was named <code class="language-plaintext highlighter-rouge">live</code>. Consequently, the part called as <code class="language-plaintext highlighter-rouge">yf.WebSocket()</code> in Python changed to <code class="language-plaintext highlighter-rouge">live.New()</code> in Go. I asked for the reason behind this implementation.</p>

<p><br /></p>

<p><em>👨🏻‍💻: Is there a reason why the Websocket-related package name is ‘live’?</em></p>

<p><br /></p>

<p>It turned out that Python <code class="language-plaintext highlighter-rouge">yfinance</code>’s filename is <code class="language-plaintext highlighter-rouge">live.py</code>, and the classes <code class="language-plaintext highlighter-rouge">WebSocket</code> and <code class="language-plaintext highlighter-rouge">AsyncWebSocket</code> are also inside the <code class="language-plaintext highlighter-rouge">live</code> module, so it was matched identically.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Python yfinance
</span><span class="kn">from</span> <span class="nn">yfinance.live</span> <span class="kn">import</span> <span class="n">WebSocket</span>
</code></pre></div></div>

<p>Although there were alternative names suggested by Claude Code such as stream, websocket, and realtime, I judged that keeping it identical to Python was more correct. And actually, when using it in Go, I thought it would be usable without confusion due to the consistency with Python yfinance.</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="s">"github.com/wnjoon/go-yfinance/pkg/live"</span>

<span class="n">ws</span><span class="p">,</span> <span class="n">_</span> <span class="o">:=</span> <span class="n">live</span><span class="o">.</span><span class="n">New</span><span class="p">()</span>
<span class="n">ws</span><span class="o">.</span><span class="n">Subscribe</span><span class="p">([]</span><span class="kt">string</span><span class="p">{</span><span class="s">"AAPL"</span><span class="p">})</span>
<span class="n">ws</span><span class="o">.</span><span class="n">Listen</span><span class="p">(</span><span class="n">handler</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="implementation-results-of-phase-6-9">Implementation Results of Phase 6-9</h2>

<h3 id="phase-6-search--lookup">Phase 6: Search &amp; Lookup</h3>

<p><strong>Code Implementation</strong></p>

<ul>
  <li>Search Package (<code class="language-plaintext highlighter-rouge">pkg/search/search.go</code>): <code class="language-plaintext highlighter-rouge">Search</code>, <code class="language-plaintext highlighter-rouge">SearchWithParams</code>, <code class="language-plaintext highlighter-rouge">Quotes</code>, <code class="language-plaintext highlighter-rouge">News</code> methods</li>
  <li>Screener Package (<code class="language-plaintext highlighter-rouge">pkg/screener/screener.go</code>): <code class="language-plaintext highlighter-rouge">Screen</code>, <code class="language-plaintext highlighter-rouge">ScreenWithQuery</code>, <code class="language-plaintext highlighter-rouge">DayGainers</code>, <code class="language-plaintext highlighter-rouge">DayLosers</code>, <code class="language-plaintext highlighter-rouge">MostActives</code> methods</li>
  <li>Models (<code class="language-plaintext highlighter-rouge">pkg/models/search.go</code>, <code class="language-plaintext highlighter-rouge">pkg/models/screener.go</code>): All data structures</li>
</ul>

<p><strong>Testing</strong></p>

<ul>
  <li>All tests passed (<code class="language-plaintext highlighter-rouge">go test ./pkg/search/... ./pkg/screener/... -v</code>)</li>
</ul>

<p><strong>Documentation</strong></p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">pkg/search/doc.go</code>, <code class="language-plaintext highlighter-rouge">pkg/screener/doc.go</code> - Package documentation</li>
  <li><code class="language-plaintext highlighter-rouge">pkg/models/doc.go</code> - Added Search/Screener types</li>
  <li><code class="language-plaintext highlighter-rouge">STATUS.md</code> - Updated Phase 6 completion status</li>
  <li><code class="language-plaintext highlighter-rouge">docs/API.md</code> - Automatically generated via <code class="language-plaintext highlighter-rouge">make docs</code></li>
</ul>

<p><strong>Python yfinance API Consistency</strong></p>

<table>
  <thead>
    <tr>
      <th>Python yfinance</th>
      <th>Go Implementation</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">yf.search(query)</code></td>
      <td><code class="language-plaintext highlighter-rouge">search.Search(query)</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Screener().set_predefined_body(name)</code></td>
      <td><code class="language-plaintext highlighter-rouge">screener.Screen(name, params)</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Screener().set_body(query)</code></td>
      <td><code class="language-plaintext highlighter-rouge">screener.ScreenWithQuery(query, params)</code></td>
    </tr>
    <tr>
      <td>Query Operators (EQ, GT, LT, AND, OR, etc.)</td>
      <td>Identical to <code class="language-plaintext highlighter-rouge">models.OpEQ</code>, <code class="language-plaintext highlighter-rouge">models.OpGT</code>, etc.</td>
    </tr>
    <tr>
      <td>Predefined screeners (day_gainers, etc.)</td>
      <td>Identical to <code class="language-plaintext highlighter-rouge">models.ScreenerDayGainers</code>, etc.</td>
    </tr>
  </tbody>
</table>

<h3 id="phase-7-multi-ticker--batch">Phase 7: Multi-ticker &amp; Batch</h3>

<p><strong>New Files</strong></p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">pkg/models/multi.go</code>: <code class="language-plaintext highlighter-rouge">DownloadParams</code>, <code class="language-plaintext highlighter-rouge">MultiTickerResult</code> models</li>
  <li><code class="language-plaintext highlighter-rouge">pkg/multi/multi.go</code>: <code class="language-plaintext highlighter-rouge">Tickers</code> struct, <code class="language-plaintext highlighter-rouge">Download</code> function</li>
  <li><code class="language-plaintext highlighter-rouge">pkg/multi/multi_test.go</code>: Unit tests</li>
</ul>

<p><strong>Key Features</strong></p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">multi.NewTickers(symbols)</code>: Create Tickers with symbol slice</li>
  <li><code class="language-plaintext highlighter-rouge">multi.NewTickersFromString(str)</code>: Create Tickers from string (space/comma separated)</li>
  <li><code class="language-plaintext highlighter-rouge">tickers.Get(symbol)</code>: Access individual ticker</li>
  <li><code class="language-plaintext highlighter-rouge">tickers.History(params)</code>: Download full ticker history</li>
  <li><code class="language-plaintext highlighter-rouge">multi.Download(symbols, params)</code>: Batch download as an independent function</li>
  <li>Parallel processing support via Worker pool (<code class="language-plaintext highlighter-rouge">Threads</code> parameter)</li>
</ul>

<p><strong>Python yfinance API Mapping</strong></p>

<table>
  <thead>
    <tr>
      <th>Python</th>
      <th>Go</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">yf.Tickers(symbols)</code></td>
      <td><code class="language-plaintext highlighter-rouge">multi.NewTickers(symbols)</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">tickers.tickers[symbol]</code></td>
      <td><code class="language-plaintext highlighter-rouge">tickers.Get(symbol)</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">tickers.history()</code></td>
      <td><code class="language-plaintext highlighter-rouge">tickers.History(params)</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">yf.download(symbols)</code></td>
      <td><code class="language-plaintext highlighter-rouge">multi.Download(symbols, params)</code></td>
    </tr>
  </tbody>
</table>

<h3 id="phase-8-real-time-websocket">Phase 8: Real-time WebSocket</h3>

<p><strong>New Files</strong></p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">pkg/models/live.go</code>: <code class="language-plaintext highlighter-rouge">PricingData</code> struct (33 fields), <code class="language-plaintext highlighter-rouge">MarketState</code> type</li>
  <li><code class="language-plaintext highlighter-rouge">pkg/live/proto.go</code>: Protobuf decoder (Base64 + protobuf parsing)</li>
  <li><code class="language-plaintext highlighter-rouge">pkg/live/websocket.go</code>: WebSocket client</li>
  <li><code class="language-plaintext highlighter-rouge">pkg/live/doc.go</code>: Package documentation</li>
  <li><code class="language-plaintext highlighter-rouge">pkg/live/live_test.go</code>: Unit tests</li>
</ul>

<p><strong>Key Features</strong></p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">live.New()</code>: Create WebSocket client</li>
  <li><code class="language-plaintext highlighter-rouge">ws.Subscribe(symbols)</code>: Subscribe to symbols</li>
  <li><code class="language-plaintext highlighter-rouge">ws.Unsubscribe(symbols)</code>: Unsubscribe</li>
  <li><code class="language-plaintext highlighter-rouge">ws.Listen(handler)</code>: Blocking listening</li>
  <li><code class="language-plaintext highlighter-rouge">ws.ListenAsync(handler)</code>: Asynchronous listening</li>
  <li><code class="language-plaintext highlighter-rouge">ws.Close()</code>: Close connection</li>
  <li>Auto heartbeat (resubscribe every 15 seconds)</li>
  <li>Auto reconnect</li>
</ul>

<p><strong>Python yfinance API Mapping</strong></p>

<table>
  <thead>
    <tr>
      <th>Python</th>
      <th>Go</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">yf.WebSocket()</code></td>
      <td><code class="language-plaintext highlighter-rouge">live.New()</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ws.subscribe(symbols)</code></td>
      <td><code class="language-plaintext highlighter-rouge">ws.Subscribe(symbols)</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ws.listen(handler)</code></td>
      <td><code class="language-plaintext highlighter-rouge">ws.Listen(handler)</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ws.close()</code></td>
      <td><code class="language-plaintext highlighter-rouge">ws.Close()</code></td>
    </tr>
  </tbody>
</table>

<h3 id="phase-9-python-yfinance-advanced-features">Phase 9: Python yfinance Advanced Features</h3>

<p><strong>Added Features</strong></p>

<ul>
  <li>News Feed (<code class="language-plaintext highlighter-rouge">pkg/ticker/news.go</code>)
    <ul>
      <li><code class="language-plaintext highlighter-rouge">ticker.News(count, tab)</code>: Fetch news articles</li>
      <li><code class="language-plaintext highlighter-rouge">ticker.GetNews()</code>: Fetch news with default parameters</li>
      <li>Includes ad filtering</li>
    </ul>
  </li>
  <li>Cache Layer (<code class="language-plaintext highlighter-rouge">pkg/cache/cache.go</code>)
    <ul>
      <li>Thread-safe TTL-based in-memory cache</li>
      <li>Auto-cleanup of expired items</li>
      <li>Global cache instance</li>
    </ul>
  </li>
  <li>Timezone Utilities (<code class="language-plaintext highlighter-rouge">pkg/utils/timezone.go</code>)
    <ul>
      <li>Mapping of 50+ global exchange timezones</li>
      <li><code class="language-plaintext highlighter-rouge">GetTimezone()</code>, <code class="language-plaintext highlighter-rouge">IsValidTimezone()</code>, <code class="language-plaintext highlighter-rouge">ConvertToTimezone()</code></li>
      <li><code class="language-plaintext highlighter-rouge">MarketIsOpen()</code>: Basic market hour check</li>
    </ul>
  </li>
</ul>

<h2 id="summary">Summary</h2>

<p>In this way, I analyzed <code class="language-plaintext highlighter-rouge">yfinance</code> and asked Claude Code to create a Go library with the same functions. In terms of duration, it took about 3 days, but in actual working hours, it took roughly 6-7 hours. I probably could have worked much faster if I had written <code class="language-plaintext highlighter-rouge">CLAUDE.md</code> more meticulously or hadn’t requested redundant verification continuously.</p>

<p>Initially, I started this side project because there was no <code class="language-plaintext highlighter-rouge">yfinance</code> library in Go while building an <strong>Investment Strategy Agent</strong> in a <a href="https://nomadcoders.co/ai-agents-masterclass?gad_source=1&amp;gad_campaignid=18141167485&amp;gbraid=0AAAAACQEcGgB28vYn3MvB7rhLJ-guDeaI&amp;gclid=Cj0KCQiA6Y7KBhCkARIsAOxhqtM01uDU_sqgVSqN3XMhxFpk9dDyzL1A6kZ0a1GY_Y7gsTcbOAwz8gIaAtf1EALw_wcB">course</a>. I could have just followed the course using Python, thinking of it as studying Python, but since Google ADK supports Go, I thought, “Is there any reason not to try using Go?” and that led me here.</p>

<p>Although I borrowed the ideas and logic from open source, I left an inquiry in the <a href="https://github.com/ranaroussi/yfinance/discussions/2647#discussioncomment-15310537">Discussion section of <code class="language-plaintext highlighter-rouge">ranaroussi/yfinance</code></a> just in case.</p>

<p><br /></p>

<p><img src="https://velog.velcdn.com/images/wnjoon/post/e6f0189a-828a-4679-8a8f-943b27067274/image.png" alt="image" /></p>

<p><br /></p>

<p>I also asked Gemini a few questions out of curiosity regarding potential issues.</p>

<p><br /></p>

<p><em>👨🏻‍💻: I made a library for Go by referencing the logic and structure of yfinance used in Python. Although yfinance is open source, I sent an email asking if it’s okay to implement and create a library like this, but I haven’t received a reply yet. Could there be any problems in this case?</em></p>

<p><br /></p>

<p>Here is a summary of Gemini’s response:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">yfinance</code> likely follows a Permissive license like <strong>Apache License 2.0</strong> (or MIT depending on the version). Converting Python code to Go is a form of <strong>porting</strong>. Open source licenses generally allow code modification, distribution, and porting to other languages.</li>
  <li>The logic of fetching data from Yahoo Finance or the function structure itself is closer to an ‘idea’ or ‘function’ rather than ‘expression,’ which is subject to copyright protection. Therefore, if you didn’t just copy and paste the Python code but <strong>re-implemented</strong> it to fit the characteristics of the Go language, the possibility of copyright infringement is low.</li>
  <li>To respect the original author and follow license regulations, it is customary and safe to state in the GitHub README, etc., that <strong>“This project is inspired by the Python yfinance library”</strong> and provide a link to the original.</li>
  <li>Yahoo Finance currently does not officially provide a free API. <code class="language-plaintext highlighter-rouge">yfinance</code> or user-created Go libraries likely use methods of crawling web pages or calling unofficial internal API endpoints. However, Yahoo’s Terms of Service generally prohibit automated data collection (scraping).</li>
  <li>Yahoo may block IPs or change structures at any time, and if you use this commercially or cause excessive traffic, you may face legal sanctions.</li>
</ul>

<p>Finally, it suggested clearly stating in the <code class="language-plaintext highlighter-rouge">README.md</code> that it is an “Unofficial library implemented in Go referencing the logic of <code class="language-plaintext highlighter-rouge">ranaroussi/yfinance</code>,” and giving notice that “This is not an official API of Yahoo Finance, and data collection may be blocked at any time.”</p>

<p>So, I decided to add the following content to <code class="language-plaintext highlighter-rouge">README.md</code>.</p>

<div class="language-md highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gu">## Credits</span>

This project is a Go implementation inspired by the Python library <span class="p">[</span><span class="nv">yfinance</span><span class="p">](</span><span class="sx">https://github.com/ranaroussi/yfinance</span><span class="p">)</span>.
Special thanks to <span class="p">[</span><span class="nv">Ran Aroussi</span><span class="p">](</span><span class="sx">https://github.com/ranaroussi</span><span class="p">)</span> and all contributors of the original project for their excellent work.

...

<span class="gu">## Disclaimer</span>
<span class="gt">
&gt; **Please read this carefully before using this library.**</span>
<span class="p">
1.</span> <span class="gs">**Unofficial API**</span>: This library is <span class="gs">**not affiliated with, endorsed by, or connected to Yahoo! Finance**</span>. It wraps unofficial API endpoints intended for web browser consumption.
<span class="p">
2.</span> <span class="gs">**Terms of Service**</span>: Use of this library must comply with <span class="p">[</span><span class="nv">Yahoo!'s Terms of Service</span><span class="p">](</span><span class="sx">https://policies.yahoo.com/us/en/yahoo/terms/index.htm</span><span class="p">)</span>. Users are solely responsible for ensuring their usage is compliant.
<span class="p">
3.</span> <span class="gs">**Risk of Blocking**</span>: Since this library relies on unofficial methods, Yahoo! Finance may change their API structure or block IP addresses making excessive requests at any time without notice.
<span class="p">
4.</span> <span class="gs">**No Warranty**</span>: This software is provided "as is", without warranty of any kind, express or implied. The authors shall not be held liable for any damages or legal issues arising from the use of this software.
</code></pre></div></div>

<p>Next time, I plan to actually register it as a Go library. I’m thinking of letting Claude Code handle this part as well.</p>]]></content><author><name>Wonjoon</name></author><category term="dev" /><category term="go-yfinance" /><summary type="html"><![CDATA[The sixth post in the story of creating a Go version of the yahoo finance library based on the Python yfinance library using Claude Code.]]></summary></entry><entry xml:lang="en"><title type="html">Building a Go Yahoo Finance Library with Claude Code #3</title><link href="http://localhost:4000/2025/12/19/go-yfinance-2-en/" rel="alternate" type="text/html" title="Building a Go Yahoo Finance Library with Claude Code #3" /><published>2025-12-19T00:00:00+09:00</published><updated>2025-12-19T00:00:00+09:00</updated><id>http://localhost:4000/2025/12/19/go-yfinance-2-en</id><content type="html" xml:base="http://localhost:4000/2025/12/19/go-yfinance-2-en/"><![CDATA[<h2 id="does-it-match-yfinance">Does it match yfinance?</h2>

<p>The reason I’m implementing go-yfinance is simply that there isn’t a Yahoo Finance library written in Go. It might seem primitive, but until recently, there were cases where a server was implemented using the Python yfinance library just to receive results via API calls. Of course, even back then, it would have been possible to create a library converted to Go. However, analyzing and implementing it one by one would have taken quite a long time.</p>

<p>Now, with AI, work that would have taken months can be done in days. The go-yfinance project I’m currently working on is no exception. I’m training Claude Code with the already excellent yfinance library, checking if it can be converted to Go, and proceeding step by step.</p>

<p>Today, I guided it to implement ‘up to a practical level (~Phase 4)’ and wrote a <a href="https://wnjoon.github.io/2025/12/19/go-yfinance-1-en/">blog post</a> about it. But suddenly, a question arose.</p>

<p><br /></p>

<p><em>👨🏻‍💻: Do the methods, parameters, and return values provided by go-yfinance match those supported by yfinance?</em></p>

<p><br /></p>

<p>This was actually a quite crucial part. My goal is <strong>to allow developers familiar with yfinance to use functions in the same way even when using Go</strong>. I believed there should be no hassle of having to relearn what methods exist, how to call them, or what the results would look like when calling a method.</p>

<p>So, before implementing the remaining Phases, I asked Claude Code.</p>

<p><br /></p>

<p><em>👨🏻‍💻: Please verify if the structure of methods, parameters, and result values provided by the currently written go-yfinance is identical to those provided by python’s yfinance. To minimize user confusion, everything should be the same except for the language difference. Please review if everything is identical, excluding only case sensitivity due to Public/Private method differences which are characteristics of the language. ultrathink.</em></p>

<p><br /></p>

<h2 id="analysis-results-python-yfinance-vs-go-go-yfinance">Analysis Results: Python yfinance vs. Go go-yfinance</h2>

<p>Fortunately, most parts were confirmed to match, but there were some discrepancies.</p>

<h3 id="method-name-mismatches">Method Name Mismatches</h3>

<table>
  <thead>
    <tr>
      <th>Feature</th>
      <th>Python yfinance</th>
      <th>Go go-yfinance</th>
      <th>Recommended Fix</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>History</td>
      <td><code class="language-plaintext highlighter-rouge">ticker.history(...)</code></td>
      <td><code class="language-plaintext highlighter-rouge">ticker.History(params)</code></td>
      <td>✅ OK (Case difference only)</td>
    </tr>
    <tr>
      <td>Financials (income)</td>
      <td><code class="language-plaintext highlighter-rouge">ticker.income_stmt / get_income_stmt(freq="quarterly")</code></td>
      <td><code class="language-plaintext highlighter-rouge">ticker.IncomeStatement(freq)</code></td>
      <td>⚠️ Python uses income_stmt</td>
    </tr>
    <tr>
      <td>Financials (balance)</td>
      <td><code class="language-plaintext highlighter-rouge">ticker.balance_sheet / get_balance_sheet()</code></td>
      <td><code class="language-plaintext highlighter-rouge">ticker.BalanceSheet(freq)</code></td>
      <td>⚠️ Python uses balance_sheet</td>
    </tr>
    <tr>
      <td>Financials (cashflow)</td>
      <td><code class="language-plaintext highlighter-rouge">ticker.cash_flow / get_cash_flow()</code></td>
      <td><code class="language-plaintext highlighter-rouge">ticker.CashFlow(freq)</code></td>
      <td>⚠️ Python uses cash_flow</td>
    </tr>
    <tr>
      <td>Options list</td>
      <td><code class="language-plaintext highlighter-rouge">ticker.options (property, tuple)</code></td>
      <td><code class="language-plaintext highlighter-rouge">ticker.Options() (method, []time.Time)</code></td>
      <td>⚠️ Python uses property</td>
    </tr>
    <tr>
      <td>Option chain</td>
      <td><code class="language-plaintext highlighter-rouge">ticker.option_chain(date)</code></td>
      <td><code class="language-plaintext highlighter-rouge">ticker.OptionChain(date)</code></td>
      <td>✅ OK</td>
    </tr>
    <tr>
      <td>Price target</td>
      <td><code class="language-plaintext highlighter-rouge">ticker.analyst_price_targets</code></td>
      <td><code class="language-plaintext highlighter-rouge">ticker.PriceTarget()</code></td>
      <td>⚠️ Name mismatch</td>
    </tr>
    <tr>
      <td>Recommendations</td>
      <td><code class="language-plaintext highlighter-rouge">ticker.recommendations</code></td>
      <td><code class="language-plaintext highlighter-rouge">ticker.Recommendations()</code></td>
      <td>✅ OK</td>
    </tr>
    <tr>
      <td>EPS Trend</td>
      <td><code class="language-plaintext highlighter-rouge">ticker.eps_trend</code></td>
      <td><code class="language-plaintext highlighter-rouge">ticker.EPSTrend()</code></td>
      <td>⚠️ Underscore vs CamelCase</td>
    </tr>
    <tr>
      <td>EPS Revisions</td>
      <td><code class="language-plaintext highlighter-rouge">ticker.eps_revisions</code></td>
      <td><code class="language-plaintext highlighter-rouge">ticker.EPSRevisions()</code></td>
      <td>⚠️ Underscore vs CamelCase</td>
    </tr>
    <tr>
      <td>Earnings Estimate</td>
      <td><code class="language-plaintext highlighter-rouge">ticker.earnings_estimate</code></td>
      <td><code class="language-plaintext highlighter-rouge">ticker.EarningsEstimates()</code></td>
      <td>⚠️ Singular vs Plural</td>
    </tr>
    <tr>
      <td>Revenue Estimate</td>
      <td><code class="language-plaintext highlighter-rouge">ticker.revenue_estimate</code></td>
      <td><code class="language-plaintext highlighter-rouge">ticker.RevenueEstimates()</code></td>
      <td>⚠️ Singular vs Plural</td>
    </tr>
    <tr>
      <td>Earnings History</td>
      <td><code class="language-plaintext highlighter-rouge">ticker.earnings_history</code></td>
      <td><code class="language-plaintext highlighter-rouge">ticker.EarningsHistory()</code></td>
      <td>✅ OK</td>
    </tr>
    <tr>
      <td>Growth Estimates</td>
      <td><code class="language-plaintext highlighter-rouge">ticker.growth_estimates</code></td>
      <td><code class="language-plaintext highlighter-rouge">ticker.GrowthEstimates()</code></td>
      <td>✅ OK</td>
    </tr>
  </tbody>
</table>

<h3 id="parameter-name-mismatches">Parameter Name Mismatches</h3>

<p><strong>History Method</strong></p>

<table>
  <thead>
    <tr>
      <th>Python Parameter</th>
      <th>Go Parameter</th>
      <th>Mismatch</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>period</td>
      <td>Period</td>
      <td>✅ OK</td>
    </tr>
    <tr>
      <td>interval</td>
      <td>Interval</td>
      <td>✅ OK</td>
    </tr>
    <tr>
      <td>start</td>
      <td>Start</td>
      <td>✅ OK</td>
    </tr>
    <tr>
      <td>end</td>
      <td>End</td>
      <td>✅ OK</td>
    </tr>
    <tr>
      <td>prepost</td>
      <td>PrePost</td>
      <td>✅ OK</td>
    </tr>
    <tr>
      <td>auto_adjust</td>
      <td>AutoAdjust</td>
      <td>⚠️ Python: snake_case</td>
    </tr>
    <tr>
      <td>actions</td>
      <td>Actions</td>
      <td>✅ OK</td>
    </tr>
    <tr>
      <td>repair</td>
      <td>Repair</td>
      <td>✅ OK</td>
    </tr>
    <tr>
      <td>keepna</td>
      <td>KeepNA</td>
      <td>⚠️ Python: keepna (lowercase)</td>
    </tr>
    <tr>
      <td>back_adjust</td>
      <td>❌ None</td>
      <td>⚠️ Missing in Go</td>
    </tr>
    <tr>
      <td>rounding</td>
      <td>❌ None</td>
      <td>⚠️ Missing in Go</td>
    </tr>
    <tr>
      <td>timeout</td>
      <td>❌ None</td>
      <td>⚠️ Missing in Go (Set via Config)</td>
    </tr>
    <tr>
      <td>raise_errors</td>
      <td>❌ None</td>
      <td>⚠️ Go uses error return</td>
    </tr>
  </tbody>
</table>

<p><strong>Financials Method</strong></p>

<table>
  <thead>
    <tr>
      <th>Python Parameter</th>
      <th>Go Parameter</th>
      <th>Mismatch</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>freq=”yearly”</td>
      <td>freq=”annual”</td>
      <td>⚠️ “yearly” vs “annual”</td>
    </tr>
    <tr>
      <td>freq=”quarterly”</td>
      <td>freq=”quarterly”</td>
      <td>✅ OK</td>
    </tr>
    <tr>
      <td>freq=”trailing”</td>
      <td>freq=”trailing”</td>
      <td>✅ OK</td>
    </tr>
    <tr>
      <td>pretty=True</td>
      <td>❌ None</td>
      <td>⚠️ Missing in Go</td>
    </tr>
    <tr>
      <td>as_dict=False</td>
      <td>❌ None</td>
      <td>⚠️ Go returns struct</td>
    </tr>
  </tbody>
</table>

<h3 id="return-value-structure-mismatches">Return Value Structure Mismatches</h3>

<p><strong>History Return Value</strong></p>

<table>
  <thead>
    <tr>
      <th>Python</th>
      <th>Go</th>
      <th>Mismatch</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>pd.DataFrame</td>
      <td>[]models.Bar</td>
      <td>⚠️ DataFrame vs Slice</td>
    </tr>
    <tr>
      <td>Columns: Open, High, Low, Close, Adj Close, Volume</td>
      <td>Fields: Open, High, Low, Close, AdjClose, Volume</td>
      <td>⚠️ Adj Close vs AdjClose</td>
    </tr>
    <tr>
      <td>Columns: Dividends, Stock Splits</td>
      <td>Fields: Dividends, Splits</td>
      <td>⚠️ Stock Splits vs Splits</td>
    </tr>
    <tr>
      <td>Index: DatetimeIndex</td>
      <td>Field: Date time.Time</td>
      <td>⚠️ Index vs Field</td>
    </tr>
  </tbody>
</table>

<p><strong>Options Return Value</strong></p>

<table>
  <thead>
    <tr>
      <th>Python</th>
      <th>Go</th>
      <th>Mismatch</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>tuple of date strings</td>
      <td>[]time.Time</td>
      <td>⚠️ string vs time.Time</td>
    </tr>
    <tr>
      <td>OptionChain.calls → pd.DataFrame</td>
      <td>OptionChain.Calls → []Option</td>
      <td>⚠️ DataFrame vs Slice</td>
    </tr>
  </tbody>
</table>

<p><strong>Financials Return Value</strong></p>

<table>
  <thead>
    <tr>
      <th>Python</th>
      <th>Go</th>
      <th>Mismatch</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>pd.DataFrame (rows=fields, cols=dates)</td>
      <td>FinancialStatement (map[field][]items)</td>
      <td>⚠️ Different structure</td>
    </tr>
    <tr>
      <td>Index: camelCase field names</td>
      <td>Map keys: CamelCase</td>
      <td>✅ OK</td>
    </tr>
    <tr>
      <td>Columns: pd.DatetimeIndex</td>
      <td>Dates []time.Time</td>
      <td>⚠️ Different access method</td>
    </tr>
  </tbody>
</table>

<p><strong>FastInfo Return Value</strong></p>

<table>
  <thead>
    <tr>
      <th>Python Key</th>
      <th>Go Field</th>
      <th>Mismatch</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>currency</td>
      <td>Currency</td>
      <td>✅ OK</td>
    </tr>
    <tr>
      <td>quoteType</td>
      <td>QuoteType</td>
      <td>✅ OK</td>
    </tr>
    <tr>
      <td>lastPrice</td>
      <td>LastPrice</td>
      <td>✅ OK</td>
    </tr>
    <tr>
      <td>previousClose</td>
      <td>PreviousClose</td>
      <td>✅ OK</td>
    </tr>
    <tr>
      <td>regularMarketPreviousClose</td>
      <td>RegularMarketPreviousClose</td>
      <td>✅ OK</td>
    </tr>
    <tr>
      <td>fiftyDayAverage</td>
      <td>FiftyDayAverage</td>
      <td>✅ OK</td>
    </tr>
    <tr>
      <td>twoHundredDayAverage</td>
      <td>TwoHundredDayAverage</td>
      <td>✅ OK</td>
    </tr>
    <tr>
      <td>tenDayAverageVolume</td>
      <td>TenDayAverageVolume</td>
      <td>✅ OK</td>
    </tr>
    <tr>
      <td>threeMonthAverageVolume</td>
      <td>ThreeMonthAverageVolume</td>
      <td>✅ OK</td>
    </tr>
    <tr>
      <td>marketCap</td>
      <td>MarketCap</td>
      <td>✅ OK</td>
    </tr>
    <tr>
      <td>yearHigh</td>
      <td>YearHigh</td>
      <td>✅ OK</td>
    </tr>
    <tr>
      <td>yearLow</td>
      <td>YearLow</td>
      <td>✅ OK</td>
    </tr>
    <tr>
      <td>yearChange</td>
      <td>YearChange</td>
      <td>✅ OK</td>
    </tr>
  </tbody>
</table>

<h2 id="planning-corrections-for-mismatches">Planning Corrections for Mismatches</h2>

<p>Claude Code prioritized the mismatched parts and listed them in order of importance.</p>

<p><strong>High Priority (API Compatibility)</strong></p>

<ul>
  <li>Financials <code class="language-plaintext highlighter-rouge">freq</code> parameter: Need to unify “yearly” → “annual”
    <ul>
      <li>Python: <code class="language-plaintext highlighter-rouge">get_income_stmt(freq="yearly")</code> is the default</li>
      <li>Go: Currently uses “annual”</li>
      <li>Recommendation: Map “yearly” to “annual” in Go as well</li>
    </ul>
  </li>
  <li>Method Name Consistency
    <ul>
      <li><code class="language-plaintext highlighter-rouge">PriceTarget()</code> → <code class="language-plaintext highlighter-rouge">AnalystPriceTargets()</code> (Matches Python)</li>
      <li><code class="language-plaintext highlighter-rouge">EarningsEstimates()</code> → <code class="language-plaintext highlighter-rouge">EarningsEstimate()</code> (Singular)</li>
      <li><code class="language-plaintext highlighter-rouge">RevenueEstimates()</code> → <code class="language-plaintext highlighter-rouge">RevenueEstimate()</code> (Singular)</li>
    </ul>
  </li>
</ul>

<p><strong>Medium Priority (Convenience)</strong></p>

<ul>
  <li>Add History Parameters
    <ul>
      <li>Add <code class="language-plaintext highlighter-rouge">BackAdjust bool</code></li>
      <li>Add <code class="language-plaintext highlighter-rouge">Rounding bool</code></li>
    </ul>
  </li>
  <li>Bar Field Names
    <ul>
      <li>Consider adding <code class="language-plaintext highlighter-rouge">adj_close</code> or <code class="language-plaintext highlighter-rouge">adjclose</code> to JSON tags for <code class="language-plaintext highlighter-rouge">AdjClose</code></li>
      <li>Consider adding <code class="language-plaintext highlighter-rouge">StockSplits</code> (alias) for <code class="language-plaintext highlighter-rouge">Splits</code></li>
    </ul>
  </li>
</ul>

<p><strong>Low Priority (Language Conventions)</strong></p>

<ul>
  <li>Maintain Go Language Conventions
    <ul>
      <li>Keep CamelCase method names (Go Standard)</li>
      <li>Keep using Methods instead of Properties (Go Standard)</li>
      <li>Keep returning structs (Go has no DataFrame)</li>
    </ul>
  </li>
</ul>

<p>I confirmed that while core features mostly match, parameter values (freq=”yearly” vs “annual”) and some method names were inconsistent. Also, since the DataFrame structure provided by Python cannot be used in Go, I had to use Struct/Slice structures instead.</p>

<table>
  <thead>
    <tr>
      <th>Category</th>
      <th>Match</th>
      <th>Mismatch</th>
      <th>Needs Fix</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Method Names</td>
      <td>8</td>
      <td>6</td>
      <td>3 Recommended</td>
    </tr>
    <tr>
      <td>Parameter Names</td>
      <td>6</td>
      <td>6</td>
      <td>1 Mandatory</td>
    </tr>
    <tr>
      <td>Return Value Structure</td>
      <td>-</td>
      <td>4 types different</td>
      <td>Inevitable due to Go characteristics</td>
    </tr>
    <tr>
      <td>Field Names</td>
      <td>Mostly match</td>
      <td>2-3</td>
      <td>Optional</td>
    </tr>
  </tbody>
</table>

<h2 id="implementation-results">Implementation Results</h2>

<h3 id="summary-of-changes">Summary of Changes</h3>

<table>
  <thead>
    <tr>
      <th>Change</th>
      <th>File</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Support <code class="language-plaintext highlighter-rouge">freq="yearly"</code></td>
      <td>financials.go</td>
      <td>Maps “yearly” to “annual” to match Python yfinance</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">AnalystPriceTargets()</code></td>
      <td>analysis.go</td>
      <td>Matches Python’s <code class="language-plaintext highlighter-rouge">analyst_price_targets</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">EarningsEstimate()</code></td>
      <td>analysis.go</td>
      <td>Matches Python’s <code class="language-plaintext highlighter-rouge">earnings_estimate</code> (Singular)</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">RevenueEstimate()</code></td>
      <td>analysis.go</td>
      <td>Matches Python’s <code class="language-plaintext highlighter-rouge">revenue_estimate</code> (Singular)</td>
    </tr>
    <tr>
      <td>Add Tests</td>
      <td>financials_test.go</td>
      <td>Added <code class="language-plaintext highlighter-rouge">TestNormalizeFrequency</code></td>
    </tr>
  </tbody>
</table>

<h3 id="backward-compatibility">Backward Compatibility</h3>

<p>Existing methods were kept as deprecated aliases to ensure they continue to work.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">PriceTarget()</code> → Calls <code class="language-plaintext highlighter-rouge">AnalystPriceTargets()</code></li>
  <li><code class="language-plaintext highlighter-rouge">EarningsEstimates()</code> → Calls <code class="language-plaintext highlighter-rouge">EarningsEstimate()</code></li>
  <li><code class="language-plaintext highlighter-rouge">RevenueEstimates()</code> → Calls <code class="language-plaintext highlighter-rouge">RevenueEstimate()</code></li>
</ul>]]></content><author><name>Wonjoon</name></author><category term="dev" /><category term="go-yfinance" /><summary type="html"><![CDATA[The third post covering the story of building a Go version of the yahoo finance library based on the Python yfinance library using Claude Code.]]></summary></entry><entry xml:lang="ko"><title type="html">Claude Code로 Go의 Yahoo Finance 라이브러리 만들기 #2</title><link href="http://localhost:4000/2025/12/19/go-yfinance-1/" rel="alternate" type="text/html" title="Claude Code로 Go의 Yahoo Finance 라이브러리 만들기 #2" /><published>2025-12-19T00:00:00+09:00</published><updated>2025-12-19T00:00:00+09:00</updated><id>http://localhost:4000/2025/12/19/go-yfinance-1</id><content type="html" xml:base="http://localhost:4000/2025/12/19/go-yfinance-1/"><![CDATA[<h2 id="실용적-수준을-구현하기-전에-cycletls를-이용한-인증-우회-테스트를-해보자">실용적 수준을 구현하기 전에, CycleTLS를 이용한 인증 우회 테스트를 해보자.</h2>

<p><a href="https://wnjoon.github.io/2025/12/17/go-yfinance-0/">이전 포스팅 ‘Claude Code로 Go의 Yahoo Finance 라이브러리 만들기 #1’</a>에서 작성했던 것 처럼, Claude Code가 제시한 Go 기반의 yfinance 라이브러리는 크게 3단계의 Phase로 구성되어 있습니다.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>MVP (최소 실행 가능 제품)
- Phase 0 + Phase 1 = ~1,100줄
- 기본적인 가격 조회 가능

실용적 수준
- Phase 0~4 = ~2,300줄
- 대부분의 투자 분석 가능

Python yfinance 동등
- Phase 0~7 = ~3,500줄
- 거의 모든 기능 사용 가능
</code></pre></div></div>

<p>지난번에 MVP 단계를 구현했기 때문에, 이제는 실용적 단계의 구현을 요청하려고 했는데요. 그전에 과연 CycleTLS를 사용해서 Yahoo Finance 인증과정에서의 우회가 정상적으로 일어나고 있는지 먼저 확인해야할 것 같았습니다. Phase1에서 구현해준 샘플 코드에서는 애플(AAPL)이라는 단기 종목에 대한 조회만 하고 있었는데, 그것보다는 더 많은 양을 조회해봐야 할 것 같더라구요.</p>

<p>그래서 Gemini에게 아래와 같이 질문했습니다.</p>

<p><br /></p>

<p><em>👨🏻‍💻: CycleTLS를 사용해서 Yahoo Finance로의 호출이 정상적으로 우회되는지 확인하려면 최소 몇회 정도의 종목 조회를 동시에 호출해보면 좋을까?</em></p>

<p><em>🤖: … 동시 요청(Concurrency) 10개, 총 50개 조회로 시작해보세요. 모두 성공한다면 동시 요청을 20개, 30개로 늘리면서 429 에러가 뜨는 임계점을 찾으시면 됩니다.</em></p>

<p><br /></p>

<p>Gemini는 Yahoo Finance 입장에서 DDoS 공격이나 비정상적인 트래픽으로 간주할 수 있는 상황을 피하기 위해 동시 요청되는 갯수를 조절하라고 제안했습니다. 아마 작성하고 있는 코드가 하나의 어플리케이션이라고 인식하는 것 같았습니다.</p>

<p>저의 목적은 Go로 Yahoo Finance를 호출할 수 있는 라이브러리를 구현하는 것이기 때문에, 도구 자체로의 기능만 제대로 구현하면 된다고 생각했습니다. 즉 Yahoo Finance에서 오류를 받지 않도록 하는 것은 이 라이브러리를 사용해서 어플리케이션을 구현하는 곳에서 제어할 문제고, 저는 단순히 호출하는 방식만 제대로 구현하면 되는 것이었습니다. 다만 CycleTLS를 사용해서 Yahoo Finance로의 호출을 우회해주는 기능만 추가하면 된다고 생각했죠.</p>

<p>그래서 Gemini가 열심히 작성해준 답변을 살짝 무시하고, 최대 110개의 종목을 goroutine으로 동시에 호출해보았습니다. 이정도면 무리되지 않는 선에서 동시요청을 통한 정상적인 우회가 이루어지는지 확인할 수 있다고 생각했습니다. 결과는 아래와 같았습니다. 오류도 나지 않았고, 그렇게 좋지 않는 로컬의 성능(M3 Air, 16GB RAM)에서도 꽤나 준수한 속도로 동작한 것 같습니다.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>Parallel] Batch call completed <span class="k">in </span>3.332168875s <span class="k">for </span>110 symbols <span class="o">(</span>avg: 30.292444ms per symbol<span class="o">)</span>
</code></pre></div></div>

<p>위에서도 적었듯이, 몇개의 요청에 대해서 Yahoo Finance가 429 에러를 반환하는지를 확인하는 것은 저의 범위가 아니라고 생각했습니다. 그래서 더이상 테스트는 하지 않았는데요, 향후에는 110개의 종목을 짧은 시간차를 두고 여러번 호출하는 방식으로 확인해보는 것도 나쁘지 않을 것 같았습니다.</p>

<h2 id="구현-계획-세우기">구현 계획 세우기</h2>

<p>실용적 수준 카테고리는 세부적으로 3개의 단계로 구성됩니다.</p>

<p><strong>Phase 2: Options (옵션 데이터)</strong></p>

<ul>
  <li>API 엔드포인트: query2.finance.yahoo.com/v7/finance/options/{symbol}</li>
  <li>구현 항목
    <ul>
      <li>Options(): 옵션 체인 조회 (콜/풋)</li>
      <li>ExpirationDates(): 만기일 목록</li>
      <li>옵션 모델 구조체: Call, Put, OptionChain</li>
    </ul>
  </li>
  <li>예상 메서드
    <ul>
      <li>t.Options(): 모든 옵션 체인</li>
      <li>t.OptionsAtExpiry(date): 특정 만기일 옵션</li>
      <li>t.ExpirationDates(): 만기일 목록</li>
    </ul>
  </li>
</ul>

<p><strong>Phase 3: Financials (재무제표)</strong></p>

<ul>
  <li>API 엔드포인트: query2.finance.yahoo.com/ws/fundamentals-timeseries/v1/finance/timeseries/{symbol}</li>
  <li>구현 항목
    <ul>
      <li>IncomeStatement(): 손익계산서</li>
      <li>BalanceSheet(): 재무상태표</li>
      <li>CashFlow(): 현금흐름표</li>
      <li>Annual / Quarterly 지원</li>
    </ul>
  </li>
  <li>예상 메서드
    <ul>
      <li>t.IncomeStatement(annual bool): 손익계산서</li>
      <li>t.BalanceSheet(annual bool): 재무상태표</li>
      <li>t.CashFlow(annual bool): 현금흐름표</li>
      <li>t.Financials(): 전체 재무제표</li>
    </ul>
  </li>
</ul>

<p><strong>Phase 4: Analysis (분석 데이터)</strong></p>

<ul>
  <li>API 엔드포인트: QuoteSummary API의 분석 모듈 사용
    <ul>
      <li>recommendationTrend, earningsTrend, earningsHistory 등</li>
    </ul>
  </li>
  <li>구현 항목
    <ul>
      <li>Recommendations(): 애널리스트 추천</li>
      <li>PriceTargets(): 목표가</li>
      <li>EarningsEstimate(): 실적 예상</li>
      <li>RevenueEstimate(): 매출 예상</li>
      <li>GrowthEstimates(): 성장률 예상</li>
    </ul>
  </li>
  <li>예상 메서드
    <ul>
      <li>t.Recommendations(): 매수/매도/보유 추천</li>
      <li>t.PriceTargets(): 목표가 (현재/평균/고/저)</li>
      <li>t.EarningsEstimate(): EPS 예상</li>
      <li>t.RevenueEstimate(): 매출 예상</li>
      <li>t.EarningsDates(): 실적 발표일</li>
    </ul>
  </li>
</ul>

<p>각각이 종속관계를 갖지 않는 내용이었기 때문에, 순서대로 개발해달라고 요청했습니다. 각 단계별로 세부적인 내용은 아래와 같습니다.</p>

<ol>
  <li>Phase 2 (Options): 단일 API 엔드포인트로 비교적 간단</li>
  <li>Phase 3 (Financials): Timeseries API 파싱이 복잡하지만 핵심 기능</li>
  <li>Phase 4 (Analysis): QuoteSummary 모듈 확장으로 Info 코드 재사용 가능</li>
</ol>

<p>그리고 지난번 포스팅에서 MVP 수준으로 개발을 요청할때에는, 제가 테스트 요구사항을 정확하게 명시하지 않았더라구요. 그러다보니 Claude Code가 제가 생각했던 것보단 간단한 수준의 테스트만 작성하고 넘어갔습니다. 그래서 이번에는 좀더 테스트를 꼼꼼하게 하고, 정확하게 구현되는지 하나씩 꼭 확인해달라고 요청했습니다.</p>

<p><br /></p>

<p><em>👨🏻‍💻: … STATUS.md에 진행과정 정확하게 표시해주고, 각 기능별로 테스트 꼼꼼하게 해서 정확하게 구현이 완료되는지 확인하면서 진행해줘.</em></p>

<p><br /></p>

<h2 id="todo-목록">TODO 목록</h2>

<p>Claude Code에게 각 Phase별로 구현해야 할 목록을 꼼꼼하게 파악하고, 각 기능을 주제별로 묶어서 미리 TODO에 작성해서 단계별로 처리하고 검사하도록 요청했습니다. 아래는 각 Phase별로 Claude Code가 작성하고 관리한 TODO 목록입니다.</p>

<p><strong>Phase 2: Options</strong></p>

<ul>
  <li>Create phase2/options branch from main</li>
  <li>Implement Option models (option.go)</li>
  <li>Implement Options methods in ticker package</li>
  <li>Write unit tests for Options</li>
  <li>Test with live API data</li>
  <li>Merge to main and update STATUS.md</li>
</ul>

<p><strong>Phase 3: Financials</strong></p>

<ul>
  <li>Create phase3/financials branch from main</li>
  <li>Research Yahoo Finance Financials API structure</li>
  <li>Implement Financial models</li>
  <li>Implement Financials methods in ticker package</li>
  <li>Write unit tests for Financials</li>
  <li>Test with live API data</li>
  <li>Merge to main and update STATUS.md</li>
</ul>

<h2 id="구현-결과">구현 결과</h2>

<h3 id="phase-2-options">Phase 2: Options</h3>

<p><strong>구현 내용</strong></p>

<table>
  <thead>
    <tr>
      <th>항목</th>
      <th>파일</th>
      <th>설명</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Option 모델</td>
      <td><code class="language-plaintext highlighter-rouge">pkg/models/option.go</code></td>
      <td>Option, OptionQuote, OptionChain 구조체</td>
    </tr>
    <tr>
      <td>Options 메서드</td>
      <td><code class="language-plaintext highlighter-rouge">pkg/ticker/options.go</code></td>
      <td>Options(), OptionChain(), Strikes() 등</td>
    </tr>
    <tr>
      <td>유닛 테스트</td>
      <td><code class="language-plaintext highlighter-rouge">pkg/ticker/options_test.go</code></td>
      <td>캐시 및 구조체 테스트</td>
    </tr>
  </tbody>
</table>

<p><strong>사용 예시</strong></p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">t</span><span class="p">,</span> <span class="n">_</span> <span class="o">:=</span> <span class="n">ticker</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="s">"AAPL"</span><span class="p">)</span>
<span class="k">defer</span> <span class="n">t</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>

<span class="c">// 만기일 목록</span>
<span class="n">expirations</span><span class="p">,</span> <span class="n">_</span> <span class="o">:=</span> <span class="n">t</span><span class="o">.</span><span class="n">Options</span><span class="p">()</span>

<span class="c">// 옵션 체인 (가장 가까운 만기)</span>
<span class="n">chain</span><span class="p">,</span> <span class="n">_</span> <span class="o">:=</span> <span class="n">t</span><span class="o">.</span><span class="n">OptionChain</span><span class="p">(</span><span class="s">""</span><span class="p">)</span>

<span class="c">// 특정 만기일 옵션 체인</span>
<span class="n">chain</span><span class="p">,</span> <span class="n">_</span> <span class="o">:=</span> <span class="n">t</span><span class="o">.</span><span class="n">OptionChain</span><span class="p">(</span><span class="s">"2025-12-26"</span><span class="p">)</span>

<span class="c">// 행사가 목록</span>
<span class="n">strikes</span><span class="p">,</span> <span class="n">_</span> <span class="o">:=</span> <span class="n">t</span><span class="o">.</span><span class="n">Strikes</span><span class="p">()</span>
</code></pre></div></div>

<p><strong>이슈 사항</strong></p>

<p>개발 중간에 아래와 같은 이슈사항이 발생했습니다.</p>

<p><br /></p>

<p><em>🤖: <code class="language-plaintext highlighter-rouge">options.go</code>에서 Underlying이 이제 <code class="language-plaintext highlighter-rouge">*models.OptionQuote</code> 타입이어야 합니다. 코드를 확인해보니 이미 <code class="language-plaintext highlighter-rouge">&amp;result.Quote</code>를 사용하고 있는데, <code class="language-plaintext highlighter-rouge">Quote</code> 타입이 <code class="language-plaintext highlighter-rouge">OptionQuote</code>로 변경되었으므로 자동으로 호환됩니다. 테스트 파일도 업데이트하고 <code class="language-plaintext highlighter-rouge">cmd/test_options/main.go</code>도 수정해야 합니다.</em></p>

<p><br /></p>

<p>기능을 추가하면서, 새로운 타입을 기존 코드에서 사용하던 타입에 적용해야 하는 부분이 생겼습니다. 이 부분도 Claude Code가 정확히 판단하고 수정했습니다.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">pkg/models/option.go</code> - OptionQuote 타입 추가 완료
    <ul>
      <li><code class="language-plaintext highlighter-rouge">OptionChain.Underlying</code>이 <code class="language-plaintext highlighter-rouge">*OptionQuote</code> 타입으로 변경됨</li>
      <li><code class="language-plaintext highlighter-rouge">OptionChainResponse.Quote</code>도 <code class="language-plaintext highlighter-rouge">OptionQuote</code> 타입으로 변경됨</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">pkg/ticker/options.go</code> - 자동 호환
    <ul>
      <li><code class="language-plaintext highlighter-rouge">&amp;result.Quote</code>가 <code class="language-plaintext highlighter-rouge">*models.OptionQuote</code>를 반환하므로 수정 불필요</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">cmd/test_options/main.go</code> - 테스트 후 임시 파일이라 삭제됨</li>
</ul>

<p><strong>라이브 테스트 결과</strong></p>

<ul>
  <li>Underlying Price: $271.84</li>
  <li>Calls: 99</li>
  <li>Puts: 91</li>
</ul>

<h3 id="phase-3-financials">Phase 3: Financials</h3>

<p><strong>새로 추가된 파일</strong></p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">pkg/models/financials.go</code>: 재무제표 데이터 모델</li>
  <li><code class="language-plaintext highlighter-rouge">pkg/ticker/financials.go</code>: 재무제표 API 메서드</li>
  <li><code class="language-plaintext highlighter-rouge">pkg/ticker/financials_test.go</code>: 유닛 테스트</li>
</ul>

<p><strong>수정된 파일</strong></p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">internal/endpoints/endpoints.go</code>: 재무제표 키 상수 추가</li>
  <li><code class="language-plaintext highlighter-rouge">pkg/ticker/ticker.go</code>: financialsCache 필드 추가</li>
</ul>

<p><strong>구현된 API 메서드</strong></p>

<table>
  <thead>
    <tr>
      <th>메서드</th>
      <th>설명</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">IncomeStatement(freq)</code></td>
      <td>손익계산서 (annual/quarterly)</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">BalanceSheet(freq)</code></td>
      <td>대차대조표 (annual/quarterly)</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">CashFlow(freq)</code></td>
      <td>현금흐름표 (annual/quarterly)</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">FinancialsJSON()</code></td>
      <td>디버깅용 Raw JSON</td>
    </tr>
  </tbody>
</table>

<p><strong>라이브 테스트 결과 (AAPL)</strong></p>

<ul>
  <li>Income Statement: 5 periods, 26 fields</li>
  <li>Total Revenue: $416.16B</li>
  <li>Net Income: $112.01B</li>
  <li>Diluted EPS: $7.46</li>
  <li>Balance Sheet: 4 periods, 34 fields</li>
  <li>Total Assets: $359.24B</li>
  <li>Total Debt: $98.66B</li>
  <li>Cash Flow: 5 periods, 38 fields</li>
  <li>Operating Cash Flow: $111.48B</li>
  <li>Free Cash Flow: $98.77B</li>
</ul>

<h3 id="phase-4-analysis">Phase 4: Analysis</h3>

<p><strong>새로 추가된 파일</strong></p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">pkg/models/analysis.go</code>: 분석 데이터 모델 (116 lines)</li>
  <li><code class="language-plaintext highlighter-rouge">pkg/ticker/analysis.go</code>: 분석 API 메서드 (664 lines)</li>
  <li><code class="language-plaintext highlighter-rouge">pkg/ticker/analysis_test.go</code>: 유닛 테스트 (196 lines)</li>
</ul>

<p><strong>수정된 파일</strong></p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">pkg/ticker/ticker.go</code>: analysisCache 필드 추가</li>
</ul>

<p><strong>구현된 API 메서드</strong></p>

<table>
  <thead>
    <tr>
      <th>메서드</th>
      <th>설명</th>
      <th>소스 모듈</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Recommendations()</code></td>
      <td>애널리스트 추천</td>
      <td>recommendationTrend</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">PriceTarget()</code></td>
      <td>목표가</td>
      <td>financialData</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">EarningsEstimates()</code></td>
      <td>실적 예상</td>
      <td>earningsTrend</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">RevenueEstimates()</code></td>
      <td>매출 예상</td>
      <td>earningsTrend</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">EPSTrend()</code></td>
      <td>EPS 추이</td>
      <td>earningsTrend</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">EPSRevisions()</code></td>
      <td>EPS 수정</td>
      <td>earningsTrend</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">EarningsHistory()</code></td>
      <td>실적 이력</td>
      <td>earningsHistory</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">GrowthEstimates()</code></td>
      <td>성장 예상</td>
      <td>industryTrend, sectorTrend, indexTrend</td>
    </tr>
  </tbody>
</table>

<p><strong>라이브 테스트 결과 (AAPL)</strong></p>

<ul>
  <li>Recommendations: 4 periods (StrongBuy=5, Buy=24, Hold=15, Sell=1, StrongSell=3)</li>
  <li>Price Targets: Current=$272.19, Mean=$287.71, High=$350, Low=$215</li>
  <li>Earnings Estimates: 4 periods (0q, +1q, 0y, +1y)</li>
  <li>Revenue Estimates: 4 periods with growth rates</li>
  <li>Earnings History: 4 quarters with surprise %</li>
</ul>

<p><strong>계획 대비 변경사항</strong></p>

<p>원래 계획</p>

<ul>
  <li>Analyst Recommendations ✅</li>
  <li>Price Targets ✅</li>
  <li>Earnings Estimates ✅</li>
  <li>Revenue Estimates ✅</li>
  <li>EPS Trend/Revisions ✅</li>
  <li>Growth Estimates ✅</li>
</ul>

<p>추가 구현</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">EarningsHistory()</code>: 과거 실적 대비 실제 결과 (surprise %) 제공</li>
  <li>캐싱 시스템: earningsTrend 데이터를 한 번만 fetch하여 여러 메서드에서 재사용</li>
</ul>

<p>구조적 변경</p>

<ul>
  <li>초기 계획은 별도의 API 엔드포인트를 사용할 것으로 예상했으나, 실제로는 <code class="language-plaintext highlighter-rouge">quoteSummary</code> API의 여러 모듈을 조합하여 구현</li>
  <li><code class="language-plaintext highlighter-rouge">getFloat</code> → <code class="language-plaintext highlighter-rouge">getFloat64</code> 함수명 통일 (<code class="language-plaintext highlighter-rouge">info.go</code>와 충돌 방지)</li>
</ul>

<h2 id="yfinance와의-중간-검증">yfinance와의 중간 검증</h2>

<p>지금까지 개발된 내용이 yfinance에서 제공하는 기능 및 방법과 동일하게 구현되어 있는지 Claude Code에게 확인해보았습니다.</p>

<p><br /></p>

<p><em>👨🏻‍💻: 지금까지 구현된 모든 Phase들이 기존에 Python 기반의 yfinance에서 제공하는 모든 기능들을 정확하게 구현하고 있는지 다시한번 꼼꼼하게 확인해줘. ultrathink. 테스트가 필요하다면 진행해도 좋아.</em></p>

<p><br /></p>

<h3 id="검증-계획">검증 계획</h3>

<p>Claude Code가 세운 TODO 목록입니다. 각 Phase별로 테스트를 진행하고, 최종적으로 Go Test를 진행한 후 차이점이 존재하는지 분석하는 순으로 진행합니다.</p>

<ul>
  <li>Compare Phase 0 (Foundation): HTTP Client, Auth, Errors, Config</li>
  <li>Compare Phase 1 (Core Data): Quote, History, Info</li>
  <li>Compare Phase 2 (Options): Options chain and expiration</li>
  <li>Compare Phase 3 (Financials): Income, Balance, CashFlow</li>
  <li>Compare Phase 4 (Analysis): Recommendations, Price Targets, Estimates</li>
  <li>Run Go tests to verify all implementations</li>
  <li>Report findings and identify any gaps</li>
</ul>

<h3 id="검증-결과">검증 결과</h3>

<p><strong>Phase 0: Foundation</strong> (구현 완료)</p>

<table>
  <thead>
    <tr>
      <th>Python yfinance</th>
      <th>Go 구현</th>
      <th>상태</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>curl_cffi TLS fingerprint</td>
      <td>CycleTLS (Chrome JA3)</td>
      <td>✅</td>
    </tr>
    <tr>
      <td>Cookie/Crumb auth</td>
      <td>AuthManager (Basic + CSRF)</td>
      <td>✅</td>
    </tr>
    <tr>
      <td>Proxy 설정</td>
      <td>Config.SetProxy()</td>
      <td>✅</td>
    </tr>
    <tr>
      <td>Timeout 설정</td>
      <td>Config.SetTimeout()</td>
      <td>✅</td>
    </tr>
    <tr>
      <td>Error 처리</td>
      <td>YFError with codes</td>
      <td>✅</td>
    </tr>
  </tbody>
</table>

<p><strong>Phase 1: Core Data</strong> (구현 완료)</p>

<table>
  <thead>
    <tr>
      <th>Python 메서드</th>
      <th>Go 메서드</th>
      <th>상태</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.info</code></td>
      <td><code class="language-plaintext highlighter-rouge">Info()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.fast_info</code></td>
      <td><code class="language-plaintext highlighter-rouge">FastInfo()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.history()</code></td>
      <td><code class="language-plaintext highlighter-rouge">History()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.dividends</code></td>
      <td><code class="language-plaintext highlighter-rouge">Dividends()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.splits</code></td>
      <td><code class="language-plaintext highlighter-rouge">Splits()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.actions</code></td>
      <td><code class="language-plaintext highlighter-rouge">Actions()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Quote data</code></td>
      <td><code class="language-plaintext highlighter-rouge">Quote()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">History metadata</code></td>
      <td><code class="language-plaintext highlighter-rouge">GetHistoryMetadata()</code></td>
      <td>✅</td>
    </tr>
  </tbody>
</table>

<p><strong>Phase 2: Options</strong> (구현 완료)</p>

<table>
  <thead>
    <tr>
      <th>Python 메서드</th>
      <th>Go 메서드</th>
      <th>상태</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.options</code></td>
      <td><code class="language-plaintext highlighter-rouge">Options()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.option_chain()</code></td>
      <td><code class="language-plaintext highlighter-rouge">OptionChain()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td>Expiration dates</td>
      <td><code class="language-plaintext highlighter-rouge">OptionChainAtExpiry()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td>Strike prices</td>
      <td><code class="language-plaintext highlighter-rouge">Strikes()</code></td>
      <td>✅</td>
    </tr>
  </tbody>
</table>

<p><strong>Phase 3: Financials</strong> (구현 완료)</p>

<table>
  <thead>
    <tr>
      <th>Python 메서드</th>
      <th>Go 메서드</th>
      <th>상태</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.income_stmt</code></td>
      <td><code class="language-plaintext highlighter-rouge">IncomeStatement("annual")</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.quarterly_income_stmt</code></td>
      <td><code class="language-plaintext highlighter-rouge">IncomeStatement("quarterly")</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.balance_sheet</code></td>
      <td><code class="language-plaintext highlighter-rouge">BalanceSheet("annual")</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.quarterly_balance_sheet</code></td>
      <td><code class="language-plaintext highlighter-rouge">BalanceSheet("quarterly")</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.cash_flow</code></td>
      <td><code class="language-plaintext highlighter-rouge">CashFlow("annual")</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.quarterly_cash_flow</code></td>
      <td><code class="language-plaintext highlighter-rouge">CashFlow("quarterly")</code></td>
      <td>✅</td>
    </tr>
  </tbody>
</table>

<ul>
  <li>참고: Python의 <code class="language-plaintext highlighter-rouge">ttm_income_stmt</code>, <code class="language-plaintext highlighter-rouge">ttm_cash_flow</code> (trailing 12 months)는 Go에서 <code class="language-plaintext highlighter-rouge">freq="trailing"</code> 파라미터로 지원</li>
</ul>

<p><strong>Phase 4: Analysis</strong> (구현 완료)</p>

<table>
  <thead>
    <tr>
      <th>Python 메서드</th>
      <th>Go 메서드</th>
      <th>상태</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.recommendations</code></td>
      <td><code class="language-plaintext highlighter-rouge">Recommendations()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.analyst_price_targets</code></td>
      <td><code class="language-plaintext highlighter-rouge">PriceTarget()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.earnings_estimate</code></td>
      <td><code class="language-plaintext highlighter-rouge">EarningsEstimates()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.revenue_estimate</code></td>
      <td><code class="language-plaintext highlighter-rouge">RevenueEstimates()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.eps_trend</code></td>
      <td><code class="language-plaintext highlighter-rouge">EPSTrend()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.eps_revisions</code></td>
      <td><code class="language-plaintext highlighter-rouge">EPSRevisions()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.earnings_history</code></td>
      <td><code class="language-plaintext highlighter-rouge">EarningsHistory()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.growth_estimates</code></td>
      <td><code class="language-plaintext highlighter-rouge">GrowthEstimates()</code></td>
      <td>✅</td>
    </tr>
  </tbody>
</table>

<p><strong>미구현 기능 (Phase 5 이후 예정)</strong></p>

<table>
  <thead>
    <tr>
      <th>Python 기능</th>
      <th>Phase</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>major_holders</td>
      <td>Phase 5</td>
    </tr>
    <tr>
      <td>institutional_holders</td>
      <td>Phase 5</td>
    </tr>
    <tr>
      <td>mutualfund_holders</td>
      <td>Phase 5</td>
    </tr>
    <tr>
      <td>insider_transactions</td>
      <td>Phase 5</td>
    </tr>
    <tr>
      <td>insider_purchases</td>
      <td>Phase 5</td>
    </tr>
    <tr>
      <td>insider_roster_holders</td>
      <td>Phase 5</td>
    </tr>
    <tr>
      <td>calendar</td>
      <td>Phase 5</td>
    </tr>
    <tr>
      <td>sustainability</td>
      <td>Phase 9</td>
    </tr>
    <tr>
      <td>isin</td>
      <td>Phase 9</td>
    </tr>
    <tr>
      <td>news</td>
      <td>Phase 9</td>
    </tr>
    <tr>
      <td>earnings_dates</td>
      <td>Phase 9</td>
    </tr>
    <tr>
      <td>upgrades_downgrades</td>
      <td>Phase 4 확장 가능</td>
    </tr>
    <tr>
      <td>sec_filings</td>
      <td>Phase 9</td>
    </tr>
    <tr>
      <td>shares / shares_full</td>
      <td>Phase 5</td>
    </tr>
    <tr>
      <td>capital_gains</td>
      <td>Phase 1 확장 가능</td>
    </tr>
    <tr>
      <td>funds_data</td>
      <td>Phase 9</td>
    </tr>
    <tr>
      <td>live() WebSocket</td>
      <td>Phase 8</td>
    </tr>
  </tbody>
</table>

<h3 id="평가">평가</h3>

<ul>
  <li>모든 핵심 기능(Quote, History, Options, Financials, Analysis) 완벽 구현</li>
  <li>Python과 동일한 API 엔드포인트 사용</li>
  <li>캐싱 전략 일관성 있게 적용</li>
  <li>적절한 에러 처리 및 타입 안전성</li>
  <li>38개 단위 테스트 모두 통과</li>
</ul>

<h3 id="개선-가능-사항">개선 가능 사항</h3>

<ul>
  <li>upgrades_downgrades: Python에서 <code class="language-plaintext highlighter-rouge">quote.py</code>의 <code class="language-plaintext highlighter-rouge">_quote</code> 데이터에서 가져옴 → Phase 4에 추가 가능</li>
  <li>capital_gains: History API에서 이미 데이터 수신 중, 별도 메서드 추가 가능</li>
  <li>TTM(Trailing Twelve Months) 재무제표: 현재 <code class="language-plaintext highlighter-rouge">freq="trailing</code> 지원됨</li>
</ul>]]></content><author><name>Wonjoon</name></author><category term="dev" /><category term="go-yfinance" /><summary type="html"><![CDATA[Claude Code를 활용해서 python 버전의 yfinance 라이브러리를 기반으로 go 버전의 yahoo finance 라이브러리를 만들어가는 이야기를 담은 두번째 포스팅입니다.]]></summary></entry><entry xml:lang="en"><title type="html">Building a Go Yahoo Finance Library with Claude Code #2</title><link href="http://localhost:4000/2025/12/19/go-yfinance-1-en/" rel="alternate" type="text/html" title="Building a Go Yahoo Finance Library with Claude Code #2" /><published>2025-12-19T00:00:00+09:00</published><updated>2025-12-19T00:00:00+09:00</updated><id>http://localhost:4000/2025/12/19/go-yfinance-1-en</id><content type="html" xml:base="http://localhost:4000/2025/12/19/go-yfinance-1-en/"><![CDATA[<h2 id="before-implementing-the-practical-level-lets-test-authentication-bypass-using-cycletls">Before implementing the practical level, let’s test authentication bypass using CycleTLS.</h2>

<p>As written in the <a href="https://wnjoon.github.io/2025/12/17/go-yfinance-0-en/">previous post ‘Building a Go Yahoo Finance Library with Claude Code #1’</a>, the Go-based yfinance library proposed by Claude Code consists of three major phases.</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>MVP (Minimum Viable Product)
- Phase 0 + Phase 1 = ~1,100 lines
- Basic price lookup available

Practical Level
- Phase 0~4 = ~2,300 lines
- Most investment analysis available

Python yfinance Parity
- Phase 0~7 = ~3,500 lines
- Almost all features available
</code></pre></div></div>

<p>Since we implemented the MVP stage last time, I intended to request the implementation of the practical stage now. However, before that, I needed to confirm whether the bypass process in Yahoo Finance authentication using CycleTLS was working correctly. The sample code implemented in Phase 1 only queried a single ticker, Apple (AAPL). I felt it was necessary to test querying a larger volume to ensure stability.</p>

<p>So, I asked Gemini the following:</p>

<p><br /></p>

<p><em>👨🏻‍💻: To verify if calls to Yahoo Finance using CycleTLS are being successfully bypassed, what would be the minimum number of simultaneous ticker queries I should try?</em></p>

<p><em>🤖: … Start with 10 concurrent requests and a total of 50 queries. If all succeed, increase the concurrency to 20 or 30 to find the threshold where 429 errors occur.</em></p>

<p><br /></p>

<p>Gemini suggested adjusting the number of concurrent requests to avoid situations where Yahoo Finance might consider the traffic as a DDoS attack or abnormal activity. It seemed to perceive the code I was writing as a single application.</p>

<p>Since my goal is to implement a library that can call Yahoo Finance in Go, I believed I only needed to implement the function of the tool itself correctly. In other words, avoiding errors from Yahoo Finance is a control issue for the application that uses this library, and I simply needed to implement the calling method correctly. I just needed to add the function to bypass calls to Yahoo Finance using CycleTLS.</p>

<p>So, I decided to slightly disregard Gemini’s well-crafted advice and tried calling up to 110 tickers simultaneously using goroutines. I thought this would be enough to verify if the bypass was working normally through concurrent requests without overloading the system. The results were as follows. No errors occurred, and it operated at a fairly decent speed even on a local environment with modest performance (M3 Air, 16GB RAM).</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>Parallel] Batch call completed <span class="k">in </span>3.332168875s <span class="k">for </span>110 symbols <span class="o">(</span>avg: 30.292444ms per symbol<span class="o">)</span>
</code></pre></div></div>

<p>As mentioned above, verifying how many requests trigger a 429 error from Yahoo Finance was not within my scope. Therefore, I did not perform further testing. However, in the future, it might not be a bad idea to verify this by calling 110 tickers multiple times with short time intervals.</p>

<h2 id="establishing-the-implementation-plan">Establishing the Implementation Plan</h2>

<p>The “Practical Level” category is detailed into three specific phases.</p>

<p><strong>Phase 2: Options (Option Data)</strong></p>

<ul>
  <li>API Endpoint: <code class="language-plaintext highlighter-rouge">query2.finance.yahoo.com/v7/finance/options/{symbol}</code></li>
  <li>Implementation Items
    <ul>
      <li><code class="language-plaintext highlighter-rouge">Options()</code>: Option chain lookup (Call/Put)</li>
      <li><code class="language-plaintext highlighter-rouge">ExpirationDates()</code>: List of expiration dates</li>
      <li>Option Model Structs: Call, Put, OptionChain</li>
    </ul>
  </li>
  <li>Expected Methods
    <ul>
      <li><code class="language-plaintext highlighter-rouge">t.Options()</code>: All option chains</li>
      <li><code class="language-plaintext highlighter-rouge">t.OptionsAtExpiry(date)</code>: Option chain for a specific expiration date</li>
      <li><code class="language-plaintext highlighter-rouge">t.ExpirationDates()</code>: List of expiration dates</li>
    </ul>
  </li>
</ul>

<p><strong>Phase 3: Financials (Financial Statements)</strong></p>

<ul>
  <li>API Endpoint: <code class="language-plaintext highlighter-rouge">query2.finance.yahoo.com/ws/fundamentals-timeseries/v1/finance/timeseries/{symbol}</code></li>
  <li>Implementation Items
    <ul>
      <li><code class="language-plaintext highlighter-rouge">IncomeStatement()</code>: Income Statement</li>
      <li><code class="language-plaintext highlighter-rouge">BalanceSheet()</code>: Balance Sheet</li>
      <li><code class="language-plaintext highlighter-rouge">CashFlow()</code>: Cash Flow Statement</li>
      <li>Annual / Quarterly support</li>
    </ul>
  </li>
  <li>Expected Methods
    <ul>
      <li><code class="language-plaintext highlighter-rouge">t.IncomeStatement(annual bool)</code></li>
      <li><code class="language-plaintext highlighter-rouge">t.BalanceSheet(annual bool)</code></li>
      <li><code class="language-plaintext highlighter-rouge">t.CashFlow(annual bool)</code></li>
      <li><code class="language-plaintext highlighter-rouge">t.Financials()</code>: All financial statements</li>
    </ul>
  </li>
</ul>

<p><strong>Phase 4: Analysis (Analysis Data)</strong></p>

<ul>
  <li>API Endpoint: Uses analysis modules from QuoteSummary API
    <ul>
      <li><code class="language-plaintext highlighter-rouge">recommendationTrend</code>, <code class="language-plaintext highlighter-rouge">earningsTrend</code>, <code class="language-plaintext highlighter-rouge">earningsHistory</code>, etc.</li>
    </ul>
  </li>
  <li>Implementation Items
    <ul>
      <li><code class="language-plaintext highlighter-rouge">Recommendations()</code>: Analyst recommendations</li>
      <li><code class="language-plaintext highlighter-rouge">PriceTargets()</code>: Price targets</li>
      <li><code class="language-plaintext highlighter-rouge">EarningsEstimate()</code>: Earnings estimates</li>
      <li><code class="language-plaintext highlighter-rouge">RevenueEstimate()</code>: Revenue estimates</li>
      <li><code class="language-plaintext highlighter-rouge">GrowthEstimates()</code>: Growth rate estimates</li>
    </ul>
  </li>
  <li>Expected Methods
    <ul>
      <li><code class="language-plaintext highlighter-rouge">t.Recommendations()</code>: Buy/Sell/Hold recommendations</li>
      <li><code class="language-plaintext highlighter-rouge">t.PriceTargets()</code>: Price targets (Current/Mean/High/Low)</li>
      <li><code class="language-plaintext highlighter-rouge">t.EarningsEstimate()</code>: EPS estimates</li>
      <li><code class="language-plaintext highlighter-rouge">t.RevenueEstimate()</code>: Revenue estimates</li>
      <li><code class="language-plaintext highlighter-rouge">t.EarningsDates()</code>: Earnings announcement dates</li>
    </ul>
  </li>
</ul>

<p>Since these phases do not have dependencies on each other, I requested development in sequential order.</p>

<ol>
  <li><strong>Phase 2 (Options):</strong> Relatively simple with a single API endpoint.</li>
  <li><strong>Phase 3 (Financials):</strong> Parsing the Timeseries API is complex but it’s a core feature.</li>
  <li><strong>Phase 4 (Analysis):</strong> Reusing Info code by extending the QuoteSummary module.</li>
</ol>

<p>Also, when I requested the MVP development in the last post, I hadn’t explicitly specified testing requirements. Consequently, Claude Code only wrote simple tests. This time, I requested thorough testing to ensure each function is implemented correctly.</p>

<p><br /></p>

<p><em>👨🏻‍💻: … Please explicitly mark the progress in STATUS.md, and for each function, perform thorough testing to ensure the implementation is complete and accurate as you proceed.</em></p>

<p><br /></p>

<h2 id="todo-list">TODO List</h2>

<p>I asked Claude Code to carefully identify the list of items to implement for each Phase, group the functions by topic, write them in the TODO list in advance, and process/check them step by step. Below is the TODO list drafted and managed by Claude Code for each Phase.</p>

<p><strong>Phase 2: Options</strong></p>

<ul>
  <li>Create phase2/options branch from main</li>
  <li>Implement Option models (option.go)</li>
  <li>Implement Options methods in ticker package</li>
  <li>Write unit tests for Options</li>
  <li>Test with live API data</li>
  <li>Merge to main and update STATUS.md</li>
</ul>

<p><strong>Phase 3: Financials</strong></p>

<ul>
  <li>Create phase3/financials branch from main</li>
  <li>Research Yahoo Finance Financials API structure</li>
  <li>Implement Financial models</li>
  <li>Implement Financials methods in ticker package</li>
  <li>Write unit tests for Financials</li>
  <li>Test with live API data</li>
  <li>Merge to main and update STATUS.md</li>
</ul>

<h2 id="implementation-results">Implementation Results</h2>

<h3 id="phase-2-options">Phase 2: Options</h3>

<p><strong>Implementation Details</strong></p>

<table>
  <thead>
    <tr>
      <th>Item</th>
      <th>File</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Option Models</td>
      <td><code class="language-plaintext highlighter-rouge">pkg/models/option.go</code></td>
      <td>Option, OptionQuote, OptionChain structs</td>
    </tr>
    <tr>
      <td>Options Methods</td>
      <td><code class="language-plaintext highlighter-rouge">pkg/ticker/options.go</code></td>
      <td>Options(), OptionChain(), Strikes(), etc.</td>
    </tr>
    <tr>
      <td>Unit Tests</td>
      <td><code class="language-plaintext highlighter-rouge">pkg/ticker/options_test.go</code></td>
      <td>Cache and struct tests</td>
    </tr>
  </tbody>
</table>

<p><strong>Usage Example</strong></p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">t</span><span class="p">,</span> <span class="n">_</span> <span class="o">:=</span> <span class="n">ticker</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="s">"AAPL"</span><span class="p">)</span>
<span class="k">defer</span> <span class="n">t</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>

<span class="c">// List of expiration dates</span>
<span class="n">expirations</span><span class="p">,</span> <span class="n">_</span> <span class="o">:=</span> <span class="n">t</span><span class="o">.</span><span class="n">Options</span><span class="p">()</span>

<span class="c">// Option chain (nearest expiration)</span>
<span class="n">chain</span><span class="p">,</span> <span class="n">_</span> <span class="o">:=</span> <span class="n">t</span><span class="o">.</span><span class="n">OptionChain</span><span class="p">(</span><span class="s">""</span><span class="p">)</span>

<span class="c">// Option chain for a specific date</span>
<span class="n">chain</span><span class="p">,</span> <span class="n">_</span> <span class="o">:=</span> <span class="n">t</span><span class="o">.</span><span class="n">OptionChain</span><span class="p">(</span><span class="s">"2025-12-26"</span><span class="p">)</span>

<span class="c">// List of strike prices</span>
<span class="n">strikes</span><span class="p">,</span> <span class="n">_</span> <span class="o">:=</span> <span class="n">t</span><span class="o">.</span><span class="n">Strikes</span><span class="p">()</span>
</code></pre></div></div>

<p><strong>Issues Encountered</strong></p>

<p>During development, the following issue occurred:</p>

<p><br /></p>

<p><em>🤖: The Underlying in <code class="language-plaintext highlighter-rouge">options.go</code> must now be of type <code class="language-plaintext highlighter-rouge">*models.OptionQuote</code>. Checking the code, it is already using <code class="language-plaintext highlighter-rouge">&amp;result.Quote</code>, and since the <code class="language-plaintext highlighter-rouge">Quote</code> type has been changed to <code class="language-plaintext highlighter-rouge">OptionQuote</code>, it is automatically compatible. I need to update the test file and modify <code class="language-plaintext highlighter-rouge">cmd/test_options/main.go</code> as well.</em></p>

<p><br /></p>

<p>As features were added, a new type needed to be applied to parts where an existing type was used. Claude Code correctly identified this and made the necessary modifications.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">pkg/models/option.go</code>: Added OptionQuote type
    <ul>
      <li><code class="language-plaintext highlighter-rouge">OptionChain.Underlying</code> changed to <code class="language-plaintext highlighter-rouge">*OptionQuote</code> type</li>
      <li><code class="language-plaintext highlighter-rouge">OptionChainResponse.Quote</code> also changed to <code class="language-plaintext highlighter-rouge">OptionQuote</code> type</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">pkg/ticker/options.go</code>: Automatic compatibility
    <ul>
      <li>No changes needed as <code class="language-plaintext highlighter-rouge">&amp;result.Quote</code> returns <code class="language-plaintext highlighter-rouge">*models.OptionQuote</code></li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">cmd/test_options/main.go</code>: Deleted as it was a temporary file after testing</li>
</ul>

<p><strong>Live Test Results</strong></p>

<ul>
  <li>Underlying Price: $271.84</li>
  <li>Calls: 99</li>
  <li>Puts: 91</li>
</ul>

<h3 id="phase-3-financials">Phase 3: Financials</h3>

<p><strong>Newly Added Files</strong></p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">pkg/models/financials.go</code>: Financials data models</li>
  <li><code class="language-plaintext highlighter-rouge">pkg/ticker/financials.go</code>: Financials API methods</li>
  <li><code class="language-plaintext highlighter-rouge">pkg/ticker/financials_test.go</code>: Unit tests</li>
</ul>

<p><strong>Modified Files</strong></p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">internal/endpoints/endpoints.go</code>: Added Financials key constants</li>
  <li><code class="language-plaintext highlighter-rouge">pkg/ticker/ticker.go</code>: Added financialsCache field</li>
</ul>

<p><strong>Implemented API Methods</strong></p>

<table>
  <thead>
    <tr>
      <th>Method</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">IncomeStatement(freq)</code></td>
      <td>Income Statement (annual/quarterly)</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">BalanceSheet(freq)</code></td>
      <td>Balance Sheet (annual/quarterly)</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">CashFlow(freq)</code></td>
      <td>Cash Flow (annual/quarterly)</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">FinancialsJSON()</code></td>
      <td>Raw JSON for debugging</td>
    </tr>
  </tbody>
</table>

<p><strong>Live Test Results (AAPL)</strong></p>

<ul>
  <li>Income Statement: 5 periods, 26 fields</li>
  <li>Total Revenue: $416.16B</li>
  <li>Net Income: $112.01B</li>
  <li>Diluted EPS: $7.46</li>
  <li>Balance Sheet: 4 periods, 34 fields</li>
  <li>Total Assets: $359.24B</li>
  <li>Total Debt: $98.66B</li>
  <li>Cash Flow: 5 periods, 38 fields</li>
  <li>Operating Cash Flow: $111.48B</li>
  <li>Free Cash Flow: $98.77B</li>
</ul>

<h3 id="phase-4-analysis">Phase 4: Analysis</h3>

<p><strong>Newly Added Files</strong></p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">pkg/models/analysis.go</code>: Analysis data models (116 lines)</li>
  <li><code class="language-plaintext highlighter-rouge">pkg/ticker/analysis.go</code>: Analysis API methods (664 lines)</li>
  <li><code class="language-plaintext highlighter-rouge">pkg/ticker/analysis_test.go</code>: Unit tests (196 lines)</li>
</ul>

<p><strong>Modified Files</strong></p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">pkg/ticker/ticker.go</code>: Added analysisCache field</li>
</ul>

<p><strong>Implemented API Methods</strong></p>

<table>
  <thead>
    <tr>
      <th>Method</th>
      <th>Description</th>
      <th>Source Module</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Recommendations()</code></td>
      <td>Analyst recommendations</td>
      <td>recommendationTrend</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">PriceTarget()</code></td>
      <td>Price targets</td>
      <td>financialData</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">EarningsEstimates()</code></td>
      <td>Earnings estimates</td>
      <td>earningsTrend</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">RevenueEstimates()</code></td>
      <td>Revenue estimates</td>
      <td>earningsTrend</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">EPSTrend()</code></td>
      <td>EPS trend</td>
      <td>earningsTrend</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">EPSRevisions()</code></td>
      <td>EPS revisions</td>
      <td>earningsTrend</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">EarningsHistory()</code></td>
      <td>Earnings history</td>
      <td>earningsHistory</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">GrowthEstimates()</code></td>
      <td>Growth estimates</td>
      <td>industryTrend, sectorTrend, indexTrend</td>
    </tr>
  </tbody>
</table>

<p><strong>Live Test Results (AAPL)</strong></p>

<ul>
  <li>Recommendations: 4 periods (StrongBuy=5, Buy=24, Hold=15, Sell=1, StrongSell=3)</li>
  <li>Price Targets: Current=$272.19, Mean=$287.71, High=$350, Low=$215</li>
  <li>Earnings Estimates: 4 periods (0q, +1q, 0y, +1y)</li>
  <li>Revenue Estimates: 4 periods with growth rates</li>
  <li>Earnings History: 4 quarters with surprise %</li>
</ul>

<p><strong>Changes vs Plan</strong></p>

<p>Original Plan</p>

<ul>
  <li>Analyst Recommendations ✅</li>
  <li>Price Targets ✅</li>
  <li>Earnings Estimates ✅</li>
  <li>Revenue Estimates ✅</li>
  <li>EPS Trend/Revisions ✅</li>
  <li>Growth Estimates ✅</li>
</ul>

<p>Additional Implementations</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">EarningsHistory()</code>: Provides actual results vs past estimates (surprise %)</li>
  <li>Caching System: Fetches <code class="language-plaintext highlighter-rouge">earningsTrend</code> data once and reuses it across multiple methods</li>
</ul>

<p>Structural Changes</p>

<ul>
  <li>Initially expected to use separate API endpoints, but implemented by combining multiple modules of the <code class="language-plaintext highlighter-rouge">quoteSummary</code> API.</li>
  <li>Unified function name <code class="language-plaintext highlighter-rouge">getFloat</code> → <code class="language-plaintext highlighter-rouge">getFloat64</code> (to avoid conflict with <code class="language-plaintext highlighter-rouge">info.go</code>).</li>
</ul>

<h2 id="intermediate-verification-with-yfinance">Intermediate Verification with yfinance</h2>

<p>I asked Claude Code to verify if all the phases developed so far are implemented identically to the features and methods provided by the existing Python-based yfinance.</p>

<p><br /></p>

<p><em>👨🏻‍💻: Please double-check thoroughly that all Phases implemented so far accurately replicate all features provided by the existing Python-based yfinance. ultrathink. You may proceed with tests if necessary.</em></p>

<p><br /></p>

<h3 id="verification-plan">Verification Plan</h3>

<p>This is the TODO list set up by Claude Code. It plans to test each Phase, run Go Tests, and finally analyze any discrepancies.</p>

<ul>
  <li>Compare Phase 0 (Foundation): HTTP Client, Auth, Errors, Config</li>
  <li>Compare Phase 1 (Core Data): Quote, History, Info</li>
  <li>Compare Phase 2 (Options): Options chain and expiration</li>
  <li>Compare Phase 3 (Financials): Income, Balance, CashFlow</li>
  <li>Compare Phase 4 (Analysis): Recommendations, Price Targets, Estimates</li>
  <li>Run Go tests to verify all implementations</li>
  <li>Report findings and identify any gaps</li>
</ul>

<h3 id="verification-results">Verification Results</h3>

<p><strong>Phase 0: Foundation</strong> (Completed)</p>

<table>
  <thead>
    <tr>
      <th>Python yfinance</th>
      <th>Go Implementation</th>
      <th>Status</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>curl_cffi TLS fingerprint</td>
      <td>CycleTLS (Chrome JA3)</td>
      <td>✅</td>
    </tr>
    <tr>
      <td>Cookie/Crumb auth</td>
      <td>AuthManager (Basic + CSRF)</td>
      <td>✅</td>
    </tr>
    <tr>
      <td>Proxy settings</td>
      <td>Config.SetProxy()</td>
      <td>✅</td>
    </tr>
    <tr>
      <td>Timeout settings</td>
      <td>Config.SetTimeout()</td>
      <td>✅</td>
    </tr>
    <tr>
      <td>Error handling</td>
      <td>YFError with codes</td>
      <td>✅</td>
    </tr>
  </tbody>
</table>

<p><strong>Phase 1: Core Data</strong> (Completed)</p>

<table>
  <thead>
    <tr>
      <th>Python Method</th>
      <th>Go Method</th>
      <th>Status</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.info</code></td>
      <td><code class="language-plaintext highlighter-rouge">Info()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.fast_info</code></td>
      <td><code class="language-plaintext highlighter-rouge">FastInfo()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.history()</code></td>
      <td><code class="language-plaintext highlighter-rouge">History()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.dividends</code></td>
      <td><code class="language-plaintext highlighter-rouge">Dividends()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.splits</code></td>
      <td><code class="language-plaintext highlighter-rouge">Splits()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.actions</code></td>
      <td><code class="language-plaintext highlighter-rouge">Actions()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Quote data</code></td>
      <td><code class="language-plaintext highlighter-rouge">Quote()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">History metadata</code></td>
      <td><code class="language-plaintext highlighter-rouge">GetHistoryMetadata()</code></td>
      <td>✅</td>
    </tr>
  </tbody>
</table>

<p><strong>Phase 2: Options</strong> (Completed)</p>

<table>
  <thead>
    <tr>
      <th>Python Method</th>
      <th>Go Method</th>
      <th>Status</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.options</code></td>
      <td><code class="language-plaintext highlighter-rouge">Options()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.option_chain()</code></td>
      <td><code class="language-plaintext highlighter-rouge">OptionChain()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td>Expiration dates</td>
      <td><code class="language-plaintext highlighter-rouge">OptionChainAtExpiry()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td>Strike prices</td>
      <td><code class="language-plaintext highlighter-rouge">Strikes()</code></td>
      <td>✅</td>
    </tr>
  </tbody>
</table>

<p><strong>Phase 3: Financials</strong> (Completed)</p>

<table>
  <thead>
    <tr>
      <th>Python Method</th>
      <th>Go Method</th>
      <th>Status</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.income_stmt</code></td>
      <td><code class="language-plaintext highlighter-rouge">IncomeStatement("annual")</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.quarterly_income_stmt</code></td>
      <td><code class="language-plaintext highlighter-rouge">IncomeStatement("quarterly")</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.balance_sheet</code></td>
      <td><code class="language-plaintext highlighter-rouge">BalanceSheet("annual")</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.quarterly_balance_sheet</code></td>
      <td><code class="language-plaintext highlighter-rouge">BalanceSheet("quarterly")</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.cash_flow</code></td>
      <td><code class="language-plaintext highlighter-rouge">CashFlow("annual")</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.quarterly_cash_flow</code></td>
      <td><code class="language-plaintext highlighter-rouge">CashFlow("quarterly")</code></td>
      <td>✅</td>
    </tr>
  </tbody>
</table>

<ul>
  <li>Note: Python’s <code class="language-plaintext highlighter-rouge">ttm_income_stmt</code> and <code class="language-plaintext highlighter-rouge">ttm_cash_flow</code> (trailing 12 months) are supported in Go via the <code class="language-plaintext highlighter-rouge">freq="trailing"</code> parameter.</li>
</ul>

<p><strong>Phase 4: Analysis</strong> (Completed)</p>

<table>
  <thead>
    <tr>
      <th>Python Method</th>
      <th>Go Method</th>
      <th>Status</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.recommendations</code></td>
      <td><code class="language-plaintext highlighter-rouge">Recommendations()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.analyst_price_targets</code></td>
      <td><code class="language-plaintext highlighter-rouge">PriceTarget()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.earnings_estimate</code></td>
      <td><code class="language-plaintext highlighter-rouge">EarningsEstimates()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.revenue_estimate</code></td>
      <td><code class="language-plaintext highlighter-rouge">RevenueEstimates()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.eps_trend</code></td>
      <td><code class="language-plaintext highlighter-rouge">EPSTrend()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.eps_revisions</code></td>
      <td><code class="language-plaintext highlighter-rouge">EPSRevisions()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.earnings_history</code></td>
      <td><code class="language-plaintext highlighter-rouge">EarningsHistory()</code></td>
      <td>✅</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ticker.growth_estimates</code></td>
      <td><code class="language-plaintext highlighter-rouge">GrowthEstimates()</code></td>
      <td>✅</td>
    </tr>
  </tbody>
</table>

<p><strong>Unimplemented Features (Scheduled for Phase 5 and beyond)</strong></p>

<table>
  <thead>
    <tr>
      <th>Python Feature</th>
      <th>Phase</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>major_holders</td>
      <td>Phase 5</td>
    </tr>
    <tr>
      <td>institutional_holders</td>
      <td>Phase 5</td>
    </tr>
    <tr>
      <td>mutualfund_holders</td>
      <td>Phase 5</td>
    </tr>
    <tr>
      <td>insider_transactions</td>
      <td>Phase 5</td>
    </tr>
    <tr>
      <td>insider_purchases</td>
      <td>Phase 5</td>
    </tr>
    <tr>
      <td>insider_roster_holders</td>
      <td>Phase 5</td>
    </tr>
    <tr>
      <td>calendar</td>
      <td>Phase 5</td>
    </tr>
    <tr>
      <td>sustainability</td>
      <td>Phase 9</td>
    </tr>
    <tr>
      <td>isin</td>
      <td>Phase 9</td>
    </tr>
    <tr>
      <td>news</td>
      <td>Phase 9</td>
    </tr>
    <tr>
      <td>earnings_dates</td>
      <td>Phase 9</td>
    </tr>
    <tr>
      <td>upgrades_downgrades</td>
      <td>Expandable in Phase 4</td>
    </tr>
    <tr>
      <td>sec_filings</td>
      <td>Phase 9</td>
    </tr>
    <tr>
      <td>shares / shares_full</td>
      <td>Phase 5</td>
    </tr>
    <tr>
      <td>capital_gains</td>
      <td>Expandable in Phase 1</td>
    </tr>
    <tr>
      <td>funds_data</td>
      <td>Phase 9</td>
    </tr>
    <tr>
      <td>live() WebSocket</td>
      <td>Phase 8</td>
    </tr>
  </tbody>
</table>

<h3 id="evaluation">Evaluation</h3>

<ul>
  <li>All core features (Quote, History, Options, Financials, Analysis) are perfectly implemented.</li>
  <li>Uses the same API endpoints as Python.</li>
  <li>Caching strategy applied consistently.</li>
  <li>Appropriate error handling and type safety.</li>
  <li>All 38 unit tests passed.</li>
</ul>

<h3 id="areas-for-improvement">Areas for Improvement</h3>

<ul>
  <li><strong>upgrades_downgrades:</strong> Fetched from <code class="language-plaintext highlighter-rouge">_quote</code> data in Python’s <code class="language-plaintext highlighter-rouge">quote.py</code> → Can be added to Phase 4.</li>
  <li><strong>capital_gains:</strong> Data already being received in History API, can add a separate method.</li>
  <li><strong>TTM (Trailing Twelve Months) Financials:</strong> Currently supported via <code class="language-plaintext highlighter-rouge">freq="trailing"</code>.</li>
</ul>]]></content><author><name>Wonjoon</name></author><category term="dev" /><category term="go-yfinance" /><summary type="html"><![CDATA[The second post covering the story of building a Go version of the yahoo finance library based on the Python yfinance library using Claude Code.]]></summary></entry><entry xml:lang="en"><title type="html">Building a Go Yahoo Finance Library with Claude Code #4</title><link href="http://localhost:4000/2025/12/19/go-yfinance-3-en/" rel="alternate" type="text/html" title="Building a Go Yahoo Finance Library with Claude Code #4" /><published>2025-12-19T00:00:00+09:00</published><updated>2025-12-19T00:00:00+09:00</updated><id>http://localhost:4000/2025/12/19/go-yfinance-3-en</id><content type="html" xml:base="http://localhost:4000/2025/12/19/go-yfinance-3-en/"><![CDATA[<h2 id="the-need-for-documentation">The Need for Documentation</h2>

<p>After <a href="https://wnjoon.github.io/2025/12/19/go-yfinance-2-en/">verifying the consistency between yfinance and go-yfinance</a>, it suddenly occurred to me that the library I’m developing needs documentation. Initially, I planned to write the documentation after the library development was finished. However, since the library has now surpassed the MVP stage and reached a level where it’s practically usable, I thought it would be good to start documenting it now.</p>

<p>If this were an API, I would have naturally thought of Swagger, but nothing immediately came to mind for a Go library. I could use the documentation automatically generated when uploading a Go library to <code class="language-plaintext highlighter-rouge">pkg.go.dev</code>, but just as yfinance operates a <a href="https://ranaroussi.github.io/yfinance/">separate documentation webpage</a>, I felt I should have a separate user manual as well.</p>

<p>I mainly used <code class="language-plaintext highlighter-rouge">go doc</code>, but honestly, perhaps because I didn’t know much about it, I wasn’t very satisfied. The web-formatted documentation it generated was quite poor. So, I decided to look for other methods.</p>

<p><br /></p>

<p><em>👨🏻‍💻: What do you think about applying gomarkdoc to the currently developed go-yfinance? Or please let me know if there are other good ways to create user documentation.</em></p>

<p><br /></p>

<h2 id="various-documentation-tools">Various Documentation Tools</h2>

<p>I asked the question above to both Claude Code and Gemini. Here is a summary of the answers I received from both AIs. Among them, I decided to use <strong><a href="https://github.com/princjef/gomarkdoc">gomarkdoc</a></strong>.</p>

<p><strong>gomarkdoc</strong></p>

<ul>
  <li>Pros:
    <ul>
      <li>Outputs in Markdown format → Renders directly on GitHub/GitLab</li>
      <li>Easy integration with existing README.md</li>
      <li>Can be automatically generated in CI/CD</li>
      <li>Customizable templates</li>
    </ul>
  </li>
  <li>Cons:
    <ul>
      <li>Requires external tool installation (<code class="language-plaintext highlighter-rouge">go install github.com/princjef/gomarkdoc/cmd/gomarkdoc@latest</code>)</li>
    </ul>
  </li>
</ul>

<p><strong>godoc</strong></p>

<ul>
  <li>Pros:
    <ul>
      <li>Official Go tool, no separate installation required</li>
      <li>Same format as pkg.go.dev</li>
      <li>Automatically generates documentation on pkg.go.dev when the library is published</li>
    </ul>
  </li>
  <li>Cons:
    <ul>
      <li>Provided only as an HTML server (<code class="language-plaintext highlighter-rouge">godoc -http=:6060</code>)</li>
      <li>Difficult to generate static files</li>
    </ul>
  </li>
</ul>

<p><strong>pkgsite</strong></p>

<ul>
  <li>Pros:
    <ul>
      <li>UI identical to pkg.go.dev (Local version of pkg.go.dev)</li>
      <li>Latest Go documentation standard</li>
    </ul>
  </li>
  <li>Cons:
    <ul>
      <li>Difficult to export statically</li>
    </ul>
  </li>
</ul>

<p>If the library grows later and I want to create a website including not just simple API specifications but also tutorials and guides, I can use <a href="https://www.mkdocs.org/">MkDocs</a> or <a href="https://docusaurus.io/">Docusaurus</a>. I was told that Markdown documents created using gomarkdoc can be directly used in MkDocs or Docusaurus to build a website. I plan to try this later and write a post about it.</p>

<h2 id="setting-up-github-actions-automation">Setting up GitHub Actions Automation</h2>

<p>I learned this time that you can use GitHub Actions to automatically update documentation whenever a new feature is developed and pushed to the repository. I decided to update the documentation whenever a specific stage of development is completed and pushed to <code class="language-plaintext highlighter-rouge">main</code>.</p>

<p>You can write the following in the <code class="language-plaintext highlighter-rouge">.github/workflows/docs.yml</code> file:</p>

<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">name</span><span class="pi">:</span> <span class="s">Generate Documentation</span>

<span class="na">on</span><span class="pi">:</span>
  <span class="na">push</span><span class="pi">:</span>
    <span class="na">branches</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">main</span>  <span class="c1"># Triggers when pushed to the main branch</span>
    <span class="na">paths</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s1">'</span><span class="s">pkg/**'</span> <span class="c1"># Triggers only when code inside the pkg folder changes</span>

<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">docs</span><span class="pi">:</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>
    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/checkout@v3</span>

      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Set up Go</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/setup-go@v3</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">go-version</span><span class="pi">:</span> <span class="m">1.23</span> <span class="c1"># Go version in use</span>

      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Install gomarkdoc</span>
        <span class="na">run</span><span class="pi">:</span> <span class="s">go install [github.com/princjef/gomarkdoc/cmd/gomarkdoc@latest](https://github.com/princjef/gomarkdoc/cmd/gomarkdoc@latest)</span>

      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Generate API Documentation</span>
        <span class="c1"># Scans the pkg folder recursively and regenerates the API.md file</span>
        <span class="na">run</span><span class="pi">:</span> <span class="s">gomarkdoc --output API.md ./pkg/...</span>

      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Commit and Push changes</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">stefanzweifel/git-auto-commit-action@v4</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">commit_message</span><span class="pi">:</span> <span class="s2">"</span><span class="s">docs:</span><span class="nv"> </span><span class="s">update</span><span class="nv"> </span><span class="s">API</span><span class="nv"> </span><span class="s">documentation</span><span class="nv"> </span><span class="s">via</span><span class="nv"> </span><span class="s">gomarkdoc"</span>
          <span class="na">file_pattern</span><span class="pi">:</span> <span class="s">API.md</span>
</code></pre></div></div>

<p>The sequence is as follows:</p>

<ol>
  <li>Modify the code and upload it to GitHub.</li>
  <li>The Action runs and modifies API.md according to the changed code.</li>
  <li>The bot automatically leaves a commit saying “docs: update…”.</li>
</ol>

<h2 id="requesting-documentation-generation">Requesting Documentation Generation</h2>

<p>I asked Claude Code to write documentation based on the development progress so far.</p>

<p><br /></p>

<p><em>👨🏻‍💻: Please write documentation for the content developed so far using gomarkdoc. Write each method, parameter, and result value according to standards. Please proceed while carefully checking if there are any missing comments or if anything is written insufficiently or missing compared to the gomarkdoc method. Also, set up CI/CD so that this document is automatically updated whenever I push to main.</em></p>

<p><br /></p>

<h2 id="documentation-results">Documentation Results</h2>

<p><strong>Added Files</strong></p>

<table>
  <thead>
    <tr>
      <th>File</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">.github/workflows/docs.yml</code></td>
      <td>Automatic documentation generation on main push</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">.github/workflows/test.yml</code></td>
      <td>Test and lint CI</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">docs/API.md</code></td>
      <td>Generated API documentation (2,790 lines)</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">pkg/client/doc.go</code></td>
      <td>client package documentation</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">pkg/ticker/doc.go</code></td>
      <td>ticker package documentation</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">pkg/models/doc.go</code></td>
      <td>models package documentation</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">pkg/config/doc.go</code></td>
      <td>config package documentation</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">internal/endpoints/doc.go</code></td>
      <td>endpoints package documentation</td>
    </tr>
  </tbody>
</table>

<p><strong>Improved Method Documentation</strong></p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">History()</code> - Added parameters and examples</li>
  <li><code class="language-plaintext highlighter-rouge">HistoryPeriod()</code> - Added description of valid periods</li>
  <li><code class="language-plaintext highlighter-rouge">HistoryRange()</code> - Added parameter description</li>
  <li><code class="language-plaintext highlighter-rouge">Dividends()</code>, <code class="language-plaintext highlighter-rouge">Splits()</code>, <code class="language-plaintext highlighter-rouge">Actions()</code> - Added return value description</li>
  <li><code class="language-plaintext highlighter-rouge">IncomeStatement()</code>, <code class="language-plaintext highlighter-rouge">BalanceSheet()</code>, <code class="language-plaintext highlighter-rouge">CashFlow()</code> - Added examples and field descriptions</li>
</ul>

<p><strong>CI/CD Behavior</strong></p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">docs.yml</code>: When <code class="language-plaintext highlighter-rouge">pkg/**/*.go</code> or <code class="language-plaintext highlighter-rouge">internal/**/*.go</code> changes → Runs <code class="language-plaintext highlighter-rouge">gomarkdoc</code> → Automatically updates and commits <code class="language-plaintext highlighter-rouge">docs/API.md</code></li>
  <li><code class="language-plaintext highlighter-rouge">test.yml</code>: On PR/push → Runs tests, uploads coverage, runs <code class="language-plaintext highlighter-rouge">golangci-lint</code></li>
</ul>

<p><strong>How to View the Documentation</strong></p>

<ul>
  <li><a href="https://github.com/wnjoon/go-yfinance/blob/main/docs/API.md">API.md</a></li>
</ul>]]></content><author><name>Wonjoon</name></author><category term="dev" /><category term="go-yfinance" /><summary type="html"><![CDATA[The fourth post covering the story of building a Go version of the yahoo finance library based on the Python yfinance library using Claude Code.]]></summary></entry></feed>