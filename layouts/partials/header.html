{{/* Header */}}

<div class="header">

    {{ if or (not (.Param "hideHeader")) .IsHome }}

    <div class="header-top">
        <h1 class="header-title">
            <a href="{{ site.BaseURL }}">{{ site.Title }}</a>
        </h1>

        {{ $enLink := ("/" | absURL) }}
        {{ $koLink := ("/ko/" | absURL) }}

        {{ $enTranslations := where .AllTranslations "Lang" "en" }}
        {{ with (index $enTranslations 0) }}
            {{ $enLink = .Permalink }}
        {{ end }}

        {{ $koTranslations := where .AllTranslations "Lang" "ko" }}
        {{ with (index $koTranslations 0) }}
            {{ $koLink = .Permalink }}
        {{ end }}

        <div class="header-actions">
            {{ if eq .Lang "en" }}
                <a class="lang-flag-toggle" href="{{ $koLink }}" aria-label="Switch to Korean">ðŸ‡°ðŸ‡·</a>
            {{ else if eq .Lang "ko" }}
                <a class="lang-flag-toggle" href="{{ $enLink }}" aria-label="Switch to English">ðŸ‡ºðŸ‡¸</a>
            {{ end }}

            <button id="theme-toggle" class="theme-toggle" type="button" aria-label="Toggle dark mode">
                <span class="theme-toggle-icon theme-toggle-icon-sun" aria-hidden="true">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 17.5a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M12 1v2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        <path d="M12 21v2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        <path d="M4.22 4.22l1.42 1.42" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        <path d="M18.36 18.36l1.42 1.42" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        <path d="M1 12h2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        <path d="M21 12h2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        <path d="M4.22 19.78l1.42-1.42" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        <path d="M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </span>
                <span class="theme-toggle-icon theme-toggle-icon-moon" aria-hidden="true">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3a7 7 0 0 0 9.79 9.79Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </span>
            </button>
        </div>
    </div>

    <div class="header-menu">
        {{ $currentPage := . }}

        {{ with site.Params.menu }}
        {{ range . }}

        {{ $menuUrl := .url }}
        {{ if not (or (hasPrefix $menuUrl "http://") (hasPrefix $menuUrl "https://") (hasPrefix $menuUrl "mailto:") (hasPrefix $menuUrl "tel:")) }}
            {{ $menuUrl = ($menuUrl | relLangURL) }}
        {{ end }}

        <p
            class="small {{ if eq .name (lower $currentPage.Name) }} bold {{end}}">
            <a href="{{ $menuUrl }}" {{ if and (isset . "newTab") .newTab
                }}target="_blank" rel="noopener noreferrer" {{ end }}>
                /{{.name }}
            </a>
        </p>
        {{ end }}
        {{ end }}
    </div>

    {{ end }}

</div>
